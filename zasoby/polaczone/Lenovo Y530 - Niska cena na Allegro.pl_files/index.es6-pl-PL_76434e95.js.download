var e=[e=>{var t;t=()=>(e=>{var t={};function a(s){if(t[s])return t[s].exports;var r=t[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}return a.m=e,a.c=t,a.p="",a(0)})([(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pl";return o=>{var i=((e,t)=>{var o=u[t]||u.en;if(e>=n){var i=Math.round(e/n);return o.month(i)}if(e>=r){var l=Math.floor(e/r);return o.day(l)}if(e>=s){var c=Math.floor(e/s);return o.hour(c)}var m=Math.floor(e/a);return o.minute(m)})(Math.floor(((e||new Date)-o)/1e3),t);return""+i}};var a=60,s=60*a,r=24*s,n=30*r,o=(Object.freeze({pl:1,en:2,cz:3,sk:4,uk:5}),Object.freeze({month(e){return 1===e?"1 miesiąc temu":e>=2&&e<=4?e+" miesiące temu":e>=5&&e<=11?e+" miesięcy temu":12===e?"rok temu":"ponad rok temu"},day(e){return e+" "+(1===e?"dzień":"dni")+" temu"},hour(e){return 1===e?e+" godzinę temu":e>10&&e<22?e+" godzin temu":e%10>1&&e%10<5?e+" godziny temu":e+" godzin temu"},minute(e){return e<=0?"przed chwilą":1===e?e+" minutę temu":e>1&&e<5?e+" minuty temu":e>=10&&e<20?e+" minut temu":e%10>1&&e%10<5?e+" minuty temu":e+" minut temu"}})),i=Object.freeze({month(e){return 1===e?"1 month ago":e<12?e+" months ago":12===e?"1 year ago":"over a year ago"},day(e){return e+" "+(1===e?"day":"days")+" ago"},hour(e){return 1===e?e+" hour ago":e+" hours ago"},minute(e){return e<=0?"a moment ago":1===e?e+" minute ago":e+" minutes ago"}}),l=Object.freeze({month(e){return 1===e?"před 1 měsícem":e>=2&&e<=11?"před "+e+" měsíci":12===e?"před rokem":"více než před rokem"},day(e){return"před "+e+" "+(1===e?"dnem":"dny")},hour(e){return 1===e?"před 1 hodinou":"před "+e+" hodinami"},minute(e){return e<=0?"před chvílí":1===e?"před 1 minutou":"před "+e+" minutami"}}),c=Object.freeze({month(e){return 1===e?"pred 1 mesiacom":e>=2&&e<=11?"pred "+e+" mesiacmi":12===e?"pred rokom":"viac ako pred rokom"},day(e){return"pred "+e+" "+(1===e?"dňom":"dňami")},hour(e){return 1===e?"pred 1 hodinou":"pred "+e+" hodinami"},minute(e){return e<=0?"pred chvíľou":1===e?"pred 1 minútou":"pred "+e+" minútami"}}),m=Object.freeze({month(e){return 1===e?"1 місяць тому":e>=2&&e<=4?e+" місяці тому":e>=5&&e<=11?e+" місяців тому":12===e?"рік назад":"Більше року тому"},day(e){return e+" "+(1===e?"день":"днів")+" тому"},hour(e){return 1===e?"1 годину тому":e>=2&&e<=4||e>=22&&e<=24?e+" години тому":e+" годин тому"},minute(e){return e<=1?"хвилину тому":e>1&&e<5?e+" хвилини тому":e>=10&&e<20?e+" хвилин тому":e%10>1&&e%10<5?e+" хвилини тому":e+" хвилин тому"}}),u=Object.freeze({pl:o,en:i,cs:l,sk:c,uk:m})}]),e.exports=t()}],t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>({}.hasOwnProperty.call(e,t)),(()=>{const e={withCredentials:!0,headers:{Accept:"application/vnd.allegro.internal.v1+json"}};class t{constructor(e){const{opbox:{edge:t}}=e;this.edge=t}getThreads(){return this.edge.get("/message-center/threads?limit=10",e)}}const s={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},r=/<|>|&|"|'/g,n=(RegExp(Array.from("javascript:",(e=>e+"[\\n\\r\\t]*")).join(""),"ig"),e=>s[e]);class o{constructor(e,t){this.$=e[0];for(let a=0;a<t.length;a++){const s=t[a];if(Array.isArray(s))for(let e=0;e<s.length;e++)this.$esc(s[e]);else this.$esc(s);this.$+=e[a+1]}}$esc(e){this.$+=e instanceof o?e.$:(e+"").replace(r,n)}toString(){return this.$}}const i=e=>new o([e+""],[]),l=(e,...t)=>new o(e,t);var c=a(0);let m="pl-PL";const u={"pl-PL":{"log in to see your messages":[["",["Zaloguj się, aby zobaczyć swoje wiadomości."]]],"log in":[["",["Zaloguj się"]]],"show all":[["",["Pokaż wszystkie"]]],"open message center":[["",["Otwórz Centrum Wiadomości"]]],"you have no message":[["",["Nie masz jeszcze wiadomości"]]],"something went wrong...":[["",["Coś poszło nie tak..."]]],"unfortunately we could not view your messages.":[["",["Niestety nie mogliśmy wyświetlić Twoich wiadomości."]]],from:[["",["od"]]],to:[["",["do"]]],"Do you have a moment?":[["",["Masz chwilę?"]]],"Help us improve the Message Center":[["",["Pomóż ulepszać Centrum Wiadomości"]]],"communication in one place":[["",["Komunikacja w jednym miejscu"]]],"The Message Center combines the advantages of messenger, chat and e-mail capabilities.":[["",["Centrum Wiadomości łączy w sobie zalety komunikatora, czatu i możliwości poczty elektronicznej."]]],"Log in to have your questions about offers and e-mails sent via Allegro in one place.":[["",["Zaloguj się, aby mieć w jednym miejscu swoje pytania o oferty oraz mejle wysłane poprzez Allegro."]]],"Don't have an account?":[["",["Nie masz konta?"]]],"sign up":[["",["Zarejestruj się"]]],"The Message Center is a place for communication between buyers and sellers.":[["",["Centrum Wiadomości to miejsce do komunikacji między kupującymi a sprzedającymi."]]],"Here you will find your":[["",["Znajdziesz tutaj swoje"]]],"questions about offers":[["",["pytania o oferty"]]],", as well as e-mails sent via Allegro.":[["",[", a także meile wysyłane poprzez Allegro."]]]}},d=/({{[^}]+}}|{%[^%}]+%})/g,p=/({{[^}]+}})/g,h=/({%[^%}]+%})/g,g=/({{\s*|\s*}}|{%\s*|\s*%})/g,f={"pl-PL":e=>1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2};function _(e,t=""){if("string"==typeof e)throw Error("Translation has to be an array");return e.find((e=>e[0]===t))[1]}const y=(e,t,a)=>{const s=u[m][e];if(!s)throw Error(`Missing translation for lang "${m}" and key "${e}"`);return t?((e,t,a)=>{let s=_(e,t.context);return parseInt(t.count,10)>=0?s=((e,t)=>{const a=f[m](t);return"boolean"!=typeof a?e[a]:e[a?1:0]})(s,t.count):[s]=s,((e,t,a)=>{if(a){let a=0;return e.split(d).map((s=>{if(s.match(h)){const r=t.formatters[a];if(r)return a+=1,r(s.replace(g,""));throw Error(`Missing translation formatter for "${e}"`)}return s.match(p)?t[s.replace(g,"")]:s}))}const s=e.match(d);let r=0;return s?s.reduce(((a,s)=>{const n=s.replace(g,"");if(s.match(h)){const o=t.formatters[r];if(o)return r+=1,a.replace(s,o(n));throw Error(`Missing translation formatter for "${e}"`)}return s.match(p)?a.replace(s,t[n]):a}),e):e})(s,t,a)})(s,t,a):_(s)[0]},v=m,$="m0qj_5r",w="mrmn_qo",b="mrhf_u8",k="mlkp_ag",z="mx7m_1",j="msbw_rf",C="msbw_qo",M="mldj_rf",x="mldj_qo",q="mtag_rf",O="mtag_qo",S="mm2b_rf",A="mm2b_qo",L="m911_5r",E="mefy_5r",P="mnyp_5r",I="mdwl_5r",T="mjyo_6x",N="mgmw_3z",D="mgmw_ye",U="mgmw_wo",R="msts_n7",W="mqen_m6",B="mpof_ki",H="mpof_vs",Z="mpof_z0",F="mx4z_6m",V="myre_zn",Q="mp0t_0a",J="mgn2_14",K="mgn2_12",G="m9qz_yq",X="m9qz_yp",Y="mse2_k4",ee="mse2_40",te="mqvr_2",ae="mqu1_40",se="mqu1_21",re="mqu1_16",ne="mp4t_0",oe="mryx_16",ie="mryx_0",le="munh_0",ce="m3h2_0",me="m2ha_2",ue="mjt1_n2",de="m8qd_vz",pe="mjir_sv",he="meqh_en",ge="mg9e_16",fe="mg9e_0",_e="mj7a_16",ye="mj7a_0",ve="mh36_16",$e="mh36_0",we="mvrt_16",be="mvrt_0",ke="mp7g_f6",ze="mp7g_oh",je="mq1m_0",Ce="mqm6_0",Me="mnjl_0",xe="mzmg_6m",qe="mj9z_5r",Oe="m6ax_n4",Se="mli8_k4",Ae="mtsp_ib",Le="m0ux_fp",Ee="m31c_kb",Pe="mupj_5k",Ie="msa3_z4",Te="m7er_k4",Ne="b1kk0",De="_9fb16_IMEzO",Ue="_9fb16_FOORf",Re=B+" "+V+" m7f5_6m "+Y+" "+ze+" "+ge+" "+we+" "+_e+" "+ve+" "+F+" "+xe,We=J+" "+Q+" "+se+" "+Se+" "+ne+" "+ce+" "+le+" "+oe+" "+N,Be="mp0t_ji "+le+" "+ce+" "+ne+" mqu1_1j "+G+" mgn2_16 mgn2_17_s mryx_24 "+N,He=B+" "+V+" "+Te,Ze=Y+" "+ze+" _9fb16_QWgJF",Fe="mdwt_56 "+ke+" "+je+" mj7u_0 "+Me+" "+Ce+" "+he,Ve=ne+" "+ce+" "+ie+" "+le+" "+fe+" "+be+" "+ye+" "+$e,Qe=ge+" "+we+" "+_e+" "+ve+" "+B+" "+z+" mnyp_co "+k+" _9fb16_520ST",Je="mpof_92 m7f5_5x m389_5x "+Te+" "+ze+" "+qe,Ke=C+" "+x+" "+O+" "+A+" "+De,Ge=C+" "+x+" "+O+" "+A+" "+De+" m0s5_np",Xe=ke+" "+je+" "+Me+" "+Ce+" "+Ue,Ye="_9fb16_-hh4g",et=Z+" "+J+" "+Q+" "+se+" "+U+" "+Se+" "+ne+" "+ce+" "+ie+" "+le+" "+Ie+" "+he+" "+Oe+" "+Ye,tt="m7f5_sf "+B+" "+Te+" _9fb16_Vuxlk",at=Q+" "+Se+" "+K+" "+re+" "+N+" "+ne+" "+ce+" "+ie+" "+le+" "+Ie,st=Oe+" "+Q+" "+Se+" "+K+" "+re+" "+N+" "+ne+" "+ce+" "+ie+" "+le+" "+Ie+" "+Z+" "+he,rt=G,nt=Te+" "+xe+" "+z+" m911_co "+k+" "+P+" "+I+" "+E,ot=J+" "+Q+" "+X+" "+ze+" "+ee+" "+ae+" "+Ae+" "+Se+" "+ne+" "+ce+" "+ie+" "+le+" "+L+" "+E+" "+P+" "+I+" "+j+" "+M+" "+q+" "+S+" "+te+" "+Ie+" "+W+" "+he+" "+$+" "+R+" "+ve+" "+we+" "+fe+" "+ye+" "+pe+" "+me+" "+de+" "+ue+" "+Ne+" "+T+" "+xe+" "+qe+" "+H+" "+Pe+" mgmw_u5g "+w+" "+b+" "+Ee+" "+Le+" b1g6n "+Te+" _9fb16_IF3Ly",it=xe+" mg9e_24 mj7a_24 "+ve+" "+we+" "+Te+" "+F,lt=J+" "+Q+" "+X+" "+ze+" "+ee+" "+ae+" "+Se+" "+ce+" "+le+" "+L+" "+E+" "+P+" "+I+" "+j+" "+M+" "+q+" "+S+" "+te+" "+Ie+" "+W+" "+he+" "+$+" "+ve+" "+we+" "+fe+" "+ye+" "+pe+" "+me+" "+de+" "+ue+" "+Ne+" "+T+" "+xe+" "+qe+" "+H+" "+Pe+" mgmw_yu msts_er "+w+" "+b+" "+Ee+" "+Le+" b1lr0 "+Te+" mp4t_16 "+oe+" "+Ae,ct=J+" "+Q+" "+U+" "+se+" "+qe+" "+Se+" "+W+" lsaqd "+fe+" "+be+" "+ye+" "+$e+" "+L+" "+E+" "+P+" "+I+" "+Ie+" "+$+" "+R+" l17jr",mt="mupj_mm mse2_24 "+T+" _9fb16_luVI-",ut="msts_my "+D,dt=ee+" "+T+" "+he+" "+Ie+" mhd5_0m i1vy1 m0s5_9u "+fe+" "+be+" "+ye+" "+$e+" "+De,pt=ke+" "+je+" "+Me+" "+Ce+" "+Ue,ht=J+" "+Q+" "+se+" "+Se+" "+ne+" "+ce+" "+ie+" "+le+" "+D+" "+G+" "+Ye,gt=Oe+" "+Z+" "+ne+" "+ce+" "+ie+" "+le+" "+he+" "+Q+" "+Se+" "+K+" "+re+" "+Ie+" "+D,ft=(e,...t)=>e.replace(/{(\d+)}/g,((e,a)=>void 0!==t[a]?t[a]:e));let _t,yt,vt,$t,wt,bt,kt,zt,jt,Ct,Mt,xt=e=>e;const qt=a.n(c)()(null,v.split("-")[0]);function Ot(e,{loginBaseUrl:t,signUpBaseUrl:a}){const s=ft(t,encodeURIComponent(e.location.toString())),r=ft(a,encodeURIComponent(e.location.toString()));return l(_t||(_t=xt`<div class="${0}"><p class="${0}">${0}</p><p class="${0}">${0}</p><p class="${0}">${0}</p><a href="${0}" class="${0}" rel="nofollow" data-role="login-button" data-analytics-clickable data-analytics-click-label="loginClick">${0}</a><p class="${0}">${0}&nbsp;<a href="${0}" class="${0}" data-role="signup-link" data-analytics-clickable data-analytics-click-label="signupClick">${0}</a></p></div>`),it,Be,y("communication in one place"),We,y("The Message Center combines the advantages of messenger, chat and e-mail capabilities."),We,y("Log in to have your questions about offers and e-mails sent via Allegro in one place."),s,lt,y("log in"),We,y("Don't have an account?"),r,ct,y("sign up"))}function St({svg:e,className:t="",alt:a="",width:s="32px",height:r="32px",role:n=""}){return l(yt||(yt=xt`<img class="${0}" src="${0}" alt="${0}" width="${0}" height="${0}" data-role="${0}" />`),t,e,a,s,r,n)}const At="inViewport";class Lt{constructor(e,t,a,s,r){this.onOpen=()=>{this.root.removeEventListener(At,this.onOpen,!1),this.api.getThreads().then(this.onResponse).catch(this.onError)},this.onResponse=({data:e})=>{this.services&&this.services.get("opbox-notification-service").then((e=>e.reset("messageCenter")));const{displayMessageCenterSurvey:t}=this.parameters,a=(e=>{const t=Object.assign({},e);return t.threads=t.threads.filter((({lastMessage:e})=>!!e)),t})(e);0===a.threads.length?this.setContent((({messageCenterBasePath:e,askSellerQuestionArticleUrl:t})=>{const a=y("Here you will find your"),s=y("questions about offers");let r=y(", as well as e-mails sent via Allegro.");return r.startsWith(",")||(r=i("&nbsp;"+r)),l(Ct||(Ct=xt`<div class="${0}"><div class="${0}"><p class="${0}" data-role="no-messages-info-0">${0}</p><p class="${0}" data-role="no-messages-info-1">${0}</p><p class="${0}" data-role="no-messages-info-2">${0}&nbsp;<a href="${0}" class="${0}">${0}</a>${0}</p></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),He,Re,Be,y("you have no message"),We,y("The Message Center is a place for communication between buyers and sellers."),We,a,t,ct,s,r,nt,ot,e,y("open message center"))})(this.parameters)):(this.setContent((({threads:e},{messageCenterBasePath:t,displayMessageCenterSurvey:a,messageCenterSurveyLink:s})=>{const r=((e,t,a,s)=>{const r=a?(e=>{const t=St({svg:"https://a.allegroimg.com/original/346a4f/76dd2e494bc6a3bcd5a5fc12e8f9/information-common-megaphone-eae597d78a",className:dt});return l(kt||(kt=xt`<li class="${0} ${0}"><a href="${0}" class="${0}" data-role="survey-link" data-analytics-clickable data-analytics-click-label="surveyClick" data-analytics-click-value="1">${0}<span class="${0}"><span class="${0}">${0}</span><span class="${0}">${0}</span></span></a></li>`),Qe,ut,e,Je,t,pt,ht,y("Do you have a moment?"),gt,y("Help us improve the Message Center"))})(s):"",n=e.filter((e=>null!==e.interlocutor)).map(((e,a)=>((e,t,a)=>{const{lastMessage:s}=e,r=s&&!s.author.isInterlocutor,n=e.lastMessage?e.lastMessage.text:l(wt||(wt=xt`&nbsp;`)),o=r?St({svg:"https://a.allegroimg.com/original/34c538/ecf328a245f8b6c9114bada3bfcb/action-common-arrow-u-turn-e8803ac7ff",role:"arrow-icon",className:mt}):"";return l(bt||(bt=xt`<li class="${0}"><a href="${0}/thread/${0}" class="${0}" data-role="show-single-button" data-analytics-clickable data-analytics-click-label="threadClick" data-analytics-click-value="click-thread-${0}">${0}<span class="${0}"><span class="${0} ${0}">${0}${0}</span><span class="${0}">${0}<span class="${0}">${0}</span></span></span></a></li>`),Qe,t,e.id,Je,a,(e=>"!allegro:warehouse"===e.interlocutor.id?St({svg:"https://a.allegroimg.com/original/34287f/d9461ee1423fa392e69226edb2d5/action-common-parcel-with-pin-8d25c86cbf",className:Ge,role:"allegro-warehouse-avatar"}):l(vt||(vt=xt`<img class="${0}" data-role="avatar" src="${0}" alt=""/>`),Ke,e.interlocutor.avatarUrl.replace("original","s128b")))(e),Xe,et,!1===e.read?rt:"",o,n,tt,(e=>{let t="z";const{lastMessage:a}=e;return a&&(t=a.author.isInterlocutor?y("from"):y("to")),l($t||($t=xt`<span class="${0}">${0} ${0}</span>`),st,t,e.interlocutor.login)})(e),at,qt(new Date(e.lastMessageDateTime)))})(e,t,a)));return l(zt||(zt=xt`<ul class="${0}" data-role="threads-list">${0}${0}</ul>`),Ve,r,n.map((e=>i(e))))})(e,t,a,s);return l(jt||(jt=xt`<div class="${0}"><div class="${0}"><div class="${0}">${0}</div></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),He,Ze,Fe,r,nt,ot,t,y("show all"))})(a,this.parameters)),t&&this.addMessageCenterSurveyClickEventListener())},this.onError=({status:e})=>{const t=401===e?Ot(this.window,this.parameters):(({messageCenterBasePath:e})=>l(Mt||(Mt=xt`<div class="${0}"><div class="${0}"><p class="${0}">${0}</p><p class="${0}" data-role="error-info" data-analytics-enabled data-item data-analytics-view-label="inboxErrorShow">${0}</p></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),He,Re,Be,y("something went wrong..."),We,y("unfortunately we could not view your messages."),nt,ot,e,y("open message center")))(this.parameters);this.setContent(t)},this.setContent=e=>{this.content.innerHTML=e},this.addMessageCenterSurveyClickEventListener=()=>{this.content.querySelector('[data-role="survey-link"]').addEventListener("click",this.onMessageCenterSurveyClick,!1)},this.onMessageCenterSurveyClick=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href");this.setMessageCenterSurveyPreferenceAndChangeLocation(t)},this.setMessageCenterSurveyPreferenceAndChangeLocation=e=>{this.window.opbox.preferences.set("displayMessageCenterSurvey",!1).then((()=>{this.window.location=e})).catch((()=>{this.window.location=e}))},this.window=e,this.services=r,this.api=t,this.root=a,this.content=a.querySelector("#mc-header-component"),this.parameters=s}initialize(){const{isAuthenticated:e,isPageCached:t}=this.parameters,a=null!==(e=>{const t=document.cookie.split(/;\s*/);for(let a=t.length-1;a>=0;a-=1){const[e,s]=t[a].split("=").map((e=>decodeURIComponent(e)));if("userIdentity"===e)return s}return null})();e||t&&a?this.root.addEventListener(At,this.onOpen,!1):this.setContent(Ot(this.window,this.parameters))}}window.opbox.component.register({prototypeName:"allegro.messageCenter.header"},class{constructor({baseNode:e,props:t,services:a}){this.baseNode=e,this.props=t,this.services=a}onMount(){this.messageCenterInbox=new Lt(window,new t(window),this.baseNode,this.props.parameters,this.services),this.messageCenterInbox.initialize()}})})();
//# sourceMappingURL=index.es6-pl-PL_76434e95.js.map