var t={d(e,a){for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o(t,e){return{}.hasOwnProperty.call(t,e)}},e={};t.d(e,{a:()=>ir});let a="pl-PL";const r={"pl-PL":{CART_LABEL:[["",["Koszyk"]]],CART_ITEMS_LABEL:[["",["Koszyk ({{count}} przedmiot)","Koszyk ({{count}} przedmioty)","Koszyk ({{count}} przedmiotów)"]]],CART_TOTAL_VALUE:[["",["wartość koszyka"]]],YOUR_CART:[["",["Twój koszyk"]]],SELLER_TOTAL_ITEMS:[["",["{{count}} przedmiot od {{seller}}","{{count}} przedmioty od {{seller}}","{{count}} przedmiotów od {{seller}}"]]],BUNDLE:[["",["zestaw"]]],PER_PIECE:[["",["za sztukę {{amount}}"]]],DELIVERY_GRANTED_SMART:[["",["Masz darmową dostawę Smart! od tego sprzedającego!"]]],DELIVERY_GRANTED_FREE_FROM:[["",["Masz darmową dostawę od tego sprzedającego!"]]],DELIVERY_HINT_SMART_LABEL:[["",["Do darmowej dostawy Smart!"]]],DELIVERY_HINT_FREE_FROM_LABEL:[["",["Do darmowej dostawy od tego sprzedającego:"]]],DELIVERY_MISSING_AMOUNT:[["",["brakuje {{amount}}"]]],DELIVERY_GRANTED_SMART_SHORT:[["",["Masz darmową dostawę Smart!"]]],DELIVERY_HINT_SMART_LABEL_SHORT:[["",["Do darmowej dostawy Smart!"]]],DELIVERY_HINT_FREE_FROM_LABEL_SHORT:[["",["Do darmowej dostawy od tego sprzedającego"]]],DELIVERY_FREE_FROM_BASKET_VALUE:[["",["przy zakupach od {{amount}} łącznie od"]]],DELIVERY_FREE_FROM_BASKET_VALUE_BADGE:[["",["wielu sprzedających"]]],TOTAL_VALUE:[["",["razem"]]],MORE_FROM_SELLER:[["",["dodaj coś jeszcze od tego sprzedającego"]]],EMPTY_CART_HEADER:[["",["Twój koszyk jest pusty"]]],EMPTY_CART_LABEL:[["",["Koszyk jest pusty"]]],EMPTY_CART_PARA_1:[["",["Dodaj do koszyka przedmioty i kup je szybko i wygodnie."]]],EMPTY_CART_PARA_2:[["",["Przez koszyk możesz kupić za jednym razem do 50 przedmiotów od różnych sprzedawców."]]],GO_TO_CART:[["",["pokaż koszyk"]]],GO_TO_CHECKOUT:[["",["do kasy"]]],FROM:[["",["z"]]],ALLEGRO_WAREHOUSE:[["",["Magazynu Allegro"]]],MORE_FROM_ALLEGRO_WAREHOUSE:[["",["Dodaj coś jeszcze z Magazynu Allegro"]]]}},s=/({{[^}]+}}|{%[^%}]+%})/g,i=/({{[^}]+}})/g,n=/({%[^%}]+%})/g,o=/({{\s*|\s*}}|{%\s*|\s*%})/g,l={"pl-PL":t=>1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2};function c(t,e=""){if("string"==typeof t)throw Error("Translation has to be an array");return t.find((t=>t[0]===e))[1]}const d=(t,e,d)=>{const m=r[a][t];if(!m)throw Error(`Missing translation for lang "${a}" and key "${t}"`);return e?((t,e,r)=>{let d=c(t,e.context);return parseInt(e.count,10)>=0?d=((t,e)=>{const r=l[a](e);return"boolean"!=typeof r?t[r]:t[r?1:0]})(d,e.count):[d]=d,((t,e,a)=>{if(a){let a=0;return t.split(s).map((r=>{if(r.match(n)){const s=e.formatters[a];if(s)return a+=1,s(r.replace(o,""));throw Error(`Missing translation formatter for "${t}"`)}return r.match(i)?e[r.replace(o,"")]:r}))}const r=t.match(s);let l=0;return r?r.reduce(((a,r)=>{const s=r.replace(o,"");if(r.match(n)){const i=e.formatters[l];if(i)return l+=1,a.replace(r,i(s));throw Error(`Missing translation formatter for "${t}"`)}return r.match(i)?a.replace(r,e[s]):a}),t):t})(d,e,r)})(m,e,d):c(m)[0]},m=a,u="m0qj_5r",_="mrmn_qo",h="mrhf_u8",p="mlkp_ag",E="mx7m_1",v="msbw_rf",g="mldj_rf",f="mtag_rf",y="mm2b_rf",T="m911_5r",R="mefy_5r",L="mnyp_5r",$="mdwl_5r",A="mjyo_6x",w="mgmw_3z",S="mgmw_wo",b="mgmw_qw",C="mgmw_rd",O="mgmw_06",I="msts_pt",M="msts_n7",k="mgmw_u5g",z="mqen_m6",N="mpof_ki",P="mpof_z0",D="m389_6m",q="m7f5_6m",j="mp0t_ji",H="mp0t_0a",U="mgn2_21",F="mgn2_16",V="mgn2_14",x="mgn2_13",Y="mgn2_12",B="m9qz_yq",G="m9qz_yo",W="m9qz_yp",K="m09p_40",Q="mqvr_2",X="mqu1_1j",J="mqu1_21",Z="mqu1_16",tt="mqu1_1",et="mp4t_16",at="mp4t_0",rt="mryx_0",st="munh_56",it="munh_0",nt="m3h2_4",ot="m3h2_56",lt="m3h2_0",ct="m2ha_2",dt="mjt1_n2",mt="m8qd_vz",ut="mjir_sv",_t="meqh_en",ht="mg9e_16",pt="mg9e_8",Et="mj7a_16",vt="mj7a_8",gt="mh36_16",ft="mvrt_16",yt="mp7g_oh",Tt="mzmg_f9",Rt="mzmg_6m",Lt="mj9z_5r",$t="mli8_k4",At="mtsp_ib",wt="m0ux_fp",St="m31c_kb",bt="msa3_z4",Ct="m7er_k4",Ot="mgn2_25_s",It="mgn2_17_s",Mt="l1qs9",kt="limod",zt="mpof_5r",Nt=P,Pt={get(){return window.opbox.edge.get("/cart",{headers:{Accept:"application/vnd.allegro.internal.v1+json"},withCredentials:!0})},getPreview(){return window.opbox.edge.get("/carts?decorators=CART,BENEFITS",{headers:{Accept:"application/vnd.allegro.public.v6+json"},withCredentials:!0})}},Dt={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},qt=/<|>|&|"|'/g,jt=(RegExp(Array.from("javascript:",(t=>t+"[\\n\\r\\t]*")).join(""),"ig"),t=>Dt[t]);class Ht{constructor(t,e){this.$=t[0];for(let a=0;a<e.length;a++){const r=e[a];if(Array.isArray(r))for(let t=0;t<r.length;t++)this.$esc(r[t]);else this.$esc(r);this.$+=t[a+1]}}$esc(t){this.$+=t instanceof Ht?t.$:(t+"").replace(qt,jt)}toString(){return this.$}}const Ut=(t,...e)=>new Ht(t,e);function Ft(t){var e,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=Ft(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}const Vt=function(){for(var t,e,a=0,r="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=Ft(t))&&(r&&(r+=" "),r+=e);return r},xt=j+" "+Y+" mgmw_9u msbw_sk mldj_sk mtag_sk mm2b_sk "+bt+" mg9e_2 mj7a_2 mvrt_4 mh36_4 mpof_vs bd1d4f",Yt="msts_d2",Bt="_5537a_DTA0-";let Gt,Wt=t=>t;function Kt(t,e){const a=Vt(xt,{[Yt]:"free-delivery"===e,[Bt]:"smart"===e});return Ut(Gt||(Gt=Wt`<span class="${0}" data-role="badge">${0}</span>`),a,t)}const Qt=et+" "+N+" "+V+" "+H+" "+S+" "+J+" "+Lt+" "+$t+" "+z+" "+Mt+" l1jot",Xt="mj6k_yx",Jt=N+" mwdn_1 "+q+" "+D+" _5537a_7dR11",Zt=N+" "+q+" "+D+" _5537a_qDYKU",te=O+" "+x+" "+Z+" "+At+" "+Ct,ee=et+" mr3m_1 _5537a_BcO3o",ae=N+" _5537a_HMK3u",re=H+" "+S+" "+$t+" "+Y+" "+Z+" m3h2_8 "+Tt+" _5537a_N4TkI",se=H+" "+S+" "+$t+" "+Y+" "+Z+" _5537a_d6Ww3",ie=Tt+" "+et;let ne,oe,le,ce,de=t=>t;function me({offers:t,originalPrice:e,price:a,unitPrice:r,selected:s,available:i,quantity:n}){const o=!s||!i.status,l=t.length>1,[{url:c}]=t,m=Vt(Qt,{[Xt]:o}),u=l?Zt:"",_={price:a,originalPrice:e,type:"secondary",unitPrice:n.selected>1?r:null};return Ut(ne||(ne=de`<a href="${0}" class="${0}" data-analytics-clickable data-analytics-click-label="item" data-analytics-click-value="${0}"><div class="${0}">${0} ${0}</div><div class="${0}">${0}</div><div class="${0}">${0}</div></a>`),c,m,t[0].name,Jt,l?Ut(oe||(oe=de`<span class="${0}">${0}</span>`),te,d("BUNDLE")):"",t.map((({name:t,photo:e})=>Ut(le||(le=de`<div class="${0}">${0}</div>`),u,((t,e,a="small")=>{var r;const s=Vt(ue,{[_e]:"small"===a,[he]:"extra-small"===a});if(null!=t&&null!=(r=t.small)&&r.url){const r="small"===a?t.small.url:t.extraSmall.url;return Ut(ve||(ve=fe`<div class="${0}"><div class="${0}"><img src="${0}" alt="${0}" class="${0}" /></div></div>`),s,pe,r,e,Ee)}return Ut(ge||(ge=fe`<div class="${0}"><div class="${0}"><img class="m-placeholder m-placeholder--small" src="${0}" alt="${0}" /></div></div>`),s,pe,ye,e)})(e,t,l?"extra-small":"small")))),ee,t.map((t=>Ut(ce||(ce=de`<div class="${0}"><div class="${0}">${0} ×</div><div class="${0}">${0}</div></div>`),ae,re,t.requiredQuantity*n.selected,se,t.name))),ie,ze(_))}const ue=N+" "+q+" "+D,_e="_5537a_XySKL",he="_5537a_57Bfa",pe=Ct+" "+st+" "+ot,Ee="m7er_56 mse2_56 "+P+" "+st+" "+ot+" _5537a_qayBO";let ve,ge,fe=t=>t;const ye=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/metrum-placeholder/placeholder-405f0677c6.svg"}').a,Te=$t+" "+bt+" "+tt+" "+j+" "+G+" "+b+" mgn2_27 mgn2_30_s",Re=$t+" "+bt+" "+tt+" "+j+" "+G+" "+b+" "+U+" "+Ot,Le="mgn2_19 mgn2_21_s "+B,$e=F+" "+It+" "+B,Ae=w+" mj9z_f1 pr1vfm "+bt,we=H+" "+Y+" "+Z+" "+$t+" "+w+" mp4t_4 "+rt+" "+bt;let Se,be,Ce,Oe,Ie=t=>t;const Me=["CZK"];function ke(t){return t.filter((t=>!["decimal","fraction"].includes(t.type)))}function ze({price:{amount:t,currency:e},type:a="primary",originalPrice:r,unitPrice:s}){const i=((t,e,a,r)=>{const s=new Intl.NumberFormat(m,{style:"currency",currency:e});let i=s.formatToParts(t),n=a?s.formatToParts(a.amount):[],o=r?s.formatToParts(r.amount):[];return Me.includes(e)&&(i=ke(i),n=ke(n),o=ke(o)),{mainPriceParts:i,originalPriceParts:n,unitPriceParts:o}})(t,e,r,s),n="secondary"===a?Re:Te,o="secondary"===a?$e:Le,l=r?Ut(Se||(Se=Ie`<s class="${0}">${0}</s>`),Ae,i.originalPriceParts.map((t=>t.value)).join("")):"",c=s?Ut(be||(be=Ie`<div class="${0}">${0}</div>`),we,d("PER_PIECE",{amount:i.unitPriceParts.map((t=>t.value)).join("")})):"";return Ut(Ce||(Ce=Ie` ${0}<div class="${0}">${0}</div>${0} `),((t,e)=>!!t&&parseFloat(t.amount)>parseFloat(e))(r,t)?l:"",n,i.mainPriceParts.map(((t,e,a)=>{const r=((t,e,a)=>"fraction"===t.type||"currency"===t.type&&e.length===a+1)(t,a,e)?o:"";return Ut(Oe||(Oe=Ie`<span class="${0}">${0}</span>`),r,t.value)})),c)}const Ne=N+" m389_a6 "+st,Pe=H+" "+$t+" "+x+" "+Z+" "+At+" "+O,De=st+" munh_8_s";let qe,je=t=>t;function He(t,e,a="primary"){return Ut(qe||(qe=je`<div class="${0}"><span class="${0}">${0}</span><div class="${0}">${0}</div></div>`),Ne,Pe,t,De,ze({price:e,type:a}))}const Ue="https://a.allegroimg.com/original/343b4d/ed3f5c04412ab7bd70dd0a34f0cd/brand-subbrand-smart-d8bfa93f10",Fe="https://a.allegroimg.com/original/34611c/c433ab0c4bf9a76e4f1f15b5dd1f/dark-brand-subbrand-smart-2ecf1fa38c",Ve=N+" "+et+" "+D,xe=P+" "+nt+" _5537a_R0-Br",Ye=H+" "+S+" "+$t+" "+Y+" "+Z+" "+nt;let Be,Ge,We,Ke=t=>t;function Qe(t,e,a){return Ut(We||(We=Ke`<div class="${0}">${0}<span class="${0}">${0}</span>${0}</div>`),Ve,(t=>{const e=Ut(Be||(Be=Ke`<img src="${0}" class="${0}" alt="SMART" />`),Ue,xe);return t?Ut(Ge||(Ge=Ke`<picture><source media="(prefers-color-scheme: dark)" srcset="${0}" />${0}</picture>`),Fe,e):e})(a),Ye,t,e?Kt(e,"smart"):"")}let Xe,Je=t=>t;function Ze(t){const e=d(t?"DELIVERY_HINT_FREE_FROM_LABEL":"DELIVERY_GRANTED_FREE_FROM");return Ut(Xe||(Xe=Je`<div class="${0}"><span class="${0}">${0}</span>${0}</div>`),Ve,Ye,e,t?Kt(t,"free-delivery"):"")}let ta,ea,aa=(t=>(t.FREE_DELIVERY_FROM_SELLER="FREE_DELIVERY_FROM_SELLER",t.DELIVERY_FREEBOX="DELIVERY_FREEBOX",t.DISCOUNT_COUPON="DISCOUNT_COUPON",t.DELIVERY_FREEBOX_NO_SUBSCRIPTION="DELIVERY_FREEBOX_NO_SUBSCRIPTION",t))({}),ra=t=>t;function sa(t,e,a=!1){if(!t.length)return Ut(ea||(ea=ra``));const r=t[0],{targetAmount:s,missingAmount:i}=(t=>{if(!t.current||!t.target)return{targetAmount:"",missingAmount:""};const{currency:e}=t.current,a=new Intl.NumberFormat(m,{style:"currency",currency:e});return{targetAmount:a.format(parseFloat(t.target.amount)),missingAmount:a.format(parseFloat(t.target.amount)-parseFloat(t.current.amount))}})(r);return r.type===aa.DELIVERY_FREEBOX?((t,e,a,r,s)=>{if(!t&&r)return Qe(d("DELIVERY_FREE_FROM_BASKET_VALUE",{amount:a}),d("DELIVERY_FREE_FROM_BASKET_VALUE_BADGE"),s);if(t)return Qe(d("DELIVERY_GRANTED_SMART"),null,s);if(!t){const t=d("DELIVERY_MISSING_AMOUNT",{amount:e});return Qe(d("DELIVERY_HINT_SMART_LABEL"),t,s)}return Ut(ta||(ta=ra``))})(r.achieved,i,s,a,e):r.type===aa.FREE_DELIVERY_FROM_SELLER?(n=i,r.achieved?Ze():Ze(d("DELIVERY_MISSING_AMOUNT",{amount:n}))):"";var n}const ia=at+" "+lt+" "+rt+" "+it+" "+H+" "+S+" "+$t+" "+Y+" "+Z,na=V+" "+H+" "+S+" "+J+" "+Lt+" "+$t+" "+z+" "+Mt+" "+kt+" _5537a_PTpDC";let oa,la,ca=t=>t;const da=et+" "+N;let ma,ua=t=>t;function _a(t){return Ut(ma||(ma=ua`<div class="${0}">${0}</div>`),da,He(d("TOTAL_VALUE"),t))}const ha="a883q",pa="bfwvy",Ea="b14a0",va=I+" "+ht+" "+ft+" "+gt+" "+ha+" "+vt,ga=V+" "+H+" "+W+" "+yt+" "+At+" "+$t+" "+lt+" "+rt+" "+it+" "+T+" "+R+" "+L+" "+$+" "+v+" "+g+" "+f+" "+y+" "+Q+" "+z+" "+_t+" "+u+" "+M+" "+gt+" "+ft+" "+pt+" "+vt+" "+ut+" "+ct+" "+mt+" "+dt+" "+K+" "+pa+" "+k+" "+_+" "+h+" "+St+" "+wt+" "+Ea+" "+P+" "+Ct+" "+et+" "+A;let fa,ya=t=>t;function Ta({items:t,price:e,seller:{login:a}},r,s,i,n){const o=e&&t.length>1?_a(e):"";return Ut(fa||(fa=ya`<div class="${0}">${0} ${0} ${0} ${0}<a href="${0}${0}${0}" class="${0}" data-analytics-clickable data-analytics-click-label="more" data-analytics-click-value="${0}">${0}</a></div>`),va,((t,e,a,r)=>Ut(oa||(oa=ca`<p class="${0}">${0}</p>`),ia,d("SELLER_TOTAL_ITEMS",{count:e,seller:Ut(la||(la=ca`<a href="${0}${0}${0}" class="${0}" data-analytics-clickable data-analytics-click-label="meta">${0}</a>`),a,t,r,na,t)},!0)))(a,t.length,i,n),t.map((t=>me(t))),o,sa(r,s),i,a,n,ga,a,d("MORE_FROM_SELLER"))}const Ra=at+" "+lt+" "+rt+" "+it+" "+H+" "+S+" "+$t+" "+Y+" "+Z,La=V+" "+H+" "+S+" "+J+" "+Lt+" "+$t+" "+z+" "+Mt+" "+kt+" _5537a_pofhw";let $a,Aa=t=>t;const wa=I+" "+ht+" "+ft+" "+gt+" "+ha+" "+vt,Sa=V+" "+H+" "+W+" "+yt+" "+At+" "+$t+" "+lt+" "+rt+" "+it+" "+T+" "+R+" "+L+" "+$+" "+v+" "+g+" "+f+" "+y+" "+Q+" "+z+" "+_t+" "+u+" "+M+" "+pt+" "+vt+" "+ut+" "+ct+" "+mt+" "+dt+" "+K+" "+pa+" "+k+" "+_+" "+h+" "+St+" "+wt+" "+Ea+" "+P+" "+Ct+" "+et+" "+A+" mvrt_8 mh36_8 "+Rt;let ba,Ca,Oa,Ia=t=>t,Ma=t=>t;const ka="msub_k4 mdwt_56 "+ht+" "+Et+" _5537a_CGwjQ",za=I+" "+ht+" "+ft+" "+Et+" "+gt+" "+ha+" "+Rt,Na=j+" "+G+" "+it+" "+lt+" "+at+" "+X+" mryx_16_s "+U+" "+Ot+" "+C+" "+rt,Pa=V+" "+H+" "+J+" "+$t+" "+C+" "+et+" "+rt;let Da,qa,ja,Ha=t=>t;const Ua="fulfilment",Fa=E+" m911_co "+p+" "+I+" "+N+" "+D+" m7f5_sf "+gt+" "+ft+" "+vt+" "+pt+" mjyo_lo _5537a_wa3vI",Va=V+" "+H+" "+W+" "+yt+" "+At+" "+$t+" "+at+" "+lt+" "+rt+" "+it+" "+T+" "+R+" "+L+" "+$+" "+v+" "+g+" "+f+" "+y+" "+Q+" "+z+" "+_t+" "+u+" "+gt+" "+ft+" "+pt+" "+vt+" "+ut+" "+ct+" "+mt+" "+dt+" "+K+" "+pa+" mgmw_yu msts_er "+_+" "+h+" "+St+" "+wt+" b14ge _5537a_zt5iW",xa=V+" "+H+" "+W+" "+yt+" "+At+" "+$t+" "+at+" "+lt+" "+rt+" "+it+" "+T+" "+R+" "+L+" "+$+" "+v+" "+g+" "+f+" "+y+" "+Q+" "+z+" "+_t+" "+u+" "+M+" "+gt+" "+ft+" "+pt+" "+vt+" "+ut+" "+ct+" "+mt+" "+dt+" "+K+" "+pa+" "+A+" "+Rt+" "+Lt+" mpof_92 "+D+" "+q+" mupj_5k "+k+" "+_+" "+h+" "+St+" "+wt+" "+Ea;let Ya,Ba,Ga=t=>t;const Wa=I+" "+E+" mnyp_co "+p+" "+pt+" "+vt+" "+gt+" "+ft,Ka=N+" "+D,Qa=j+" "+it+" "+lt+" "+at+" "+X+" "+S+" "+B+" "+F+" "+It+" "+rt;let Xa,Ja,Za=t=>t;const tr="msts_r0 "+lt+" "+rt+" "+it+" mg9e_0 mvrt_0 mj7a_0 mh36_0 mjb5_zr mp7g_f6 mnjl_0 mp4t_8 "+N+" myre_zn _5537a_Ftt-t";let er,ar=t=>t;function rr(t){return null==t?void 0:t.flatMap((t=>t.items)).flatMap((t=>t.offers)).map((t=>({id:t.id,quantity:t.quantity,selected:!0})))}class sr{constructor(t,e,a){var r,s,i;this.RESIZE_DEBOUNCE_TIME=20,this.MOUSE_ENTER_THROTTLE_TIME=1e3,this.WINDOW_MIN_WIDTH=768,this.PREVIEW_CONTENT_MAX_HEIGHT=530,this.MOUSE_LEAVE_TIMEOUT=300,this.ANALYTICS_EVENT_TIMEOUT=1e3,this.handleResize=((t,e,a)=>{a=a||{};var r=null,s=a=>{r=setTimeout((()=>{e.apply(e,a),r=null}),t)},i=function(){r?(clearTimeout(r),s(arguments)):a.leading?(e.apply(e,arguments),r=setTimeout(i.cancel,t)):s(arguments)};return i.cancel=()=>{clearTimeout(r),r=null},i})(this.RESIZE_DEBOUNCE_TIME,(()=>{window.innerWidth>=this.WINDOW_MIN_WIDTH?this.addEventListeners():this.removeEventListeners()})),this.handleMouseEnter=()=>{this.timeout?(clearTimeout(this.timeout),this.timeout=null):this.onMouseEnter()},this.handleMouseLeave=()=>{this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.onMouseLeave()),this.MOUSE_LEAVE_TIMEOUT)},this.onMouseEnter=(r=this.MOUSE_ENTER_THROTTLE_TIME,s=()=>{this.shouldRenderPreview=!0,Pt.getPreview().then((({data:t})=>{this.cartStatus.querySelector('[data-role="cart-preview"]')||this.shouldRenderPreview&&(this.shouldRenderPreview=!1,this.cartStatus.insertAdjacentHTML("beforeend",this.render(t).toString()),this.addPrimaryButtonListener(t),setTimeout((()=>{var e,a,r,s,i;r=this.cartStatus.querySelector('[data-role="cart-preview"]'),s=(null==(e=t.cart)||null==(a=e.groups)?void 0:a.length)||0,i={offers:rr(t.cart.groups)},r&&window.opbox.analytics.sendEvent(r,"boxView",s,i,void 0)}),this.ANALYTICS_EVENT_TIMEOUT),this.updateCartHeader(t),this.setElementHeight())}))},i=!1,(...t)=>{i||(s(...t),i=!0,setTimeout((()=>{i=!1}),r))}),this.onMouseLeave=()=>{this.timeout=null,this.shouldRenderPreview=!1;const t=this.cartStatus.querySelector('[data-role="cart-preview"]');t&&(t.classList.add(..."mj6k_n7 _5537a_EEFgm".split(" ")),t.addEventListener("animationend",this.onAnimationEnd))},this.onAnimationEnd=()=>{const t=this.cartStatus.querySelector('[data-role="cart-preview"]');t.removeEventListener("animationend",this.onAnimationEnd),this.cartStatus.removeChild(t)},this.addPrimaryButtonListener=({cart:{groups:t,id:e}})=>{const{isEnterprise:a,cartUrl:r}=this.props,s=a?"goToCart":"checkout",i=this.cartStatus.querySelector(`[data-role=${s}]`);i&&(a?i.addEventListener("click",(()=>{window.location.assign(r)})):i.addEventListener("click",(()=>{window.opbox.analytics.sendBoxInteractionEvent({contextNode:i,label:"proceedToCheckout",value:i.textContent,customParams:{offers:rr(t)}}),i.setAttribute("disabled","");const a=(t=>t.flatMap((t=>t.items)).filter((t=>t.selected)))(t);((t,e)=>{const{offers:a,bundles:r}=(t=>{const e=[],a=[];return t.forEach((t=>{var r;if(null!=(r=t.rebate)&&r.bundle){const e=t.offers.find((t=>t.primary));a.push({id:t.rebate.id,mainOfferId:e.id,quantity:t.quantity.selected})}else t.offers.forEach((a=>{e.push({id:a.id,quantity:a.requiredQuantity*t.quantity.selected})}))})),{offers:e,bundles:a}})(e);return window.opbox.edge.post("/purchase-entry/cart",{cart:{id:t},metadata:{processEntry:"CART",flags:["MINI_CART"]},offers:a,bundles:r},{responseType:"text",headers:{"Content-Type":"application/vnd.allegro.internal.v1+json",Accept:"text/plain"},withCredentials:!0})})(e,a).then((t=>{window.location.assign(t.data)}))})))},this.props=a,this.cartStatus=t.querySelector('[data-role="opbox-cart-status"]'),this.cartHeader=e,this.shouldRenderPreview=!1,this.eventListenersAdded=!1,this.timeout=null,window.addEventListener("resize",this.handleResize),window.innerWidth>=this.WINDOW_MIN_WIDTH&&this.addEventListeners()}addEventListeners(){this.eventListenersAdded||(this.eventListenersAdded=!0,this.cartStatus.addEventListener("mouseenter",this.handleMouseEnter),this.cartStatus.addEventListener("mouseleave",this.handleMouseLeave))}removeEventListeners(){this.eventListenersAdded&&(this.eventListenersAdded=!1,this.cartStatus.removeEventListener("mouseenter",this.handleMouseEnter),this.cartStatus.removeEventListener("mouseleave",this.handleMouseLeave))}setElementHeight(){HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];const t=this.cartStatus.querySelector('[data-role="cart-preview"]'),e=this.cartStatus.getBoundingClientRect().bottom+24;t.style.maxHeight=`calc(100vh - ${e}px)`;const a=this.cartStatus.querySelector('[data-role="preview-content"]');[...a.children].reduce(((t,e)=>t+e.clientHeight),0)<this.PREVIEW_CONTENT_MAX_HEIGHT&&(a.style.height="auto")}updateCartHeader(t){let e=0;t.cart.groups&&t.cart.groups.forEach((t=>{t.items.forEach((t=>{e+=t.quantity.selected}))})),this.cartHeader.resetCache(),this.cartHeader.updateCartInfo({quantity:e}),this.cartHeader.putToCache({quantity:e})}render({cart:{groups:t,prices:e},benefits:a}){const{isEnterprise:r,isDarkModeSupported:s,cartUrl:i,sellerUrl:n,sellerShopUrl:o,fulfilmentSellerUrl:l}=this.props;return Ut(er||(er=ar`<section class="${0}" data-role="cart-preview" data-box-name="cart-preview" data-analytics-category="allegro.metrumHeader.cartPreview">${0} ${0} ${0}</section>`),tr,(t=>t?Ut(Xa||(Xa=Za`<header class="${0}"><div class="${0}"><h4 class="${0}">${0}</h4>${0}</div></header>`),Wa,Ka,Qa,d("YOUR_CART"),He(d("CART_TOTAL_VALUE"),t.total)):Ut(Ja||(Ja=Za`<header class="${0}"><div class="${0}"><h4 class="${0}">${0}</h4></div></header>`),Wa,Ka,Qa,d("YOUR_CART")))(e),((t,e,a,r,s,i)=>{const n=null==t?void 0:t.filter((t=>t.seller.fulfilment.active));if(null!=n&&n.length){const o=new Map;t.forEach((t=>{!o.has(Ua)&&t.seller.fulfilment.active?o.set(Ua,n):t.seller.fulfilment.active||o.set(t.seller.id,t)}));const l=Array.from(o.values());return Ut(Da||(Da=Ha`<div class="${0}" data-role="preview-content">${0}</div>`),ka,l.map((t=>((t,e,a,r,s,i)=>t.length&&t[0].seller.fulfilment.active?Ut(Ca||(Ca=Ma` ${0} `),((t,e,a,r)=>{const s=t.flatMap((t=>t.items)),i={amount:s.reduce(((t,e)=>t+(e.selected&&e.available.status?Number(e.price.amount):0)),0),currency:s.length?s[0].price.currency:"PLN"};return Ut(ba||(ba=Ia`<div class="${0}">${0} ${0} ${0} ${0}<a href="${0}" class="${0}" data-analytics-clickable data-analytics-click-label="more" data-analytics-click-value="allegroWarehouse">${0}</a></div>`),wa,(n=r,Ut($a||($a=Aa`<p class="${0}">${0}&nbsp;<a href="${0}" class="${0}" data-analytics-clickable data-analytics-click-label="meta">${0}</a></p>`),Ra,d("FROM"),n,La,d("ALLEGRO_WAREHOUSE"))),s.map((t=>me(t))),_a(i),sa(e,a,!0),r,Sa,d("MORE_FROM_ALLEGRO_WAREHOUSE"));var n})(t,Object.values(e),a,i)):Ut(Oa||(Oa=Ma` ${0} `),Ta(t,e,a,r,s)))(t,e.fulfilment?e.fulfilment.benefits:[],a,r,s,i))))}return null!=t&&t.length?Ut(qa||(qa=Ha`<div class="${0}" data-role="preview-content">${0}</div>`),ka,t.map((t=>Ta(t,((t,e)=>{var a;return null!=(a=t.individual)&&a[e]?t.individual[e].benefits:[]})(e,t.seller.id),a,r,s)))):Ut(ja||(ja=Ha`<div class="${0}" data-role="preview-content"><div class="${0}"><h4 class="${0}">${0}</h4><p class="${0}">${0}</p><p class="${0}">${0}</p></div></div>`),ka,za,Na,d("EMPTY_CART_HEADER"),Pa,d("EMPTY_CART_PARA_1"),Pa,d("EMPTY_CART_PARA_2"))})(t,a,s,n,o,l),null!=t&&t.length?((t,e,a)=>{const r=null==t?void 0:t.every((t=>t.items.every((t=>!t.available.status||!t.selected))));return e?Ut(Ya||(Ya=Ga`<footer class="${0}"><button type="button" class="${0}" data-role="goToCart">${0}</button></footer>`),Fa,Va,d("GO_TO_CART")):Ut(Ba||(Ba=Ga`<footer class="${0}"><a href="${0}" class="${0}" data-analytics-clickable>${0}</a><button type="button" class="${0}" data-role="checkout" ${0}>${0}</button></footer>`),Fa,a,xa,d("GO_TO_CART"),Va,r?"disabled":"",d("GO_TO_CHECKOUT"))})(t,r,i):"")}}class ir{constructor({baseNode:t,props:e}){this.quantityChangeListener=t=>{const e=JSON.parse(this.cartHeader.getFromCache()).totalQuantity+t;this.cartHeader.resetCache(),this.cartHeader.updateCartInfo({quantity:e}),this.cartHeader.putToCache({quantity:e})},this.baseNode=t,this.previewComponent=null,this.cartHeader=null,this.props={},e&&(this.props=e),this.props.sellerUrl=this.props.sellerUrl||"/uzytkownik/",this.props.sellerShopUrl=this.props.sellerShopUrl||"/sklep",this.props.fulfilmentSellerUrl=this.props.fulfilmentSellerUrl||"/magazyn-allegro",this.props.cartUrl=this.props.cartUrl||"/koszyk"}onMount(){const t=this.baseNode.querySelector('[data-role="opbox-cart-status"]'),e=this.baseNode.querySelector('[data-role="cart-quantity"]'),a=this.baseNode.querySelector('[data-role="toggle"]'),r=JSON.parse(t.getAttribute("data-cart-configuration")),s=JSON.parse(t.getAttribute("data-selectors")),i=(n=window,{remove(t){n.localStorage.removeItem(t)},set(t,e){n.localStorage.setItem(t,e)},get:t=>n.localStorage.getItem(t),has:t=>null!==n.localStorage.getItem(t),isAvailable(){const t="__localStorageTest__";try{return n.localStorage.setItem(t,t),n.localStorage.getItem(t),n.localStorage.removeItem(t),!0}catch(e){return!1}}});var n;this.cartHeader=function({window:t,cartService:e,cache:a,cartQuantityElement:r,cartStatusElement:s,cartLinkElement:i}){return{init(t,e,a=(()=>{})){return this.options=t,this.initTextCatalog(t.translations),this.loadCartHeaderData(t.cacheTtl,a),!0},initTextCatalog(t){this.textCatalog={getString(e){return t[e]}}},cartUpdateEventListener(){const e=({detail:t})=>{this.resetCache(),this.putToCache(t),this.updateCartInfo(t)};return t.addEventListener("cart-update",e),e},addEmptyClass(){r.classList.add(zt)},removeEmptyClass(){r.classList.remove(zt)},updateCartInfo({quantity:t}={}){let e="",a=d("EMPTY_CART_LABEL");t>0?(e=t,a=d("CART_ITEMS_LABEL",{count:e}),this.removeEmptyClass()):this.addEmptyClass(),r.innerHTML=e.toString(),i.setAttribute("aria-label",a)},showCart(t){s.classList.add(Nt),t()},getFromCache:()=>a.get("cart"),shouldLoadFromApi:t=>null==t,shouldResetCache(t,e){const{isAuthenticated:a=!1,timestamp:r}=JSON.parse(t);return this.options.isAuthenticated!==a||this.isTtlExpired(r,e)},isTtlExpired:(t,e)=>t+e<(new Date).getTime(),resetCache(){a.remove("cart")},putToCache({quantity:t}={}){if(a.isAvailable()){const e=(new Date).getTime(),r=JSON.stringify({isAuthenticated:this.options.isAuthenticated,timestamp:e,totalQuantity:t});a.set("cart",r)}},isCartCached:()=>a.has("cart"),loadFromCache(t){let e=null;return a.isAvailable()&&this.isCartCached()&&(e=this.getFromCache(),this.shouldResetCache(e,t)&&(this.resetCache(),e=null)),e},loadCartHeaderData(t,a){let r=this.loadFromCache(t);this.shouldLoadFromApi(r)?e.get().then((({data:t})=>{this.updateCartInfo({quantity:t.totalQuantity}),this.putToCache({quantity:t.totalQuantity}),this.showCart(a)})).catch((()=>{this.addEmptyClass(),this.putToCache({quantity:0}),this.showCart(a)})):(r=JSON.parse(r),this.updateCartInfo({quantity:r.totalQuantity}),this.showCart(a))}}}({window,cartService:Pt,selectors:s,cache:i,cartStatusElement:t,cartQuantityElement:e,cartLinkElement:a}),this.cartHeader.init(r),window.cartHeader=this.cartHeader,window.opbox.plugin.get("cart").then((t=>t.registerQuantityChangeListener(this.quantityChangeListener))).catch(window.opbox.reportError),this.baseNode.querySelector("[data-preview-enabled]")&&(this.previewComponent=new sr(this.baseNode,this.cartHeader,this.props),window.opbox.performance.markTimeToInteractive())}onUnmount(){this.previewComponent&&this.previewComponent.removeEventListeners(),window.opbox.plugin.get("cart").then((t=>t.unregisterQuantityChangeListener(this.quantityChangeListener))).catch(window.opbox.reportError)}}window.opbox.component.register({prototypeName:"allegro.metrumHeader.cart",clientImplementationVersion:"743"},ir);var nr=e.a;export{nr as OpboxCartStatus};
//# sourceMappingURL=index.es6-pl-PL_88c20e09.js.map