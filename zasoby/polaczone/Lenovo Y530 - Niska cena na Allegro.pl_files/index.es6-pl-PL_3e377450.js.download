function e(e){return e.appliedParameters.map((e=>({key:e.v3.key,value:e.v3.value,filterId:e.filterId,raw:e.raw})))}function t(t){const{label:s}=t.display;return t.display.values.map((t=>({display:{name:s,value:t.name,key:`${s}_${t.name}`},paramsToRemove:e(t)})))}var s="RemoveChip",n="Chip",a="ChipsList";const i=e=>`[data-role="${e}"]`;let r="pl-PL";const l={"pl-PL":{"selected filters":[["",["wybrane filtry"]]],"remove filter":[["",["usuÅ„ filtr {{value}}"]]]}},o=/({{[^}]+}}|{%[^%}]+%})/g,m=/({{[^}]+}})/g,c=/({%[^%}]+%})/g,p=/({{\s*|\s*}}|{%\s*|\s*%})/g,h={"pl-PL":e=>1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2};function d(e,t=""){if("string"==typeof e)throw Error("Translation has to be an array");return e.find((e=>e[0]===t))[1]}const _=(e,t,s)=>{const n=l[r][e];if(!n)throw Error(`Missing translation for lang "${r}" and key "${e}"`);return t?((e,t,s)=>{let n=d(e,t.context);return parseInt(t.count,10)>=0?n=((e,t)=>{const s=h[r](t);return"boolean"!=typeof s?e[s]:e[s?1:0]})(n,t.count):[n]=n,((e,t,s)=>{if(s){let s=0;return e.split(o).map((n=>{if(n.match(c)){const a=t.formatters[s];if(a)return s+=1,a(n.replace(p,""));throw Error(`Missing translation formatter for "${e}"`)}return n.match(m)?t[n.replace(p,"")]:n}))}const n=e.match(o);let a=0;return n?n.reduce(((s,n)=>{const i=n.replace(p,"");if(n.match(c)){const r=t.formatters[a];if(r)return a+=1,s.replace(n,r(i));throw Error(`Missing translation formatter for "${e}"`)}return n.match(m)?s.replace(n,t[i]):s}),e):e})(n,t,s)})(n,t,s):d(n)[0]};function u(...e){let t="";for(const s of e)"string"==typeof s&&(t+=s+" ");return t.trim()}const v={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},f=/[<>&"']/g,b=e=>v[e],y=e=>{const t=e+"";return f.test(t)?t.replace(f,b):t},g=(e,t)=>e.map(t).join(""),w="mpof_ki",k="mzaq_5r",$="mp0t_0a",C="mgn2_14",L="mse2_40",j="mqu1_40",q="meqh_en",x="mj7a_0",M="mp7g_oh",N="mli8_k4",P="msa3_z4",E=$+" mqu1_21 mgmw_wo "+N+" "+M+" "+w+" m389_6m m7f5_sf m3h2_8 mryx_8 "+C+" mjru_k4",R=M+" mlmm_5r cp1cvo",O=k+" mli2_1_l",S="mjyo_6x "+L+" "+q+" "+P+" m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 mhd5_0m ivrkk",I=P+" "+q+" mt1t_6n mh36_8 m6ax_n4 cp1qqh",T=C+" "+$+" m9qz_yp "+M+" "+L+" "+j+" mtsp_ib "+N+" mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 "+P+" mqen_m6 "+q+" m0qj_5r msts_n7 mg9e_0 "+x+" mjir_sv m2ha_2 m8qd_qh mjt1_n2 btfbp mgmw_u5g mrmn_qo mrhf_u8 m31c_kb m0ux_fp brp1o "+k+" mjb5_1 mh36_0 mvrt_0 cprj50",z="mvrt_8 "+j;function A(e){const{chipData:t,isClickable:a,chipsSwipe:i}=e,{key:r}=t.display,l=u(E,i&&O);return`\n    <div role="listitem" data-role="${n}" data-key="${y(r)}" class="${l}">\n      ${a?(({display:e})=>{const t=`${e.name||""} ${y(e.value)}`,n=_("remove filter",{value:t});return`\n    <button\n      type="button"\n      aria-label="${n}"\n      title="${n}"\n      data-role="${s}"\n      data-key="${y(e.key)}"\n      class="${T}"\n    >\n      <img src="https://a.allegroimg.com/original/34f3f5/bf439aab49d0a78bcd7501d51697/action-common-x-6c70096572.svg" alt="" width="40" height="40" class="${S}">\n    </button>`})(t):""}\n      <div class="${u(I,!a&&z)}">\n        ${(({display:{name:e,value:t}})=>e?`<span class="mgmw_3z">${e+": "}</span>${y(t)}`:y(t))(t)}\n      </div>\n    </div>`}const H=w,D=q,U="msts_pt mg9e_16 mvrt_16 mh36_16 mg9e_24_l mvrt_24_l mj7a_24_l mh36_24_l a883q "+q+" "+x;window.opbox.component.register({prototypeName:"allegro.listing.chips",clientImplementationVersion:"9ee"},class{constructor({baseNode:e,props:t}){this.baseNode=void 0,this.props=void 0,this.handleClickOnChips=e=>{Promise.resolve(e.target).then((e=>{const t=e.closest(i(s));if(null==t)return;const a=t.dataset.key,r=t.closest(i(n)),[l,o]=((e,t)=>e.reduce(((e,s)=>(s.display.key!==t?e[0].push(s):e[1]=s,e)),[[],null]))(this.props.chipsList,a);this.props=Object.assign(Object.assign({},this.props),{},{chipsList:l}),null!=r&&null!=o&&((e=>{e.classList.add(...R.split(" "))})(r),((e,t)=>{if(e){const s=window.location.href,n=(e=>{const{name:t,value:s}=e.display;return{labelKey:t,labelValue:s,removedParameters:(n=e.paramsToRemove,n.map((e=>{const{key:t,value:s,filterId:n,raw:a}=e;return{key:t,value:s,filterId:n,inputId:a.id,inputValue:a.value}})))};var n})(t);window.opbox.analytics.sendBoxInteractionEvent({contextNode:e,label:"removedChosenFilter",value:"",customParams:Object.assign({url:s},n)})}})(r,o),window.opbox.changeParams((e=>{const t=new URL(window.location.href),s={};return e.forEach((e=>{const n=e.key,a=t.searchParams.getAll(n).filter((t=>t!==e.value));t.searchParams.delete(n),a.forEach((e=>t.searchParams.append(n,e))),s[n]={name:n,value:a}})),Object.values(s)})(o.paramsToRemove)))}))},this.handleAnimatedChipRemoval=e=>{Promise.resolve(e.target).then((e=>{const t=e.parentNode;null==t||t.removeChild(e),0===(null==t?void 0:t.childElementCount)&&(this.baseNode.innerHTML="")}))},this.baseNode=e.querySelector(".opbox-listing-chips"),this.props=t}onMount(){this.baseNode.addEventListener("click",this.handleClickOnChips),this.baseNode.addEventListener("animationend",this.handleAnimatedChipRemoval)}onUnmount(){this.baseNode.removeEventListener("click",this.handleClickOnChips),this.baseNode.removeEventListener("animationend",this.handleAnimatedChipRemoval)}onUpdate(e){Promise.resolve((({parameters:e})=>{return{chipsList:(s=e.selectedFilters.chips,s?s.flatMap(t):[]),isClickable:e.isClickable,isMobile:e.isMobile,presentOnResolution:e.presentOnResolution,withCardStyles:e.withCardStyles};var s})({parameters:e})).then((e=>{this.props=e;const{chipsList:t,isMobile:s,isClickable:n}=e;if(0===t.length)return void(this.baseNode.innerHTML="");const r=this.baseNode.querySelector(i(a));null!=r?r.innerHTML=g(t,(e=>A({isClickable:n,chipsSwipe:s,chipData:e}))):this.baseNode.innerHTML=(e=>{const{chipsList:t,isClickable:s,presentOnResolution:n,withCardStyles:i,isMobile:r}=e;if(0===t.length)return"";return`\n    <div data-role="Main" class="${u(i?U:D,"desktop"===n&&"mpof_5r mpof_z0_x","phone"===n&&"mpof_5r_m")}">\n      ${(e=>{const{chipsList:t,isClickable:s,chipsSwipe:n}=e,i=u(H,n?"mwdn_1_l mj7a_16 mryx_cs mr0s_56 mr0s_bv_l":"mwdn_1");return`\n    <div aria-label="${_("selected filters")}" role="list" data-role="${a}" class="${i}">\n      ${g(t,(e=>A({chipData:e,isClickable:s,chipsSwipe:n})))}\n    </div>`})({chipsList:t,isClickable:s,chipsSwipe:r})}\n    </div>`})(e)}))}});
//# sourceMappingURL=index.es6-pl-PL_3e377450.js.map