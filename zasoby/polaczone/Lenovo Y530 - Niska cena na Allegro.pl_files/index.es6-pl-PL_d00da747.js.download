var e,t,s=[(e,t,s)=>{function a(e,t){let s=t,a=0;for(;a<e.length;){if(null==s)return null;s=s[e[a]],a+=1}return s}s.d(t,{a:()=>a})},e=>{e.exports=self.React},(e,t,s)=>{s.d(t,{a:()=>n,b:()=>r,c:()=>a,d:()=>o,e:()=>i});const a="NUMERIC",r="NUMERIC_SINGLE",n="MULTI",i="TEXT",o="SINGLE"},(e,t,s)=>{s.d(t,{a:()=>r});var a=s(0);function r(e,t,s){const r=(0,a.a)(t,s);return null==r?e:r}},(e,t,s)=>{s.d(t,{a:()=>o,b:()=>c});var a=s(1),r=s.n(a);const n=r().createElement,{createContext:i}=r(),{Provider:o,Consumer:l}=i({}),c=(e,t)=>s=>a=>n(l,null,(({state:r,dispatch:i})=>{const o=Object.assign(Object.assign(Object.assign({},a),e(r)),t(i));return n(s,o)}))},(e,t,s)=>{s.d(t,{a:()=>a,b:()=>l,c:()=>g,d:()=>d,e:()=>o,f:()=>u,g:()=>r,h:()=>c,i:()=>f,j:()=>i,k:()=>n});var a={UPDATE_STATE:"UPDATE_STATE",CLEAR_ALL_FILTERS:"CLEAR_ALL_FILTERS",TOGGLE_SLOT_VISIBILITY:"TOGGLE_SLOT_VISIBILITY",CHANGE_SINGLE_SELECT_FILTER:"CHANGE_SINGLE_SELECT_FILTER",CHANGE_MULTI_SELECT_FILTER:"CHANGE_MULTI_SELECT_FILTER",CLEAR_MULTI_SELECT_FILTER:"CLEAR_MULTI_SELECT_FILTER",CHANGE_TEXT_FILTER:"CHANGE_TEXT_FILTER",CHANGE_RANGE_FILTER:"CHANGE_RANGE_FILTER",CHANGE_NUMERIC_SINGLE_FILTER:"CHANGE_NUMERIC_SINGLE_FILTER",SET_IS_LOADING:"SET_IS_LOADING"};function r(e){return{type:a.CLEAR_ALL_FILTERS,contextNode:e}}function n(e){return Object.assign({type:a.UPDATE_STATE},e)}function i(e){return Object.assign({type:a.TOGGLE_SLOT_VISIBILITY},e)}function o(e){return Object.assign({type:a.CHANGE_SINGLE_SELECT_FILTER},e)}function l(e){return Object.assign({type:a.CHANGE_MULTI_SELECT_FILTER},e)}function c(e){return Object.assign({type:a.CLEAR_MULTI_SELECT_FILTER},e)}function u(e){return Object.assign({type:a.CHANGE_TEXT_FILTER},e)}function d(e){return Object.assign({type:a.CHANGE_RANGE_FILTER},e)}function g(e){return Object.assign({type:a.CHANGE_NUMERIC_SINGLE_FILTER},e)}function f(e){return Object.assign({type:a.SET_IS_LOADING},e)}},(e,t,s)=>{s.d(t,{a:()=>N,b:()=>v,c:()=>L,d:()=>b,e:()=>O,f:()=>y,g:()=>E,h:()=>m,i:()=>I});var a=s(2);function r(e={},t={}){const s=Number("location"===e.id&&"state"===t.key),{filters:r=[]}=e,n=r[s]||{},i=t.name,o={inputId:(t.raw||{id:""}).id,inputValue:(t.raw||{value:""}).value,inputName:i,paramId:n.id,filterId:n.id,filterName:n.name};return n.type===a.c&&(o.inputRangeType="od"===i?"from":"to"),o}var n=s(13),i=s(0),o=s(14);const l=[],c=[],u="954b95b6-43cf-4104-8354-dea4d9b10ddf",d=()=>(0,o.a)()&&window.opbox&&window.opbox.analytics,g={sendItemViewEvent(e){d()&&window.opbox.analytics.sendItemViewEvent(e)},sendBoxInteractionEvent(e){d()&&window.opbox.analytics.sendClickEvent(e)}},f=e=>e.reduce(((e,t)=>(t.suggested&&e.push({categoryAlias:t.categoryAlias,paramId:t.filters[0].id,filterId:t.filters[0].id,filterName:t.name}),e)),[]),p=()=>{const e=(0,o.a)()?window.location.href:"";return{url:e,searchPhrase:new URL(e).searchParams.get("string")||""}};function E(e,t){const s=Object.assign({filtersList:e},p());g.sendItemViewEvent({contextNode:t,customParams:s,label:"showAllFilters",value:""})}function I(e,t){const s=p();Object.assign(s,{categoryAlias:"/"!==e.categoryAlias?e.categoryAlias:"",categoryId:e.categoryId&&e.categoryId!==u?e.categoryId:"",filterIsSelected:!t.isSelected,inputName:t.label.value,inputId:t.input.id,inputValue:t.input.value,filterId:t.filter.id}),g.sendBoxInteractionEvent({contextNode:e.target,label:"filters",value:"top-filter",customParams:s});const a=!t.isSelected;g.sendBoxInteractionEvent({contextNode:e.target,label:`top-filters-${a?"select":"deselect"}-${t.filter.id}`,value:`${t.input.id}-${t.input.value}`})}function m(e,t,s){const a=f(e),r=Object.assign({suggestedFilters:a,suggestedCategoryPath:t},p());r.searchPhrase&&a.length&&g.sendItemViewEvent({contextNode:s,customParams:r,label:"showSuggestedFilters",value:""})}function b(e,t,s,a){if(!(0,o.a)())return;const n=p(),l="/"!==a.categoryAlias?a.categoryAlias:"",c=e.hasOwnProperty("count")?e.count:null,{filterPosition:d,suggested:f=!1}=s,E=e.filterCategoryId||"",I=a.categoryId&&a.categoryId!==u?a.categoryId:"",m=Object.assign({categoryAlias:l,filterPosition:d,suggested:f,resultCount:c,suggestedCategoryId:E,categoryId:I},n);if("multi-select"===t){const t=a&&a.target?a.target.getAttribute("href"):"";Object.assign(m,{filterIsSelected:!e.selected,filterUrl:t||"",suggestedCategoryName:s.categoryName||"",suggestedCategoryAlias:s.categoryAlias||""},r(s,e))}else Object.assign(m,"range"===t?{filterIsSelected:!e.selected,fromRadioSelected:a.fromRadioSelected,wasRadioSelected:a.wasRadioSelected,isRadioRangeMatched:a.isRadioRangeMatched,isLoading:a.isLoading,rangeContext:{from:(0,i.a)(["rangeContext","from"],a),to:(0,i.a)(["rangeContext","to"],a)}}:"radio-range"===t?{filterIsSelected:!e.selected,isLoading:a.isLoading}:{filterIsSelected:!e.selected},r(s,e));g.sendBoxInteractionEvent({contextNode:a.target,label:"radio-range"===t?"suggested-range":"filters",value:t,customParams:m})}function h(e){const t=[];return e.forEach((e=>{e.filters.forEach((e=>{const s=e.filterValues.filter((e=>e.selected));if(s.length>0){const a=Object.assign({},e);a.filterValues=s,t.push(a)}}))})),t}function v(e,t){const s=Object.assign({filters:h(e)},p());g.sendBoxInteractionEvent({contextNode:t,customParams:s,label:"clearAllFilters",value:"clearAllFilters"})}function L(e,t){const s=Object.assign({filters:h([t])},p());g.sendBoxInteractionEvent({contextNode:e,customParams:s,label:"clearFilter",value:"clearFilter"})}function O(e,t,s){g.sendBoxInteractionEvent({contextNode:s,label:e?"show":"hide",value:t.filterName,customParams:t})}function y(e,t){const[s]=e.filters,a=s&&s.id?s.id:"",r=Object.assign({paramId:a,filterId:a},p());g.sendBoxInteractionEvent({contextNode:t,customParams:r,label:"searchInFilter",value:"searchInFilter"})}function N(e,t,s,a){const r=Object.assign(Object.assign({},p()),{},{searchPhrase:s}),i=t.filter((e=>-1!==(0,n.a)(e.name.toLowerCase()).indexOf((0,n.a)(s.toLowerCase()))));e.filters[0]&&(r.filterId=e.filters[0].id||"",r.paramId=r.filterId),((e,t,s)=>{const a=l.indexOf(t.paramId);e.length?-1!==a&&l.splice(a,1):-1===a&&(g.sendBoxInteractionEvent({contextNode:s,customParams:t,label:"emptyFilterList",value:"emptyFilterList"}),l.push(t.paramId))})(i,r,a),((e,t,s)=>{const a=c.indexOf(t.paramId);e.every((e=>0===e.count))&&0!==e.length?-1===a&&(g.sendBoxInteractionEvent({contextNode:s,customParams:t,label:"emptyCountersFilterList",value:"emptyCountersFilterList"}),c.push(t.paramId)):-1!==a&&c.splice(a,1)})(i,r,a)}},(e,t,s)=>{s.d(t,{a:()=>n,b:()=>o,c:()=>i});const a={chips:[]},r="string",n=e=>`${e.key}__${e.value}`;function i(e=a){return e.chips.map((e=>e.display)).flatMap((e=>e.values)).flatMap((e=>e.appliedParameters)).reduce(((e,t)=>(t.v3.key===r||(e[n(t.v3)]=t),e)),{})}function o(e,t){return null!=e[n(t)]}},(e,t,s)=>{s.d(t,{a:()=>i,b:()=>n,c:()=>a,d:()=>r,e:()=>o});var a={EXPANDED:"EXPANDED",NOT_EXPANDED:"NOT_EXPANDED",ONLY_EXPANDED:"ONLY_EXPANDED"},r={ENABLED:"ENABLED",DISABLED:"DISABLED"},n={HIDE:"HIDE",SHOW:"SHOW"},i={HIGHLIGHTED:"HIGHLIGHTED",HIGHLIGHTED_IN_SECOND_STEP:"HIGHLIGHTED_IN_SECOND_STEP"},o={ALLEGRO_PAY:"ALLEGRO_PAY",CHARITY:"CHARITY",COIN:"COIN",COUPONS:"COUPONS",DELIVERY_TODAY:"DELIVERY_TODAY",FREE_RETURN:"FREE_RETURN",FREE_SHIPPING:"FREE_SHIPPING",SMART:"SMART",SUPER_SELLER:"SUPER_SELLER"}},(e,t,s)=>{s.d(t,{a:()=>a});const a={PL:"/kategoria",CZ:"/kategorie",SK:"/kategoria",HU:"/kategoria"}},(e,t,s)=>{s.d(t,{a:()=>a});var a={MULTI:"MULTI",SINGLE:"SINGLE",NUMERIC:"NUMERIC"}},,(e,t,s)=>{function a(e,t){if(null==e)return{};var s,a,r=((e,t)=>{if(null==e)return{};var s,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)s=n[a],t.indexOf(s)>=0||(r[s]=e[s]);return r})(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)s=n[a],t.indexOf(s)>=0||{}.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}s.d(t,{a:()=>a})},(e,t,s)=>{function a(e){return e.split("").map((e=>{const t="ÀÁÂÃÄÅĄàáâãäåąßÒÓÔÕÕÖØŐòóôőõöøĎďDŽdžÈÉÊËĘèéêëęðÇçČčĆćÐÌÍÎÏìíîïÙÚÛÜŰùűúûüĽĹŁľĺłÑŇŃňñńŔŕŠŚšśŤťŸÝÿýŽŻŹžżź".indexOf(e);return-1!==t?"AAAAAAAaaaaaaasOOOOOOOOoooooooDdDZdzEEEEEeeeeeeCcCcCcDIIIIiiiiUUUUUuuuuuLLLlllNNNnnnRrSSssTtYYyyZZZzzz"[t]:e})).join("")}s.d(t,{a:()=>a})},(e,t,s)=>{s.d(t,{a:()=>a});const a=()=>"undefined"!=typeof window},(e,t,s)=>{function a(e){return e.includes("desktop")}s.d(t,{a:()=>a})},(e,t,s)=>{s.d(t,{a:()=>r});var a=s(3);function r(e){return(0,a.a)("",["currentCategoryId"],e)}},(e,t,s)=>{s.d(t,{a:()=>r,b:()=>n,c:()=>a});const a="ONLY_EXPANDED",r="EXPANDED",n="NOT_EXPANDED"}],a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return s[e](n,n.exports,r),n.exports}r.m=s,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,s)=>(r.f[s](e,t),t)),[])),r.u=e=>({64:"highlighted-filters",235:"regular-filters"}[e]+".es6-pl-PL_"+r.h().slice(0,8)+".js"),r.h=()=>"d00da747",r.o=(e,t)=>({}.hasOwnProperty.call(e,t)),e={},t="@allegro/opbox-listing-filters:",r.l=(s,a,n,i)=>{if(e[s])e[s].push(a);else{var o,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+n){o=d;break}}o||(l=!0,(o=document.createElement("script")).type="module",o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+n),o.src=s,0!==o.src.indexOf(window.location.origin+"/")&&(o.crossOrigin="anonymous")),e[s]=[a];var g=(t,a)=>{o.onerror=o.onload=null,clearTimeout(f);var r=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(a))),t)return t(a)},f=setTimeout(g.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=g.bind(null,o.onerror),o.onload=g.bind(null,o.onload),l&&document.head.appendChild(o)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://assets.allegrostatic.com/sc-16079/",(()=>{var e={57:0};r.f.j=(t,s)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else{var n=new Promise(((s,r)=>a=e[t]=[s,r]));s.push(a[2]=n);var i=r.p+r.u(t),o=Error();r.l(i,(s=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",o.name="ChunkLoadError",o.type=n,o.request=i,a[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var a,n,[i,o,l]=s,c=0;if(i.some((t=>0!==e[t]))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);l&&l(r)}for(t&&t(s);c<i.length;c++)n=i[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0},s=self.webpackJsonp_012d7=self.webpackJsonp_012d7||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{var e=r(1),t=r.n(e);const s=self.ReactDOM;var a=r.n(s),n=r(12),i=r(4),o=r(5);const l=["type"];var c=r(6);const u="phoneExpandedFilters",d="dktCollapsedFilters";var g=r(8);function f(){try{return!!window.localStorage&&(window.localStorage.setItem("storage_test","1"),window.localStorage.removeItem("storage_test"),!0)}catch(e){return!1}}const p={available:!1,setItem(e,t){(this.available||f())&&(this.available=!0,window.localStorage.setItem(e,t))},getItem(e){return this.available||f()?(this.available=!0,window.localStorage.getItem(e)):null}};var E=r(15),I=r(3);function m(e){switch(e){case g.c.ONLY_EXPANDED:return g.c.ONLY_EXPANDED;case g.c.EXPANDED:return g.c.NOT_EXPANDED;case g.c.NOT_EXPANDED:return g.c.EXPANDED;default:return g.c.NOT_EXPANDED}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e=>typeof e:e=>e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e,b(e)}function h(e){var t=((e,t)=>{if("object"!==b(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,"string");if("object"!==b(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""})(e);return"symbol"===b(t)?t:t+""}var v=r(7);function L(e,t){const{filterId:s,filterValue:a}=t,r=(0,v.a)(a),i=e.selectedFilters,{[r]:o}=i,l=(0,n.a)(i,[r].map(h));if(null==o){const{raw:e,key:t,value:n=""}=a,i={filterId:s,inputId:e.id,raw:{id:e.id,value:e.value||""},v3:{key:t,value:n}};l[r]=i}return[l,o]}const O=[{name:"p",value:[]},{name:"bmatch",value:[]},{name:"withoutBetterSort",value:[]}];function y(e,t){null!=t&&null==e[t.v3.key]&&(e[t.v3.key]=[]);const s=Object.keys(e).reduce(((t,s)=>(t.push({name:s,value:e[s]}),t)),[...O]);window.opbox.changeParams(s)}var N=r(2);function _(e,t){switch(e[t].length){case 0:return null;case 1:return e[t][0];default:return e[t]}}function A(e){window.opbox.changeParams((e=>e.reduce(((e,t)=>e.concat((e=>{const t={};return e.filters.forEach((e=>{e.filterValues.forEach((s=>{var a,r,n;a=t,r=s.key,n=((e,t)=>e.value?t===N.c||t===N.b?[e.value.replace(/,/g,".")]:t===N.e||e.selected?[e.value]:[]:[])(s,e.type),a[r]||(a[r]=[]),a[r]=a[r].concat(n)}))})),Object.keys(t).map((e=>({name:e,value:_(t,e)})))})(t))),[]).concat([{name:"p",value:null},{name:"bmatch",value:null},{name:"withoutBetterSort",value:null}]))(e))}function T(e,t,s){const a=e=>e.id===s,r=e.find((({id:e,filters:s})=>e===t&&s.some(a)));return r?r.filters.find(a):void 0}const S=e=>!Number.isNaN(parseFloat(e))&&Number.isFinite(parseFloat(e)),C={[o.a.UPDATE_STATE](e,t){const{type:s}=t,a=(0,n.a)(t,l);return Object.assign(Object.assign(Object.assign({},e),a),{},{isLoading:!1})},[o.a.TOGGLE_SLOT_VISIBILITY](e,t){const{slots:s=[]}=e,{slotName:a,slotId:r,contextNode:n}=t,i=s.map((e=>e.id===r?Object.assign(Object.assign({},e),{},{expand:m(e.expand)}):e)),o=i.findIndex((e=>e.id===r)),{expand:l}=i[o],[f]=i[o].filters,I={filterName:a,paramId:f.mskipParamId||null,filterId:f.id};return l===g.c.EXPANDED&&(0,c.e)(!0,I,n),l===g.c.NOT_EXPANDED&&(0,c.e)(!1,I,n),((e,t,s)=>{(0,E.a)(e)?((e,t)=>{let s=JSON.parse(p.getItem(d)||"[]");s.includes(e)||t!==g.c.NOT_EXPANDED||(s=[...s,e]),s.includes(e)&&t===g.c.EXPANDED&&(s=s.filter((t=>t!==e))),p.setItem(d,JSON.stringify(s))})(t,s):((e,t)=>{let s=JSON.parse(p.getItem(u)||"[]");s.includes(e)||t!==g.c.EXPANDED||(s=[...s,e]),s.includes(e)&&t===g.c.NOT_EXPANDED&&(s=s.filter((t=>t!==e))),p.setItem(u,JSON.stringify(s))})(t,s)})(e.device,a,l),Object.assign(Object.assign({},e),{},{slots:i})},[o.a.CHANGE_SINGLE_SELECT_FILTER](e,t){const[s,a]=L(e,t),r=Object.assign(Object.assign({},e),{},{selectedFilters:s,topFilters:null==e.topFilters?null:Object.assign(Object.assign({},e.topFilters),{},{selectedFilters:s})});return y(((e,t,s)=>Object.values(e).reduce(((a,{v3:r})=>{Array.isArray(a[r.key])||(a[r.key]=[]);const n=r.key===t,i=r.value===s;return(!n||n&&i)&&a[r.key].push(r.value),n&&!i&&delete e[(0,v.a)(r)],a}),{}))(s,t.filterValue.key,t.filterValue.value),a),r},[o.a.CHANGE_MULTI_SELECT_FILTER](e,t){const[s,a]=L(e,t),r=Object.assign(Object.assign({},e),{},{selectedFilters:s,topFilters:null==e.topFilters?null:Object.assign(Object.assign({},e.topFilters),{},{selectedFilters:s})});return t.shouldUpdateUrl?(y((e=>Object.values(e).reduce(((e,{v3:t})=>(Array.isArray(e[t.key])||(e[t.key]=[]),e[t.key].push(t.value),e)),{}))(s),a),r):r},[o.a.CLEAR_ALL_FILTERS](e,t){const s=Object.values(e.selectedFilters).map((e=>({name:e.v3.key,value:[]}))).concat(O);return(0,c.b)(e.slots,t.contextNode),window.opbox.changeParams(s),e},[o.a.CLEAR_MULTI_SELECT_FILTER]:(e,t)=>(window.opbox.changeParams([{name:t.urlParamName}]),e),[o.a.CHANGE_TEXT_FILTER](e,t){const{slots:s}=e,{filterId:a,slotId:r,stateValue:n,filterStateId:i,value:o}=t,l=T(s,r,a);if(l&&l.filterValues.forEach((e=>{Object.assign(e,{value:o})})),a&&null!=n){const e=T(s,r,i);e&&e.filterValues.forEach((e=>{Object.assign(e,{selected:e.value===n})}))}return A(e.slots),Object.assign(Object.assign({},e),{},{slots:s})},[o.a.CHANGE_RANGE_FILTER](e,t){const{filterId:s,slotId:a,from:r,to:n}=t,i=e.slots.map((e=>e.id!==a?e:Object.assign(Object.assign({},e),{},{filters:e.filters.map((e=>e.id!==s?e:Object.assign(Object.assign({},e),{},{filterValues:[Object.assign(Object.assign({},e.filterValues[0]),{},{value:r,selected:S(r)}),Object.assign(Object.assign({},e.filterValues[1]),{},{value:n,selected:S(n)})]})))})));return A(i),Object.assign(Object.assign({},e),{},{slots:i,isLoading:!0})},[o.a.CHANGE_NUMERIC_SINGLE_FILTER](e,t){const s=e.slots.map((e=>e.id!==t.slotId?e:Object.assign(Object.assign({},e),{},{filters:e.filters.map((e=>e.id!==t.filterId?e:Object.assign(Object.assign({},e),{},{filterValues:e.filterValues.map((e=>Object.assign(Object.assign({},e),{},{value:t.value,selected:S(t.value)})))})))})));return A(s),Object.assign(Object.assign({},e),{},{slots:s})},[o.a.SET_IS_LOADING]:(e,t)=>Object.assign(Object.assign({},e),{},{isLoading:t.loadingState})},j=["ItemsList"],R=t().createElement,{Component:P}=t();class D extends P{constructor(e){super(e);const{ItemsList:t}=e,s=(0,n.a)(e,j);this.state=s,this.ItemsList=t,this.dispatch=e=>{this.setState(((e={},t={})=>{const s=C[t.type];return"function"==typeof s?s(e,t):e})(this.state,e))}}render(){const{ItemsList:e,state:t}=this;return R(i.a,{value:{state:t,dispatch:this.dispatch}},R(e,{filtersListHeader:t.filtersListHeader,topFilters:t.topFilters,slots:t.slots}))}}var F=r(0);const w=e=>e.filters.find((e=>e.filterValues.find((e=>e.filterCategoryId))));function x(e,t){const s=new URL(e),a=[...s.searchParams];t.filter((e=>!!e.categoryAlias)).forEach((({filters:e})=>{const[t]=e;t.type===N.a&&t.filterValues.forEach((({key:e,value:t})=>{const s=a.findIndex((([s,a])=>s===e&&a===t));-1!==s&&a.splice(s,1)}))}));const r=a.map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&");return`${s.origin}${s.pathname}${r?"?"+r:""}`}var G=r(16);function H(e){var t;return e.topFilters?{itemsList:e.topFilters.itemsList,sectionTitle:e.topFilters.sectionTitle,categoryId:(0,G.a)(e.categories),categoryAlias:(null==(t=e.categories)?void 0:t.alias)||"/",isAuthenticated:e.isAuthenticated,selectedFilters:e.selectedFilters}:null}var k=r(9);function U(e){const{showHeader:t=!0,searchMeta:s}=e,a=(0,I.a)([],["filtersSuggestedCategory","path"],s),r=(0,I.a)(0,["appliedFiltersCount"],s),n=a.slice(-2).map((e=>e.name)).join(" - "),[i]=a.slice(-1),o=k.a[e.operationalCountry];let l="",c="";if(o&&i){const{search:t}=new URL(e.pageUrl);l=`${o}/${i.alias}${t}`,c=i.id}return{appliedFiltersCount:r,showHeader:t,suggestedCategoryDisplayName:n,suggestedCategoryLink:l,suggestedCategoryId:c}}var M=r(10),V=r(17);function X(e,t){const s=(0,E.a)(e),a=p.getItem(d),r=p.getItem(u);if(null==a)p.setItem(d,"[]");else if(s)return((e,t)=>0===t.length?e:e.map((e=>t.includes(e.name)&&e.expand!==V.c?Object.assign(Object.assign({},e),{},{expand:V.b}):e)))(t,JSON.parse(a));if(null==r)p.setItem(u,"[]");else if(!s)return((e,t)=>0===t.length?e:e.map((e=>t.includes(e.name)&&e.expand!==V.c?Object.assign(Object.assign({},e),{},{expand:V.a}):e)))(t,JSON.parse(r));return t}const B=JSON.parse('{"serviceCatalogId":"sc-16079"}'),Y=t().createElement,{createRef:$}=t(),{serviceCatalogId:J}=B;window.opbox.component.register({prototypeName:"allegro.listing.filters",clientImplementationVersion:"318"},class{constructor({props:e,baseNode:t}){this.onAfterHydrate=()=>{if(!this.appRef.current)return;const e=this.appRef.current.state,t=X(e.device,e.slots);t!==e.slots&&this.appRef.current.dispatch((0,o.k)(Object.assign(Object.assign({},e),{},{slots:t}))),this.resolveHydration();const{suggestedCategoryPath:s,slots:a}=e,r=a.reduce(((e,t)=>e.concat(t.filters.map((({id:e,name:t})=>({paramId:e,filterId:e,filterName:t}))))),[]);(0,c.g)(r,this.baseNode),(0,c.h)(a,s,this.baseNode)},this.baseNode=t,this.props=e,this.appRef=$(),this.hydrationReady=new Promise((e=>{this.resolveHydration=e}))}onMount(){(e=>{const t="highlighted"===e.viewType,s=e.slots.length>0&&e.slots.length<=5;let a=Promise.resolve((()=>null));return t&&s&&(a=r.e(64).then(r.bind(r,18)).then((({HighlightedFiltersList:e})=>e))),t||(a=r.e(235).then(r.bind(r,19)).then((({FiltersList:e})=>e))),a.then((e=>({ItemsList:e})))})(this.props).then((({ItemsList:e})=>{const t=this.baseNode.querySelector("."+J);a().hydrate(Y(D,Object.assign({},this.props,{ItemsList:e,ref:this.appRef})),t,this.onAfterHydrate)}))}onUpdate(e){const t=(e=>{const{device:t,searchMeta:s,operationalCountry:a="PL",topFilters:r}=e;e.filters=(e=>{const t=(0,F.a)(["searchMeta","filtersSuggestedCategory","path"],e)||[];if(t.length){const[s,a]=t.slice(-2);return e.filters.map((e=>w(e)?((e,t,s)=>Object.assign(Object.assign({},e),{},{categoryAlias:t.alias,categoryName:t.name,parentCategoryName:s.name,suggested:!0}))(e,a,s):e))}return e.filters.filter((e=>!w(e)))})(e),e.filters=((e,t)=>{const s=(0,E.a)(e);return t.map(((e,t)=>{const a=(0,I.a)(g.c.NOT_EXPANDED,["filters","0","expand"],e),r=a===g.c.NOT_EXPANDED&&s;return Object.assign(Object.assign({},e),{},{filterPosition:t,expand:r?g.c.EXPANDED:a})}))})(t,e.filters);const n=e.filters,i=(0,v.c)(e.selectedFilters),o=r&&r.itemsList.length<10?((e,t)=>{const s=((null==t?void 0:t.path)||[]).length<2,a=e.find((e=>"offerPrice"===e.id));if(null==a||s)return[];const[r]=a.filters,n=r.suggestedRanges||[];if(0===n.length)return[];const[i]=n;if(!(null!=i.count&&i.count>0))return[];const[o,l]=r.filterValues,c=o.value+""==i.from+"",u=l.value+""==i.to+"";return[{isSelected:c&&u,label:{key:null,value:i.label},filter:{id:r.id,type:M.a.NUMERIC},input:{from:{id:"price_from",value:""+(i.from||"")},to:{id:"price_to",value:""+(i.to||"")}},url:{from:{key:"price_from",value:""+(i.from||"")},to:{key:"price_to",value:""+(i.to||"")}}}]})(e.filters,e.categories):[];return{slots:n,variant:e.variant,appliedFiltersCount:(0,I.a)(0,["appliedFiltersCount"],s),device:t,operationalCountry:a,suggestedCategoryPath:(0,I.a)([],["filtersSuggestedCategory","path"],s),categories:e.categories,pageUrl:x(e.pageUrl,n),selectedFilters:i,filtersListHeader:U(e),topFilters:H({selectedFilters:i,topFilters:r?Object.assign(Object.assign({},r),{},{itemsList:r.itemsList.concat(o)}):r,categories:e.categories,isAuthenticated:e.isAuthenticated}),showHeader:e.showHeader,showLeftColumn:e.showLeftColumnAfterReload,viewType:e.viewType,isAuthenticated:e.isAuthenticated,marketplaceId:e.marketplaceId,isDarkModeSupported:e.isDarkModeSupported}})(e);t.variant=this.props.variant,t.isDarkModeSupported=this.props.isDarkModeSupported,t.slots=X(t.device,t.slots),this.hydrationReady.then((()=>this.appRef.current.dispatch((0,o.k)(t))))}})})();
//# sourceMappingURL=index.es6-pl-PL_d00da747.js.map