const t="listingLayout",e=t+"bmatchCopy",o=t+"bmatchClose",i=t+"bmatchToggle",s=t+"bmatchText",a=t+"bmatchMessage",r={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},n=/<|>|&|"|'/g,l=(RegExp(Array.from("javascript:",(t=>t+"[\\n\\r\\t]*")).join(""),"ig"),t=>r[t]);class c{constructor(t,e){this.$=t[0];for(let o=0;o<e.length;o++){const i=e[o];if(Array.isArray(i))for(let t=0;t<i.length;t++)this.$esc(i[t]);else this.$esc(i);this.$+=t[o+1]}}$esc(t){this.$+=t instanceof c?t.$:(t+"").replace(n,l)}toString(){return this.$}}const h="mlkp_n6",d="mx7m_1",m="mldj_2",g="mm2b_2",u="mdwl_5r",p="mjyo_6x",w="mpof_z0",b="mp0t_0a",y="mgn2_14",v="mse2_40",f="meqh_en",C="mh36_4",_="mli8_k4",B="msa3_z4",T="mpof_uk",k="mpof_vs",L="mpof_ki",P=w,M="mpof_5r",I="m9vn_gl",V="m9vn_d2",E=f,x=y+" "+b+" mqu1_21 mgmw_wo "+_+" "+p+" msbw_2 "+m+" mtag_2 "+g+" "+d+" "+h+" mjb5_zk mg8pbi "+C+" "+u+" msts_t2 mp7g_oz munh_16_m _1405b_Oo4g9",j=y+" "+b+" m9qz_yp "+v+" mqu1_40 mtsp_ib "+_+" mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r "+u+" msbw_rf mldj_rf mtag_rf mm2b_rf mqvr_2 "+B+" mqen_m6 "+f+" m0qj_5r msts_n7 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_vz mjt1_n2 b1kk0 mgmw_u5g mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1g6n m0t1_f9 mvrt_0 mh36_0 "+w+" mp7g_f6 _1405b_ChnCj",S=v+" "+p+" "+f+" "+B+" mg9e_4 mvrt_4 mj7a_4 "+C+" mhd5_0m i1vy1",F="mg9e_16 mg9e_24_l mvrt_16 mvrt_24_l mj7a_16 mj7a_24_l msts_n6 "+d+" "+h+" m911_co mnyp_co mefy_co "+m+" "+g+" mgos5w";let $="pl-PL";const z={"pl-PL":{filters:[["",["filtry"]]],categories:[["",["kategorie"]]],and:[["",["i"]]],copy:[["",["kopiuj"]]],"copy version identifier":[["",["Kopiuj identifykator wersji"]]],Show:[["",["Pokaż"]]],"show version identifier":[["",["Pokaż identyfikator wersji"]]],Hide:[["",["Ukryj"]]],"hide version identifier":[["",["Ukryj identyfikator wersji"]]],"version identifier":[["",["identyfikator wersji"]]],"The identifier was copied to the clipboard":[["",["Skopiowano identyfikator do schowka."]]],"Disconnect the same offers":[["",["Rozłącz te same oferty"]]],"Combine the same offers":[["",["Połącz te same oferty"]]],"show offers":[["",["pokaż oferty"]]],"skip to filters":[["",["Idź do filtrów"]]],"skip to search results":[["",["Idź do wyników wyszukiwania"]]],"switch view to gallery":[["",["Przełącz na widok galeryjny"]]],"switch view to list":[["",["Przełącz na widok listy"]]],"close alert":[["",["Zamknij alert"]]],"close filters and categories":[["",["Zamknij filtry i kategorie"]]],"view product description":[["",["Po kliknięciu zobaczysz uporządkowane i zgrupowane oferty tego samego produktu od różnych sprzedających."]]],"skip links":[["",["Szybkie linki strony wyszukiwania"]]]}};let A,R=t=>t;class q{constructor({bmatchCopyButton:t,scenario:e}){this.bmatchCopyButton=void 0,this.closeButton=void 0,this.messageContainer=void 0,this.scenario=void 0,this.textMessage=void 0,this.timeoutId=void 0,this.navigator=void 0,this.document=void 0,this.document=document,this.closeButton=null,this.navigator=window.navigator,this.bmatchCopyButton=t,this.scenario=e,this.textMessage="",this.messageContainer=null}showMessage(){this.messageContainer&&(this.messageContainer.classList.remove(M),this.messageContainer.classList.add(P))}hideMessage(){this.messageContainer&&(this.messageContainer.classList.remove(P),this.messageContainer.classList.add(M))}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),delete this.timeoutId)}delayHideMessage(){this.timeoutId=setTimeout((()=>{this.hideMessage(),this.clearTimeout()}),5e3)}displayMessage(){this.timeoutId||(this.renderMessage(),this.showMessage(),this.delayHideMessage())}initCloseButtonEventListener(){this.messageContainer&&(this.closeButton=this.messageContainer.querySelector(`[data-role="${o}"]`),this.closeButton&&this.closeButton.addEventListener("click",(()=>{this.hideMessage(),this.clearTimeout()})))}renderMessage(){if(this.messageContainer)return;const t=((t,...e)=>new c(t,e))(A||(A=R`<div class="${0}" data-role="${0}"><div class="${0}"><div class="${0}">${0}</div></div><button data-role="${0}" type="button" class="${0}" title="${0}"><picture><srcset media="(prefers-color-scheme: dark)" srcset="${0}" /><img src="${0}" class="${0}" alt="" /></picture></button></div>`),x,a,F,"mg13b1 _1405b_OeAaI",this.textMessage,o,j,((t,e,o)=>{const i=z[$][t];if(!i)throw Error(`Missing translation for lang "${$}" and key "${t}"`);return function(t,e=""){if("string"==typeof t)throw Error("Translation has to be an array");return t.find((t=>t[0]===e))[1]}(i)[0]})("close alert"),"https://a.allegroimg.com/original/342b8d/cd0ef65448be965c55540f8a8d90/dark-action-common-x-a578977b7f","https://a.allegroimg.com/original/34f3f5/bf439aab49d0a78bcd7501d51697/action-common-x-6c70096572",S);this.document.body.insertAdjacentHTML("beforeend",t),this.messageContainer=this.document.querySelector(`[data-role="${a}"]`),this.initCloseButtonEventListener()}copyToClipboard(){this.bmatchCopyButton&&(this.textMessage=this.bmatchCopyButton.getAttribute("data-text-bmatch-message")||"",this.navigator&&this.navigator.clipboard&&this.navigator.clipboard.writeText&&this.navigator.clipboard.writeText(this.scenario).then((()=>{this.displayMessage()})))}}const G="PRODUCT",U="OFFER";function D(){const t=document.querySelector('input[data-role="search-input"]');if(!t)return;const e=t.value.length;t.focus(),t.setSelectionRange(e,e)}function O(t,e){t&&(t.classList.toggle(P,e),t.classList.toggle(M,!e),document.body.classList.toggle(E,e),e?window.history.pushState({page:"filtersRwdLayer"},""):window.history.replaceState(window.history.state,"",(t=>{const e=new URL(t),o=new URLSearchParams(e.search);o.delete("showLeftColumn");const i=Array.from(o.entries());if(0===i.length)e.search="";else{const t=i.map((t=>t.map(encodeURIComponent))).map((t=>t.join("="))).join("&");e.search=t}return e.toString()})(window.location.href)))}const W=new CustomEvent("opbox:listing:filter layer opened"),N=new CustomEvent("opbox:listing:filter layer about to be closed");function H({elements:t,styleToAdd:e,styleToRemove:o}){t&&t.forEach((t=>{t&&(t.classList.add(e),t.classList.remove(o))}))}function Z({loader:t,display:e}){t&&(t.classList.toggle(P,e),t.classList.toggle(M,!e))}function K(t,e){return t.querySelector(`[data-role="${e}"]`)}window.opbox.component.register({prototypeName:"allegro.listing.layout",clientImplementationVersion:"b5d"},class{constructor({baseNode:t,props:o}){this.baseNode=void 0,this.props=void 0,this.bmatchCopyButton=void 0,this.bmatchTextContainer=void 0,this.bmatchToggleButton=void 0,this.toggleViewIcon=void 0,this.searchButton=void 0,this.closeFiltersButton=void 0,this.closeFiltersModal=void 0,this.filtersContainer=void 0,this.itemsContainer=void 0,this.aboveItems=void 0,this.rightItems=void 0,this.paginationBottom=void 0,this.stickyContainer=void 0,this.baseFiltersBars=void 0,this.totalCountElement=void 0,this.loader=void 0,this.toggleViewProductButtons=void 0,this.toggleProductViewMobileWrapper=void 0,this.sortTop=void 0,this.toggleViewGallery=void 0,this.listingContainer=void 0,this.baseNode=t,this.props=o.props,this.bmatchCopyButton=K(t,e),this.bmatchTextContainer=K(t,s),this.bmatchToggleButton=K(t,i),this.closeFiltersButton=K(t,"closeFiltersButton"),this.closeFiltersModal=K(t,"closeFiltersModal"),this.filtersContainer=K(t,"filtersContainer"),this.itemsContainer=K(t,"itemsContainer"),this.searchButton=K(t,"searchButton"),this.toggleViewIcon=K(t,"toggleViewIcon"),this.aboveItems=K(t,"aboveItems"),this.rightItems=K(t,"rightItems"),this.paginationBottom=K(t,"paginationBottom"),this.stickyContainer=K(t,"stickyContainer"),this.baseFiltersBars=[K(t,"baseFiltersBarTop"),K(t,"baseFiltersBarSticky")].map((t=>({bar:t,counter:t&&t.parentElement&&K(t.parentElement,"baseFiltersBarCounter")}))),this.toggleViewProductButtons=Array.from(t.querySelectorAll('[data-role="toggleViewProductButton"]')),this.toggleProductViewMobileWrapper=K(t,"toggleViewProductMobileWrapper"),this.totalCountElement=K(t,"totalCount"),this.sortTop=K(t,"sortTop"),this.toggleViewGallery=K(t,"toggleViewGallery"),this.loader=K(t,"loader"),this.listingContainer=t.querySelector('[data-prototype-id="allegro.listing"],[data-prototype-id="allegro.product.listing"]')}beforeOnUpdate(){Z({loader:this.loader,display:!0})}onUpdate(t){const e={parameters:t},{props:o}=(({parameters:{searchMeta:t,searchPhrase:e,isGalleryView:o,isMobile:i,showViewSwitch:s,isProductView:a,showProductSwitch:r,showLeftColumn:n,hardProdDisjoinValue:l},slots:c=new Map})=>{let h;return c&&c.size>0&&(h={left:c.get("left"),paginationBottom:c.get("paginationBottom"),paginationTop:c.get("paginationTop"),rightAboveItems:c.get("rightAboveItems"),rightBelowItems:c.get("rightBelowItems"),rightItems:c.get("rightItems"),topFilters:c.get("topFilters"),sortTop:c.get("sortTop"),top:c.get("top"),mobileStickyBar:c.get("mobileStickyBar")}),{props:{searchMeta:t,searchPhrase:e,isGalleryView:o,isMobile:i,showViewSwitch:s,isProductView:a,showProductSwitch:r,showLeftColumn:n,hardProdDisjoinValue:l},slots:h}})(e);(({totalCountElement:t,props:e})=>{const{totalCount:o}=e.searchMeta;var i;t&&"number"==typeof(i=o)&&isFinite(i)&&Math.floor(i)===i&&(t.innerText=""+o)})({totalCountElement:this.totalCountElement,props:o}),this.baseFiltersBars.forEach((({counter:t})=>{(({baseFiltersBarCounter:t,props:e})=>{const{appliedFiltersCount:o}=e.searchMeta,i=o>0;t&&(t.innerText=""+o,t.classList.toggle(k,i),t.classList.toggle(M,!i))})({baseFiltersBarCounter:t,props:o})})),(({elementsOnMobile:t,elementsOnRWD:e,props:o})=>{const{isMobile:i}=o,s=!o.searchMeta.totalCount;H(s?{elements:t,styleToAdd:I,styleToRemove:V}:{elements:t,styleToAdd:V,styleToRemove:I}),s&&!i?H({elements:e,styleToAdd:M,styleToRemove:L}):s||i||H({elements:e,styleToAdd:L,styleToRemove:M})})({elementsOnMobile:[this.sortTop,this.toggleViewGallery,this.paginationBottom],elementsOnRWD:[this.aboveItems],props:o}),Z({loader:this.loader,display:!1})}onMount(){!function({bmatchCopyButton:t,bmatchTextContainer:e,bmatchToggleButton:o,baseFiltersBars:i,closeFiltersButton:s,closeFiltersModal:a,filtersContainer:r,itemsContainer:n,searchButton:l,stickyContainer:c,aboveItemsContainer:h,toggleProductViewMobileWrapper:d,toggleViewIcon:m,toggleProductViewButtons:g,rightItemsSlotContainer:u,listingContainer:p,props:w}){const{isMobile:b,isGalleryView:y,isProductView:v,showProductSwitch:f,searchMeta:C,hardProdDisjoinValue:_}=w,{scenario:B}=C,I="click";if(t&&B){const e=new q({bmatchCopyButton:t,scenario:B});t.addEventListener(I,(()=>{e.copyToClipboard()}))}o&&e&&o.addEventListener(I,(()=>{(({bmatchToggleButton:t,bmatchCopyButton:e,bmatchTextContainer:o})=>{if(!t||!o||!e)return;const i=t.getAttribute("data-text-hide")||"",s=t.getAttribute("data-text-show")||"",a=t.getAttribute("data-aria-label-show")||"",r=t.getAttribute("data-aria-label-hide")||"";t.innerText===s?(t.innerText=i,t.setAttribute("aria-label",r),o.classList.add(T),o.classList.remove(M),e.classList.add(k),e.classList.remove(M)):(t.innerText=s,t.setAttribute("aria-label",a),o.classList.add(M),o.classList.remove(T),e.classList.add(M),e.classList.remove(k))})({bmatchToggleButton:o,bmatchCopyButton:t,bmatchTextContainer:e})})),b&&c&&((t,e,o,i)=>{let s=null,a=0,r=!1,n=!1;window.addEventListener("scroll",(()=>{e&&i&&(s||(s=window.setTimeout((()=>{const l=e.getBoundingClientRect().y,c=i.getBoundingClientRect(),h=Math.abs(c.y)<c.height,d=l>a;a=l,s=null,r=l<-16&&h,n=r&&d,t.classList.toggle(L,r),t.classList.toggle(M,!r),o&&o.classList.toggle(M,!n)}),100)))}),{passive:!0})})(c,h,d,u),m&&m.addEventListener(I,(()=>{(({isGalleryView:t})=>{const e=new URL(window.location.href);if("galeria"===e.searchParams.get("widok"))e.searchParams.delete("widok"),window.location.assign(e.toString());else{const e="isGalleryView";window.opbox.preferences.get(e).then((o=>{const i="true"===o||""===o&&t?"false":"true";window.opbox.preferences.set(e,i).then((()=>window.location.reload())).catch((t=>console.error(t)))})).catch((t=>console.error(t)))}})({isGalleryView:y})})),l&&l.addEventListener(I,D),g.length>0&&f&&g.forEach((t=>{t.addEventListener(I,(()=>{const e=t.querySelector('[data-role="toggleViewProductButtonSpinner"]');(({isProductView:t=!1,button:e,spinner:o,hardProdDisjoinValue:i})=>{const s=new URL(window.location.href);s.searchParams.delete("p"),s.searchParams.delete("forceProductFlow"),o&&(e.disabled=!0,o.classList.add(P),o.classList.remove(M));const a=i&&""!==i?window.opbox.preferences.set("hardProductization",i):Promise.resolve();Promise.all([window.opbox.preferences.set("isProductsListing",!t),a]).then((()=>{var e;e=t,window.opbox.plugin.get("survey").then((t=>{try{t.queueEvent("LISTING_TYPE_CHANGE",{oldListingType:e?G:U,newListingType:e?U:G})}catch(o){window.opbox.reportError({name:"Survey plugin queueEvent failure.",stack:"",status:404,message:"Couldn't queue the event via survey plugin."})}})).catch((()=>{window.opbox.reportError({name:"Survey plugin load failure.",stack:"",status:404,message:"Couldn't load the survey plugin."})})),window.location.href=(t=>{const{origin:e,pathname:o,searchParams:i}=t,s=(t=>{const e=Array.from(t.entries()).map((t=>t.map(encodeURIComponent))).map((([t,e])=>`${t}=${e}`));return e.length?"?"+e.join("&"):""})(i);return e+o+s})(s)}))})({isProductView:v,button:t,spinner:e,hardProdDisjoinValue:_})}))})),r&&n&&(i.forEach((({bar:t})=>{t&&t.addEventListener(I,{timeoutId:void 0,handleEvent(){window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((()=>{O(r,!0),null==p||p.dispatchEvent(W)}),0)}})})),s&&s.addEventListener(I,(()=>{var t;null==p||p.dispatchEvent(N),O(r,!1),(t=window)&&t.scrollTo(0,0)})),a&&a.addEventListener(I,(()=>{null==p||p.dispatchEvent(N),O(r,!1)})),window.addEventListener("popstate",(()=>{null==p||p.dispatchEvent(N),O(r,!1)})))}({bmatchCopyButton:this.bmatchCopyButton,bmatchTextContainer:this.bmatchTextContainer,bmatchToggleButton:this.bmatchToggleButton,baseFiltersBars:this.baseFiltersBars,closeFiltersButton:this.closeFiltersButton,closeFiltersModal:this.closeFiltersModal,filtersContainer:this.filtersContainer,itemsContainer:this.itemsContainer,searchButton:this.searchButton,toggleViewIcon:this.toggleViewIcon,stickyContainer:this.stickyContainer,aboveItemsContainer:this.aboveItems,toggleProductViewButtons:this.toggleViewProductButtons,toggleProductViewMobileWrapper:this.toggleProductViewMobileWrapper,rightItemsSlotContainer:this.rightItems,listingContainer:this.listingContainer,props:this.props})}});
//# sourceMappingURL=listing-layout-rwd.es6-pl-PL_fd4d2aae.js.map