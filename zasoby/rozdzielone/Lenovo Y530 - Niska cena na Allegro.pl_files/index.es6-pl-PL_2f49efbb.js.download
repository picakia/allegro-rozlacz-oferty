var e,t,n=[(e,t,n)=>{n.d(t,{a:()=>p,b:()=>w,c:()=>i,d:()=>m,e:()=>d,f:()=>b,g:()=>h,h:()=>c,i:()=>s,j:()=>o,k:()=>r,l:()=>f,m:()=>u,n:()=>a,o:()=>l});const o="contentBlocker",r="#ContentBlockerPluginWrapper",i="/opbox-fragments/content-blocker",s="allegro.contentBlocker",l=[s],a="USER_CONSENT_CHANGED",c="ContentBlockerPluginLoginRedirect",d=9e5,u=2592e6,h='[data-role="login-button"]',p='[data-role="close-button"]',b="invokeContentBlockerType",w="initiator",f="Tab",m="data-dark-mode-supported"}],o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.m=n,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"login-redirect.es6-pl-PL_"+r.h().slice(0,8)+".js",r.h=()=>"2f49efbb",r.o=(e,t)=>({}.hasOwnProperty.call(e,t)),e={},t="@allegro/opbox-content-blocker-plugin:",r.l=(n,o,i,s)=>{if(e[n])e[n].push(o);else{var l,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){l=u;break}}l||(a=!0,(l=document.createElement("script")).type="module",l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+i),l.src=n,0!==l.src.indexOf(window.location.origin+"/")&&(l.crossOrigin="anonymous")),e[n]=[o];var h=(t,o)=>{l.onerror=l.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((e=>e(o))),t)return t(o)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),a&&document.head.appendChild(l)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://assets.allegrostatic.com/sc-22987/",(()=>{var e={57:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=i);var s=r.p+r.u(t),l=Error();r.l(s,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",l.name="ChunkLoadError",l.type=i,l.request=s,o[1](l)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,i,[s,l,a]=n,c=0;if(s.some((t=>0!==e[t]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);a&&a(r)}for(t&&t(n);c<s.length;c++)i=s[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackJsonp_0ae77=self.webpackJsonp_0ae77||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r(0);const s={alcohol:{name:"alcoholContentAllowed",duration:i.e}},l=e=>{var t;return null==(t=s[e])?void 0:t.name},a=e=>Object.keys(s).find((t=>{var n;return(null==(n=s[t])?void 0:n.name)===e})),c=(e,t)=>new URL(e).searchParams.get(t)||void 0,d=["USER_CONSENT_CHANGED"];class u{constructor(e,t,n,o,l){this.isDarkModeSupported=void 0,this.pluginWrapper=void 0,this.subscribers={},this.countdownIds={},this.contentBlockerWrapper=void 0,this.removeInvokeSearchParams=()=>{const e=new URL(this.window.location.href);[i.f,i.b].forEach((t=>e.searchParams.delete(t))),this.window.history.replaceState({},"",e.toString())},this.show=(e,t="user")=>{this.isUserAuthenticated||"alcohol"!==e?(this.contentBlockerWrapper=this.window.document.querySelector(`[data-prototype-id="${i.i}"]`),this.contentBlockerWrapper?this.contentBlockerWrapper.style.removeProperty("display"):this.window.opbox.page.render.fragment({pathname:i.c,additionalQueryParameters:{contentType:e,initiator:t}})):r.e(59).then(r.bind(r,2)).then((({LoginRedirect:n})=>{new n(this.window,this.scopeId,this.pluginWrapper,this.isDarkModeSupported,e,t).mount()}))},this.subscribeToEvent=(e,t)=>{(e=>d.includes(e))(e)&&(this.subscribers[e]||(this.subscribers[e]=new Set),this.subscribers[e].add(t))},this.unsubscribeFromEvent=(e,t)=>{var n,o;null!=(n=this.subscribers[e])&&n.has(t)&&(null==(o=this.subscribers[e])||o.delete(t))},this.__reportUserConsentDecision=({prototypeName:e,contentType:t,consentValue:n})=>{i.o.includes(e)&&(n&&this.initiateCountdown(t),this.notifySubscribers({eventType:i.n,contentType:t,consentValue:n}))},this.notifySubscribers=e=>{if(this.subscribers[e.eventType])for(const t of this.subscribers[e.eventType])t(e)},this.initiateCountdown=e=>{this.countdownIds[e]||(this.countdownIds[e]=this.window.setTimeout((()=>{this.notifySubscribers({eventType:i.n,contentType:e,consentValue:!1}),this.entryContentBlockerType&&this.show(e),delete this.countdownIds[e]}),(e=>{var t,n;return null!=(t=null==(n=s[e])?void 0:n.duration)?t:i.m})(e)))},this.getPublicApi=()=>({show:this.show,subscribeToEvent:this.subscribeToEvent,unsubscribeFromEvent:this.unsubscribeFromEvent,__reportUserConsentDecision:this.__reportUserConsentDecision}),this.window=e,this.scopeId=t,this.isUserAuthenticated=n,this.entryContentBlockerType=o,this.contentAllowedPreferences=l,this.pluginWrapper=this.window.document.querySelector(i.k),this.isDarkModeSupported="true"===this.pluginWrapper.getAttribute(i.d),this.contentAllowedPreferences&&this.initializeAllCountdowns(this.contentAllowedPreferences),this.showEntryContentBlockerIfNeeded(this.entryContentBlockerType,this.contentAllowedPreferences)}initializeAllCountdowns(e){let t;for(t in e)null!=e&&e[t]&&a(t)&&this.initiateCountdown(a(t))}showEntryContentBlockerIfNeeded(e,t){const n=c(this.window.location.href,i.f),o=c(this.window.location.href,i.b);n&&o?(this.removeInvokeSearchParams(),this.show(n,o)):!e||!l(e)||null!=t&&t[l(e)]||this.show(e,"entry")}}var h;const p=(({pluginName:e,clientImplementationVersion:t})=>{try{return JSON.parse(window.document.querySelector(`script[data-serialize-plugin-name="${e}"][data-civ="${t}"]`).textContent)}catch(n){return window.opbox.reportError(Error(`Missing serialized props of plugin "${e}", with civ "${t}"`)),{}}})({pluginName:i.j,clientImplementationVersion:"730"});if(null!=(h=p.contentBlockerConfiguration)&&h.enabled){const{scopeId:e,isUserAuthenticated:t,entryContentBlockerType:n,contentAllowedPreferences:o}=(e=>{var t;return{entryContentBlockerType:null==(t=e.contentBlockerConfiguration)?void 0:t.showContentType,contentAllowedPreferences:e.contentAllowedPreferences,isUserAuthenticated:e.isUserAuthenticated,scopeId:e.scopeId||"allegro-pl"}})(p);window.opbox.plugin.register({name:i.j},new u(window,e,t,n,o).getPublicApi())}
//# sourceMappingURL=index.es6-pl-PL_2f49efbb.js.map