/*! For license information please see index-pl-PL_5fed32da.js.LICENSE.txt */
!function(){"use strict";var e,t={};function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"===r(t)?t:t+""}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e=t,"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});var h=function(e){return"SUGGESTION"===e.type},l=function(e){return"HORIZONTAL_LIST"===e.type},d=function(e){return h(e)||l(e)},v="advanced-search-criteria",f="remove-recently-searched",p="rewrite-recently-searched",g="suggestion",m="horizontal-list",y="suggestion-dsa-button",S=function(e){return'[data-role="'.concat(e,'"]')},b=S(v),k=S("filters-dropdown-toggle"),E=S("filters-selected-option"),I=S("logo-wrapper"),w=S("multisearch-button"),L=S("remove-query"),N=S(f),_=S(p),C=S(y),x=S("search-button"),A=S("search-form"),P=S("search-input"),O=S("suggester"),j=(S(g),S("visual-search-link")),T="blur",R="change",U="click",B="focus",F="input",G="keydown",D="mousedown",z="submit",q="touchmove",M="RECEIVE_SUGGESTIONS",H="TOGGLE_IS_EXPANDED",W="CLICK_SUGGESTION",V="CLICK_HORIZONTAL_LIST",K="CLICK_REWRITE_SUGGESTION",Q="CLICK_REMOVE_SUGGESTION";function Y(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(){return{emit:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,s=this.events[e]||[],o=s.length;i<o;i++)s[i].apply(s,n)},events:{},on:function(e,t){var n,r=this;return((n=this.events)[e]||(n[e]=[])).push(t),function(){var n;r.events[e]=null==(n=r.events[e])?void 0:n.filter((function(e){return t!==e}))}}}},$={ActiveSuggestionIndex:"activeSuggestionIndex",NextPhrase:"nextPhrase",Suggestions:"suggestions",Tracking:"tracking",InputPhrase:"inputPhrase",SelectedFilterIndex:"selectedFilterIndex",CheckedAdvancedSearchCriteriaIds:"checkedAdvancedSearchCriteriaIds"},J=function(){function e(t){var r,i,s,o,a,u,c,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z();n(this,e),this.state=void 0,this.props=t,this.emitter=h,this.state=(s=(r=t).inputPhrase,a=void 0===(o=r.filters)?{list:[],selected:0}:o,c=void 0===(u=r.advancedSearchCriterias)?[]:u,{activeSuggestionIndex:-1,inputPhrase:s,nextPhrase:s,selectedFilterIndex:null!=(i=a.selected)?i:0,suggestions:[],tracking:{},checkedAdvancedSearchCriteriaIds:c.filter((function(e){return e.checked})).map((function(e){return e.id}))})}return o(e,[{key:"on",value:function(){var e;return(e=this.emitter).on.apply(e,arguments)}}]),e}();function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.values($).forEach((function(e){return Object.defineProperty(J.prototype,e,{get:function(){return this.state[e]},set:function(t){this.state=Object.assign(Object.assign({},this.state),{},Y({},e,t)),this.emitter.emit(e,this.state)}})}));var ee=function(e){return!!e&&!!e.type},te="m0qj_5r",ne="msbw_rf",re="mldj_rf",ie="mtag_rf",se="mm2b_rf",oe="m911_5r",ae="mefy_5r",ue="mnyp_5r",ce="mdwl_5r",he="mjyo_lo",le="mjyo_6x",de="mgmw_wo",ve="mgmw_ag",fe="msts_me",pe="msts_n7",ge="mqen_m6",me="mpof_5r",ye="mpof_ki",Se="mpof_vs",be="mpof_z0",ke="m389_6m",Ee="mp0t_0a",Ie="mgn2_14",we="mgn2_12",Le="m9qz_yp",Ne="mse2_40",_e="mse2_1",Ce="mqvr_2",xe="mqu1_21",Ae="mqu1_16",Pe="mqu1_1",Oe="mp4t_16",je="mp4t_0",Te="mryx_0",Re="munh_0",Ue="m3h2_0",Be="mj6k_n7",Fe="m2ha_2",Ge="mjt1_n2",De="m8qd_vz",ze="mjir_sv",qe="meqh_en",Me="mg9e_8",He="mg9e_0",We="mj7a_8",Ve="mj7a_0",Ke="mh36_8",Qe="mh36_0",Ye="mvrt_16",Ze="mvrt_8",$e="mvrt_0",Je="mp7g_f6",Xe="mp7g_oh",et="mj9z_5r",tt="mhd5_0m",nt="mli8_k4",rt="mtsp_ib",it="msa3_z4",st="m7er_k4",ot="m7er_40",at=Pe,ut="CATEGORY",ct="DEPARTMENT",ht="ENDED",lt="USER_NAME",dt="USERS",vt="CHARITY_GOALS",ft="CHARITY_ORGANIZATION",pt="CHARITY_ORGANIZATIONS";function gt(e,t,n){var r=n.filters.list[t.selectedFilterIndex];return!!ee(r)&&e.includes(r.type)}function mt(e,t){return!t.enableSuggestionsForEmptyPhrase&&function(e){return""===e}(e)}var yt=["CHARITY_GOAL_OFFERS"],St=[ht,dt,vt,pt];function bt(e,t){return gt(St,e,t)||!t.advancedSearchCriterias.length}var kt=function(e,t){return e.reduce((function(e,n){var r=X(e,2),i=r[0],s=r[1],o=n.queryParameter,a=n.id;return t.includes(a)?i.push(o):s.push(o),[i,s]}),[[],[]])},Et=function(e,t,n){var r,i;t?(r=e.classList).add.apply(r,c(n)):(i=e.classList).remove.apply(i,c(n))},It=function(e,t){return Et(e,!t,["m9vn_gl"])},wt=function(e,t){return Et(e,!t,["_535b5_LGnXi"])},Lt=function(){return!0},Nt=function(e,t){return e!==t},_t=function(e,t,n){(arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nt)(e[t],n)&&(e[t]=n)},Ct=function(e,t){_t(e,$.InputPhrase,t)},xt=function(e,t){_t(e,$.NextPhrase,t,Lt)},At=function(e,t){_t(e,$.CheckedAdvancedSearchCriteriaIds,t,(function(e,t){return e.length!==t.length||!e.every((function(e){return t.includes(e)}))}))},Pt=function(e){return{type:e.type,id:e.id}};function Ot(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];"requestIdleCallback"in window?requestIdleCallback((function(){return e.apply(void 0,n)})):setTimeout((function(){return e.apply(void 0,n)}),0)}}var jt=function(){function e(t,r,i){var s=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;n(this,e),this.previousHash="",this.searchFormNode=void 0,this.searchInputNode=void 0,this.searchButtonNode=void 0,this.filtersList=void 0,this.previousCheckedAdvancedSearchCriteriaIds=void 0,this.previousSelectedFilterIndex=void 0,this.stateUnbinders=[],this.suggesterUnbinders=[],this.sendSuggestLayerViewEvent=function(e,t){if(e){var n={typedPhrase:t.trim()};s.targetWindow.opbox.analytics.sendItemViewEvent({contextNode:s.searchInputNode,label:"suggestLayerView",customParams:n})}},this.sendSuggestHintClickEvent=function(e){var t="".concat(e.tracking.type,"_REDIRECT"),n=Object.assign({typedPhrase:s.store.inputPhrase.trim(),details:Object.assign({phrase:e.completionText},e.tracking)},s.store.tracking);s.targetWindow.opbox.analytics.sendBoxInteractionEvent({contextNode:s.searchInputNode,label:"suggestHintClick",value:t,customParams:n})},this.sendHorizontalListClickEvent=function(e){var t=Object.assign(Object.assign({typedPhrase:s.store.inputPhrase.trim()},e.items[0].tracking),s.store.tracking);s.targetWindow.opbox.analytics.sendBoxInteractionEvent({contextNode:s.searchInputNode,label:"horizontalListItemClick",customParams:t})},this.sendSearchInteraction=function(e){var t,n=e.type===G?"searchEnter":"searchClick",r={typedPhrase:s.store.inputPhrase.trim(),scope:Pt(null!=(t=s.filtersList[s.store.selectedFilterIndex])?t:{})};s.targetWindow.opbox.analytics.sendBoxInteractionEvent({contextNode:s.searchInputNode,label:n,customParams:r})},this.sendScopeChangeEvent=function(e){var t=e.selectedFilterIndex,n={scope:Pt(s.filtersList[t]),previousScope:Pt(s.filtersList[s.previousSelectedFilterIndex])};s.targetWindow.opbox.analytics.sendBoxInteractionEvent({contextNode:s.searchInputNode,label:"scopeChange",customParams:n}),s.previousSelectedFilterIndex=t},this.sendSuggestionsShowEvent=function(e,t){var n,r=Object.assign({status:e,typedPhrase:t.trim(),suggestions:(n=s.store.suggestions,n.filter(d).reduce((function(e,t){var n=l(t)?t.items[0].tracking.type:t.tracking.type;return e.types[n]?e.types[n]+=1:e.types[n]=1,e.count+=1,e}),{types:{},count:0})),scope:Pt(s.filtersList[s.store.selectedFilterIndex])},s.store.tracking),i=function(e){var t=e.filter(h).find((function(e){return"AD"===e.tracking.type}));return t?t.tracking.campaignId:null}(s.store.suggestions);i&&(r.campaignId=i),s.targetWindow.opbox.analytics.sendItemViewEvent({contextNode:s.searchInputNode,label:"suggestionsShow",customParams:r}),s.sendAdsDSSSuggestionsShowEvents()},this.sendAdsDSSSuggestionsShowEvents=function(){s.store.suggestions.filter(h).filter((function(e){return"PREMIUMAD"===e.tracking.type})).forEach((function(e){var t={analyticsId:e.tracking.emissionUnitId,analyticsEmissionTimestamp:e.tracking.timestamp,analyticsSignature:e.tracking.sig};s.targetWindow.opbox.analytics.sendItemViewEvent({contextNode:s.searchInputNode,label:"showDSSItems",customParams:t})}))},this.sendAdvancedSearchCheckedEvent=function(e){var t,n,r=e.checkedAdvancedSearchCriteriaIds,i=(t=r,n=s.previousCheckedAdvancedSearchCriteriaIds,[].concat(c(t.filter((function(e){return!n.includes(e)}))),c(n.filter((function(e){return!t.includes(e)})))))[0];s.targetWindow.opbox.analytics.sendBoxInteractionEvent({contextNode:s.searchInputNode,label:"advancedSearchCriteria",value:r.includes(i).toString(),customParams:{id:i}}),s.previousCheckedAdvancedSearchCriteriaIds=c(r)},this.sendSuggestionRemoveClickEvent=function(e,t){var n="".concat(e.tracking.type,"_REMOVE"),r=Object.assign({typedPhrase:t.trim(),details:Object.assign({phrase:e.completionText},e.tracking)},s.store.tracking);s.targetWindow.opbox.analytics.sendBoxInteractionEvent({contextNode:s.searchInputNode,label:"suggestionRemoveClick",value:n,customParams:r})},this.sendRewriteClickEvent=function(e,t){var n="".concat(e.tracking.type,"_REWRITE"),r=Object.assign({typedPhrase:t.trim(),details:Object.assign({phrase:e.completionText},e.tracking)},s.store.tracking);s.targetWindow.opbox.analytics.sendBoxInteractionEvent({contextNode:s.searchInputNode,label:"suggestRewriteClick",value:n,customParams:r})},this.baseNode=t,this.store=r,this.props=i,this.targetWindow=o,this.searchFormNode=t.querySelector(A),this.searchInputNode=t.querySelector(P),this.searchButtonNode=t.querySelector(x),this.filtersList=i.filters.list,this.previousCheckedAdvancedSearchCriteriaIds=c(r.checkedAdvancedSearchCriteriaIds),this.previousSelectedFilterIndex=this.store.selectedFilterIndex}return o(e,[{key:"mount",value:function(e){this.addEventListeners(),this.addStateListeners(),this.addSuggesterListeners(e)}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners(),this.removeSuggesterListeners()}},{key:"addEventListeners",value:function(){this.searchFormNode.addEventListener(z,this),this.searchInputNode.addEventListener(G,this),this.searchButtonNode.addEventListener(G,this),this.searchButtonNode.addEventListener(D,this)}},{key:"removeEventListeners",value:function(){this.searchFormNode.removeEventListener(z,this),this.searchInputNode.removeEventListener(G,this),this.searchButtonNode.removeEventListener(G,this),this.searchButtonNode.removeEventListener(D,this)}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on($.SelectedFilterIndex,this.sendScopeChangeEvent),this.store.on($.CheckedAdvancedSearchCriteriaIds,this.sendAdvancedSearchCheckedEvent))}},{key:"addSuggesterListeners",value:function(e){this.suggesterUnbinders.push(e.on(W,this.sendSuggestHintClickEvent),e.on(V,this.sendHorizontalListClickEvent),e.on(H,Ot(this.sendSuggestLayerViewEvent)),e.on(M,Ot(this.sendSuggestionsShowEvent)),e.on(Q,Ot(this.sendSuggestionRemoveClickEvent)),e.on(K,Ot(this.sendRewriteClickEvent)))}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===z&&this.onSubmit(),e.type===G&&"Enter"===e.key&&this.sendSearchInteraction(e),e.type===D&&this.sendSearchInteraction(e)}},{key:"onSubmit",value:function(){if(-1!==this.store.activeSuggestionIndex){var e=this.store.suggestions.filter(d)[this.store.activeSuggestionIndex];l(e)?this.sendHorizontalListClickEvent(e):this.sendSuggestHintClickEvent(e)}}}]),e}();function Tt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Rt={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},Ut=/<|>|&|"|'/g,Bt=(RegExp(Array.from("javascript:",(function(e){return"".concat(e).concat("[\\n\\r\\t]*")})).join(""),"ig"),function(e){return Rt[e]}),Ft=function(){function e(t,r){n(this,e),this.$=t[0];for(var i=0;i<r.length;i++){var s=r[i];if(Array.isArray(s))for(var o=0;o<s.length;o++)this.$esc(s[o]);else this.$esc(s);this.$+=t[i+1]}}return o(e,[{key:"$esc",value:function(t){this.$+=t instanceof e?t.$:(t+"").replace(Ut,Bt)}},{key:"toString",value:function(){return this.$}}]),e}(),Gt=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Ft(e,n)},Dt="pl-PL",zt={"pl-PL":{"Category and search options":[["",["Kategoria i opcje wyszukiwania"]]],"All categories":[["",["Wszystkie kategorie"]]],Expired:[["",["Zakończone"]]],Everywhere:[["",["Wszędzie"]]],Sellers:[["",["Sprzedawcy"]]],Categories:[["",["Kategorie"]]],"Other options":[["",["Inne opcje"]]],"Charity organizations":[["",["Organizacje charytatywne"]]],"Fundraising goals":[["",["Cele charytatywne"]]],"search for anything":[["",["czego szukasz?"]]],search:[["",["szukaj"]]],"Remove suggestion from history":[["",["Usuń podpowiedź z histori"]]],"search many":[["",["szukaj wielu"]]],"multiple product search":[["",["wyszukiwanie wielu przedmiotów"]]],"Home and Garden":[["",["Dom i Ogród"]]],Kids:[["",["Dziecko"]]],Electronics:[["",["Elektronika"]]],"Business and Services":[["",["Firma i usługi"]]],"Collections and Art":[["",["Kolekcje i sztuka"]]],"Culture and Entertainment":[["",["Kultura i rozrywka"]]],Fashion:[["",["Moda"]]],Automotive:[["",["Motoryzacja"]]],"Real Estate":[["",["Nieruchomości"]]],"Sports and Travel":[["",["Sport i turystyka"]]],Supermarket:[["",["Supermarket"]]],Beauty:[["",["Uroda"]]],Health:[["",["Zdrowie"]]],"Check details concerning ads":[["",["Sprawdź szczegóły dotyczące reklamy"]]],"Search by image":[["",["Szukaj obrazem"]]],"Order in one shipment":[["",["zamów w jednej przesyłce"]]]}},qt=/({{[^}]+}}|{%[^%}]+%})/g,Mt=/({{[^}]+}})/g,Ht=/({%[^%}]+%})/g,Wt=/({{\s*|\s*}}|{%\s*|\s*%})/g,Vt={"pl-PL":function(e){return 1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}};function Kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e)throw Error("Translation has to be an array");return e.find((function(e){return e[0]===t}))[1]}var Qt,Yt,Zt=function(e,t,n){var r=zt[Dt][e];if(!r)throw Error('Missing translation for lang "pl-PL" and key "'.concat(e,'"'));return t?function(e,t,n){var r=Kt(e,t.context);return r=parseInt(t.count,10)>=0?function(e,t){var n=Vt[Dt](t);return"boolean"!=typeof n?e[n]:e[n?1:0]}(r,t.count):X(r,1)[0],function(e,t,n){if(n){var r=0;return e.split(qt).map((function(n){if(n.match(Ht)){var i=t.formatters[r];if(i)return r+=1,i(n.replace(Wt,""));throw Error('Missing translation formatter for "'.concat(e,'"'))}return n.match(Mt)?t[n.replace(Wt,"")]:n}))}var i=e.match(qt),s=0;return i?i.reduce((function(n,r){var i=r.replace(Wt,"");if(r.match(Ht)){var o=t.formatters[s];if(o)return s+=1,n.replace(r,o(i));throw Error('Missing translation formatter for "'.concat(e,'"'))}return r.match(Mt)?n.replace(r,t[i]):n}),e):e}(r,t,n)}(r,t,n):Kt(r)[0]},$t="i150e",Jt="im1ut",Xt="ipmse",en=Ie+" "+Ee+" "+xe+" "+de+" "+nt+" "+be+" mpof_5r_x",tn=Ie+" "+Ee+" "+xe+" "+de+" "+nt+" "+me+" mpof_z0_x",nn=function(){function e(t,r,i){n(this,e),this.dropdownToggleNode=void 0,this.selectedOptionNode=void 0,this.filtersList=void 0,this.stateUnbinders=[],this.store=r,this.dropdownToggleNode=t.querySelector(k),this.selectedOptionNode=t.querySelector(E),this.filtersList=i.filters.list}return o(e,[{key:"mount",value:function(){this.addStateListeners(),this.addEventListeners(),this.updateSelectedFilter(this.dropdownToggleNode)}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners()}},{key:"addEventListeners",value:function(){this.dropdownToggleNode.addEventListener(R,this)}},{key:"removeEventListeners",value:function(){this.dropdownToggleNode.removeEventListener(R,this)}},{key:"addStateListeners",value:function(){var e=this;this.stateUnbinders.push(this.store.on($.SelectedFilterIndex,(function(t){return e.handleSelectedFilterIndexChange(t)})))}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===R&&this.onChange(e)}},{key:"handleSelectedFilterIndexChange",value:function(e){var t,n,r=e.selectedFilterIndex,i=null!=(t=this.filtersList[r])?t:this.filtersList[0];this.selectedOptionNode.innerHTML=(n=i.name)?Zt("All categories")===n?Gt(Qt||(Qt=Tt(['<span class="','" aria-hidden="true">','</span><span class="','" aria-hidden="true">',"</span>"])),en,Zt("Everywhere"),tn,n):Gt(Yt||(Yt=Tt(['<span aria-hidden="true">',"</span>"])),n):""}},{key:"onChange",value:function(e){var t=e.target;this.updateSelectedFilter(t)}},{key:"updateSelectedFilter",value:function(e){var t,n=e.value,r=this.filtersList.findIndex((function(e){return e.url===n}));t=this.store,_t(t,$.SelectedFilterIndex,r)}}]),e}(),rn=["p","us_id","string","description","show-raty0-disclaimer","fromCart"],sn=function(e,t){return t.some((function(t){return r=e,(n=t).key===r.key&&n.value===r.value;var n,r}))},on=function(e,t){return sn(t,e)?e:[].concat(c(e),[t])},an=function(e){return[e.key,e.value].map(encodeURIComponent).join("=")},un=function(e){var t=e.value;return""!==t&&void 0!==t},cn=function(e){return Object.entries(e).map((function(e){var t=X(e,2),n=t[0],r=t[1];return an({key:n,value:r})})).join("&")},hn=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=e.includes(window.location.pathname)&&!e.includes(t)?function(e){var t=new URLSearchParams(e);return Array.from(t).filter((function(e){var t=X(e,2),n=t[0],r=t[1];return n&&r})).map((function(e){var t=X(e,2);return{key:t[0],value:t[1]}}))}(window.location.search):[],o=s.filter((n=rn,function(e){return!n.includes(e.key)})).concat(r).filter(function(e){return function(t){return!sn(t,e)}}(i)).reduce(on,[]).filter(un).map(an).join("&"),a=e.includes("?")?"&":"?";return"".concat(e).concat(o?a:"").concat(o)},ln=["ALL",ct,ht,dt],dn=function(){function e(t,r,i){n(this,e),this.searchFormNode=void 0,this.multiSearchControl=void 0,this.visualSearchControl=void 0,this.stateUnbinders=[],this.baseNode=t,this.store=r,this.props=i,this.searchFormNode=t.querySelector(A),this.multiSearchControl=t.querySelector(w),this.visualSearchControl=t.querySelector(j)}return o(e,[{key:"mount",value:function(){this.addEventListeners(),this.addStateListeners()}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners()}},{key:"addEventListeners",value:function(){this.multiSearchControl&&this.multiSearchControl.addEventListener(U,this),this.searchFormNode.addEventListener(z,this)}},{key:"removeEventListeners",value:function(){this.multiSearchControl&&this.multiSearchControl.removeEventListener(U,this),this.searchFormNode.removeEventListener(z,this)}},{key:"addStateListeners",value:function(){var e=this;this.stateUnbinders.push(this.store.on($.InputPhrase,(function(t){return e.handleInputPhraseChange(t)})))}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===z&&this.onSubmit(e),e.type===U&&this.onMultisearchClick(e)}},{key:"handleInputPhraseChange",value:function(e){var t=e.inputPhrase;this.multiSearchControl&&wt(this.multiSearchControl,0===t.length),this.visualSearchControl&&wt(this.visualSearchControl,0===t.length)}},{key:"onMultisearchClick",value:function(e){e.preventDefault(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=t.location,r=n.pathname,i=n.search,s=n.hash;e!==s&&(t.history.pushState({previousHash:s},t.document.title,"".concat(r).concat(i).concat(e)),t.dispatchEvent(new HashChangeEvent("hashchange")))}(e.currentTarget.hash)}},{key:"onSubmit",value:function(e){var t;e.preventDefault();var n=this.store.inputPhrase.trim(),r=null!=(t=this.props.filters.list[this.store.selectedFilterIndex])?t:{};if(n||!gt(ln,this.store,this.props)||-1!==this.store.activeSuggestionIndex){var i,s=X(kt(this.props.advancedSearchCriterias,this.store.checkedAdvancedSearchCriteriaIds),2),o=s[0],a=s[1],u=[].concat(c(o),c(this.props.staticQueryParameters)),h=a;if(-1!==this.store.activeSuggestionIndex){var v=this.store.suggestions.filter(d)[this.store.activeSuggestionIndex];i=l(v)?v.items[0].url:v.url}else r.url?r.type===dt?i="".concat(r.url,"/").concat(encodeURIComponent(n)):(i=r.url,u.unshift({key:"string",value:n})):(i=this.props.listingPathname,u.unshift({key:"string",value:n}));var f=hn(i,this.props.listingPathname,u,h);window.document.location.assign(f)}}}]),e}(),vn="BLUR",fn="CLEAR",pn="CLICK",gn="INPUT",mn="KEY_ARROW_DOWN",yn="KEY_ARROW_UP",Sn="KEY_ESCAPE",bn="KEY_DELETE",kn="KEY_TAB",En=function(){function e(t,r){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z(),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;n(this,e),this.searchInputNode=void 0,this.clearInputButtonNode=void 0,this.stateUnbinders=[],this.suggesterUnbinders=[],this.onStateInputPhrase=function(e){var t=e.inputPhrase;i.clearInputButtonNode&&wt(i.clearInputButtonNode,!!t)},this.onStateNextPhrase=function(e){var t=e.nextPhrase;i.updateSearchInputValue(t)},this.onSuggesterToggleIsExpanded=function(e){e?i.addGlobalEventListeners():i.removeGlobalEventListeners()},this.onSuggesterClickSuggestionActionIcon=function(){i.focusNode()},this.focusNode=function(){i.searchInputNode.focus()},this.blurNode=function(){i.searchInputNode.blur()},this.onClearInputClick=function(){i.focusNode(),i.updateSearchInputValue(""),i.emitter.emit(fn)},this.handleOnKeydown=function(e){var t={ArrowDown:i.onArrowDownPressAndEmit,ArrowUp:i.onArrowUpPressAndEmit,Escape:i.onEscapePressAndEmit,Delete:i.emitOnDeletePress,Tab:i.emitOnTabPress}[e.key];t&&t(e)},this.emitOnInput=function(e){return i.emitter.emit(gn,e)},this.onBlurAndEmit=function(){i.emitter.emit(vn)},this.emitOnClick=function(){return i.emitter.emit(pn)},this.onArrowDownPressAndEmit=function(e){e.preventDefault(),i.emitter.emit(mn)},this.onArrowUpPressAndEmit=function(e){e.preventDefault(),i.emitter.emit(yn)},this.emitOnTabPress=function(){return i.emitter.emit(kn)},this.emitOnDeletePress=function(){return i.emitter.emit(bn)},this.onEscapePressAndEmit=function(){i.updateSearchInputValue(""),i.emitter.emit(Sn)},this.baseNode=t,this.store=r,this.emitter=s,this.targetWindow=o,this.searchInputNode=t.querySelector(P),this.clearInputButtonNode=t.querySelector(L)}return o(e,[{key:"mount",value:function(e){this.addEventListeners(),this.addStateListeners(),this.addSuggesterListeners(e)}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeGlobalEventListeners(),this.removeStateListeners(),this.removeSuggesterListeners()}},{key:"onUpdate",value:function(e){var t=e.inputPhrase,n=void 0===t?"":t;this.updateSearchInputValue(n)}},{key:"addEventListeners",value:function(){this.searchInputNode.addEventListener(T,this),this.searchInputNode.addEventListener(U,this),this.searchInputNode.addEventListener(F,this),this.searchInputNode.addEventListener(G,this),this.searchInputNode.addEventListener(B,this),this.clearInputButtonNode&&this.clearInputButtonNode.addEventListener(U,this)}},{key:"addGlobalEventListeners",value:function(){this.targetWindow.addEventListener(q,this,!0)}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on($.InputPhrase,this.onStateInputPhrase),this.store.on($.NextPhrase,this.onStateNextPhrase))}},{key:"addSuggesterListeners",value:function(e){this.suggesterUnbinders.push(e.on(H,this.onSuggesterToggleIsExpanded),e.on(Q,this.onSuggesterClickSuggestionActionIcon),e.on(K,this.onSuggesterClickSuggestionActionIcon))}},{key:"removeEventListeners",value:function(){this.searchInputNode.removeEventListener(T,this),this.searchInputNode.removeEventListener(U,this),this.searchInputNode.removeEventListener(F,this),this.searchInputNode.removeEventListener(G,this),this.searchInputNode.removeEventListener(B,this),this.clearInputButtonNode&&this.clearInputButtonNode.removeEventListener(U,this)}},{key:"removeGlobalEventListeners",value:function(){this.targetWindow.removeEventListener(q,this,!0)}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){var t=e.type,n=e.currentTarget;if(t===T&&this.onBlurAndEmit(),t===U&&(n===this.searchInputNode&&this.emitOnClick(),n===this.clearInputButtonNode&&this.onClearInputClick()),t===F){var r=n.value;this.emitOnInput(r),Ct(this.store,r)}t===G&&this.handleOnKeydown(e),t===q&&this.blurNode()}},{key:"updateSearchInputValue",value:function(e){this.searchInputNode.value=e,Ct(this.store,e)}}]),e}();function In(){In=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var s=t&&t.prototype instanceof v?t:v,o=Object.create(s.prototype),a=new N(r||[]);return i(o,"_invoke",{value:E(e,n,a)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var d={};function v(){}function f(){}function p(){}var g={};c(g,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(_([])));y&&y!==t&&n.call(y,o)&&(g=y);var S=p.prototype=v.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function s(i,o,a,u){var c=l(e[i],e,o);if("throw"!==c.type){var h=c.arg,d=h.value;return d&&"object"==r(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){s("next",e,a,u)}),(function(e){s("throw",e,a,u)})):t.resolve(d).then((function(e){h.value=e,a(h)}),(function(e){return s("throw",e,a,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){s(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=I(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,i(S,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},b(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new k(h(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(S),c(S,u,"Generator"),c(S,o,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function wn(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function Ln(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){wn(s,r,i,o,a,"next",e)}function a(e){wn(s,r,i,o,a,"throw",e)}o(void 0)}))}}var Nn,_n,Cn,xn,An=be+" "+st+" "+je+" "+Ue+" "+Te+" "+Re+" "+oe+" "+ae+" "+ue+" "+ce+" "+_e+" "+fe,Pn="mp0t_ji "+we+" mgmw_9u msbw_sk mldj_sk mtag_sk mm2b_sk "+it+" mg9e_2 mj7a_2 mvrt_4 mh36_4 "+Se+" bd1d4f",On=ge+" "+Je+" "+Oe+" "+Be+" chd2o9 chtfmm ch1a2u",jn=de+" "+Se+" "+ge+" "+Xe+" "+Ee+" ch1wyz munh_8",Tn=me+" mpof_z0_s";function Rn(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Rn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}var Un,Bn,Fn,Gn=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Rn(e))&&(r&&(r+=" "),r+=t);return r},Dn="b1kk0",zn=Ee,qn=Ie+" "+Ee+" "+Le+" "+Ne+" mqu1_40 "+rt+" "+nt+" "+Ue+" "+Re+" "+oe+" "+ae+" "+ue+" "+ce+" "+ne+" "+re+" "+ie+" "+se+" "+Ce+" "+it+" "+ge+" "+qe+" "+te+" "+de+" "+pe+" "+He+" "+Ve+" "+ze+" "+Fe+" "+De+" "+Ge+" "+Dn+" "+Je+" mnjl_0 "+$e+" "+Qe+" m9tr_5r mq1m_0 mqm6_0 mp4t_56 mryx_56 _535b5_-9o1L",Mn=le+" "+qe+" "+it+" "+tt+" "+$t+" "+Se+" "+Xe+" "+Jt+" "+Xt+" "+Me+" "+Ze+" "+We+" "+Ke+" "+ot+" mupj_5k _535b5_dApw7",Hn=le+" "+qe+" "+it+" "+tt+" "+$t+" "+Se+" mupj_mm "+Xe+" "+Jt+" "+Xt+" "+Me+" "+Ze+" "+We+" "+Ke+" "+ot,Wn=me+" _535b5_EG11e",Vn=he+" "+Xe+" "+ye+" "+Me+" "+We+" "+Ye+" "+Ke+" "+et+" "+de+" _535b5_iaSxk",Kn=he+" "+Xe+" "+ye+" "+Me+" "+We+" "+Ye+" "+Ke+" "+et+" "+de,Qn=ke+" mg9e_4 mj7a_4 _535b5_CPoMl",Yn=st+" _535b5_sl1f0",Zn=qe+" "+st+" "+Pe+" _535b5_cr-H6",$n="_535b5_J8Mvg",Jn=we+" "+Ae,Xn=Ie+" "+xe,er="m9qz_yq",tr="mgmw_s9",nr="mgmw_3z",rr=ye+" "+ke+" "+ve+" "+Ke+" "+Ze+" "+it+" "+Oe+" mryx_8 munh_56 m3h2_56 _535b5_-NWho",ir=be+" "+st+" "+je+" "+Ue+" "+Te+" "+Re+" "+oe+" "+ae+" "+ue+" "+ce+" "+_e+" "+fe,sr=Ee+" "+nt+" mgn2_13 "+Ae+" "+ve+" "+Ke+" "+Ze,or=qe+" "+ye+" myre_zn "+Me+" "+Ye+" "+We+" mh36_16 _535b5_qQM4V",ar=ye+" myre_8v mwdn_0 "+Ne+" _535b5_CK4Bx",ur=Ie+" "+Ee+" "+de+" "+xe+" "+et+" "+nt+" "+ge+" lsaqd lvg0h mx7m_1 m911_co mefy_co mnyp_co mdwl_co mlkp_3c msbw_2 mldj_2 mtag_2 mm2b_2 "+ye+" m7f5_6m "+ke+" msts_9u "+le+" "+Me+" "+Ze+" "+We+" "+Ke+" _535b5_qR-IH",cr=Ie+" "+Ee+" "+Le+" "+Xe+" "+Ne+" "+rt+" "+nt+" "+je+" "+Ue+" "+Te+" "+Re+" "+oe+" "+ae+" "+ue+" "+ce+" "+ne+" "+re+" "+ie+" "+se+" "+Ce+" "+it+" "+ge+" "+qe+" "+te+" "+de+" "+pe+" "+He+" "+Ve+" "+ze+" "+Fe+" "+De+" "+Ge+" "+Dn+" "+Qe+" "+$e+" "+Pe+" _535b5_8crTO",hr="bnzav "+le+" "+qe+" "+it+" "+tt+" "+$t+" "+He+" "+$e+" "+Ve+" "+Qe+" _535b5_apJT2";function lr(e){return"SMALL"===e.size?Jn:Xn}function dr(e){return"IMAGE"===e.type?function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gt(Bn||(Bn=Tt(['<span data-type="IMAGE" class="','"><img src="','" alt=""></span>'])),Gn($n,n),e.url)}(e,lr(e)):function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gt(Un||(Un=Tt(['<span class="','">',"</span>"])),Gn(n),e.text)}(e,zn,function(e){switch(e.style){case"STRONG":return er;case"PRIMARY":return tr;case"SECONDARY":return nr;default:return""}}(e),lr(e))}function vr(e){var t=e.buttonClassName,n=e.iconClassName,r=e.icon,i=e.dataRole;return Gt(Fn||(Fn=Tt(['<button tabindex="-1" aria-hidden="true" type="button" class="','" data-role="','"><div class="','" style="--url: url(\'',"');\" /></div></button>"])),t,i,n,r)}var fr,pr,gr,mr,yr,Sr,br,kr,Er,Ir,wr=function(e){return e.length?Gt(yr||(yr=Tt(['<div class="','">'," ","</div>"])),at,e.map(dr),Gt(mr||(mr=Tt(['<button type="button" class="','" aria-label="','" data-role="','"><img src="','" class="','" alt="" /></button>'])),cr,Zt("Check details concerning ads"),y,"https://a.allegroimg.com/original/34a646/639f929246af8f23da49cf64e9d7/action-common-information-33306995c6",hr)):""};var Lr=function(){function e(t,r,i){var s=this;n(this,e),this.inputElement=void 0,this.labelElement=void 0,this.stateUnbinders=[],this.onCheckedAdvancedSearchCriteriaIds=function(e){var t=e.checkedAdvancedSearchCriteriaIds;s.inputElement.checked=t.includes(s.itemId)},this.baseNode=t,this.itemId=r,this.store=i,this.inputElement=t.querySelector("input"),this.labelElement=t.querySelector("label")}return o(e,[{key:"mount",value:function(){this.addEventListeners(),this.addStateListeners()}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners()}},{key:"addEventListeners",value:function(){this.labelElement.addEventListener(U,this)}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on($.CheckedAdvancedSearchCriteriaIds,this.onCheckedAdvancedSearchCriteriaIds))}},{key:"removeEventListeners",value:function(){this.labelElement.removeEventListener(U,this)}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===U&&this.onClick(e)}},{key:"onClick",value:function(e){var t=this;e.preventDefault();var n=this.store.checkedAdvancedSearchCriteriaIds,r=this.inputElement.checked?n.filter((function(e){return e!==t.itemId})):[].concat(c(n),[this.itemId]);At(this.store,r)}}]),e}();function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function _r(e){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_r(e)}function Cr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function xr(e,t,n){return xr=Cr()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Nr(i,n.prototype),i},xr.apply(null,arguments)}function Ar(e){var t="function"==typeof Map?new Map:void 0;return Ar=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return xr(e,arguments,_r(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Nr(r,e)},Ar(e)}var Pr=function(){return window.opbox.edge},Or=new AbortController,jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nr(e,t)}(a,e);var t,i,s=(t=a,i=Cr(),function(){var e,n=_r(t);if(i){var s=_r(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){var e;return n(this,a),(e=s.call(this,"Request has been aborted")).name="RequestAbortedError",e}return o(a)}(Ar(Error));function Tr(e){return Rr.apply(this,arguments)}function Rr(){return Rr=Ln(In().mark((function e(t){var n,r,i=arguments;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:Pr(),Or.abort(),Or=new AbortController,r=Or.signal,e.prev=4,e.next=7,n.get("/search-suggester/suggestions?".concat(cn(t)),{withCredentials:!0,signal:Or.signal,headers:{accept:"application/vnd.allegro.internal.v7+json"}});case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),!r.aborted){e.next=14;break}throw new jr;case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[4,10]])}))),Rr.apply(this,arguments)}var Ur="aria-selected",Br=function(){function e(t,r,i,s){n(this,e),this.anchorNode=void 0,this.store=r,this.component=i,this.emitter=s,this.anchorNode=t.querySelector('a[role="option"]')}return o(e,[{key:"mount",value:function(){this.addEventListeners()}},{key:"unmount",value:function(){this.removeEventListeners()}},{key:"addEventListeners",value:function(){this.anchorNode&&this.anchorNode.addEventListener(U,this)}},{key:"removeEventListeners",value:function(){this.anchorNode&&this.anchorNode.removeEventListener(U,this)}},{key:"handleEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget===this.anchorNode&&this.onItemClick()}},{key:"onItemClick",value:function(){this.emitter.emit(V,this.component)}},{key:"markActive",value:function(){this.anchorNode&&(this.anchorNode.setAttribute(Ur,"true"),xt(this.store,""))}},{key:"markInactive",value:function(){this.anchorNode&&this.anchorNode.removeAttribute(Ur)}}]),e}(),Fr="aria-selected",Gr=function(){function e(t,r,i,s){n(this,e),this.removeButtonNode=void 0,this.rewriteButtonNode=void 0,this.showDSAInfoButtonNode=void 0,this.anchorNode=t,this.store=r,this.component=i,this.emitter=s,this.rewriteButtonNode=t.querySelector(_),this.removeButtonNode=t.querySelector(N),this.showDSAInfoButtonNode=t.querySelector(C)}return o(e,[{key:"mount",value:function(){this.addEventListeners()}},{key:"unmount",value:function(){this.removeEventListeners()}},{key:"addEventListeners",value:function(){this.anchorNode.addEventListener(U,this),this.removeButtonNode&&this.removeButtonNode.addEventListener(U,this),this.rewriteButtonNode&&this.rewriteButtonNode.addEventListener(U,this),this.showDSAInfoButtonNode&&this.showDSAInfoButtonNode.addEventListener(U,this)}},{key:"removeEventListeners",value:function(){this.anchorNode.removeEventListener(U,this),this.removeButtonNode&&this.removeButtonNode.removeEventListener(U,this),this.rewriteButtonNode&&this.rewriteButtonNode.removeEventListener(U,this),this.showDSAInfoButtonNode&&this.showDSAInfoButtonNode.removeEventListener(U,this)}},{key:"handleEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget===this.anchorNode&&this.onItemClick(),e.currentTarget===this.removeButtonNode&&this.onRemoveButtonClick(),e.currentTarget===this.rewriteButtonNode&&this.onRewriteButtonClick(),e.currentTarget===this.showDSAInfoButtonNode&&this.onShowDSAInfoButtonClick(e)}},{key:"onItemClick",value:function(){this.emitter.emit(W,this.component)}},{key:"onRemoveButtonClick",value:function(){this.emitter.emit(Q,this.component,this.store.inputPhrase)}},{key:"onRewriteButtonClick",value:function(){this.emitter.emit(K,this.component,this.store.inputPhrase)}},{key:"onShowDSAInfoButtonClick",value:function(e){var t;e.stopPropagation(),t=(this.component.tracking||{}).dsaId,window.opbox.plugin.get("xd").then((function(e){return(0,e.showModal)([t])})).catch((function(e){window.opbox.reportError(e)}))}},{key:"markActive",value:function(){this.anchorNode.setAttribute(Fr,"true"),xt(this.store,this.component.completionText||"")}},{key:"markInactive",value:function(){this.anchorNode.removeAttribute(Fr)}}]),e}(),Dr="aria-expanded",zr=[ut,ct,ht,"WAREHOUSE",lt,ft],qr=[ut,ct,ft],Mr=[lt],Hr=[dt,vt,ft,pt];function Wr(e){switch(e){case dt:return"sellers";case pt:return"charity-organizations";case vt:case ft:return"fundraising-campaigns";default:return"all"}}function Vr(e,t){var n=t.filters.list[e.selectedFilterIndex];if(!ee(n))return{};var r,i=n.type,s=n.id,o=n.name,a=zr.includes(i),u=qr.includes(i),c=Mr.includes(i),h=Hr.includes(i);switch(i){case"CHARITY_ORGANIZATION":r="charity-organization";break;case"DEPARTMENT":r="category";break;default:r=i.toLowerCase()}return Object.assign(Object.assign(Object.assign(Object.assign({},a?{scope:r}:{}),u?{"scope-value":s}:{}),c?{"scope-value":o}:{}),h?{types:Wr(i)}:{})}var Kr=function(){function e(t,r,i,s){var o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Z(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:window;n(this,e),this.suggesterNode=void 0,this.isExpanded=!1,this.suggestionItems=[],this.advancedSearchCriteriaItems=[],this.stateUnbinders=[],this.suggesterUnbinders=[],this.searchInputUnbinders=[],this.onStateSuggestions=function(){o.render()},this.onSearchInputBlur=function(){o.store.activeSuggestionIndex=-1},this.onSearchInputClear=function(){o.fetch()},this.onSearchInputClick=function(){o.isExpanded||o.fetch()},this.onSearchInput=function(e){o.fetch(e)},this.onSearchInputTabPress=function(){o.destroy()},this.onSearchInputEscapePress=function(){o.destroy()},this.onSearchInputArrowUpPress=function(){o.markPreviousSuggestion()},this.onSearchInputArrowDownPress=function(){o.markNextSuggestion()},this.onSearchInputDeletePress=function(){if(-1!==o.store.activeSuggestionIndex){var e=o.store.suggestions.filter(d)[o.store.activeSuggestionIndex];l(e)||o.deleteSuggestion(e)}},this.fetch=Ln(In().mark((function e(){var t,n,r=arguments;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:o.store.inputPhrase,!gt(yt,o.store,o.props)&&!mt(t,o.props)){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return n=Object.assign(Object.assign({query:t},o.props.enableSuggesterHistory?{history:!0}:{}),Vr(o.store,o.props)),e.abrupt("return",Tr(n).then((function(e){var n=e.status,r=e.data,i=r.suggestions,s=r.tracking;o.store.tracking=s,o.store.suggestions=i,o.store.activeSuggestionIndex=-1,o.emitter.emit(M,n,t)})).catch((function(e){e instanceof jr||(o.store.tracking={},o.store.suggestions=[],o.store.activeSuggestionIndex=-1,o.emitter.emit(M,e&&e.status||e,t))})));case 5:case"end":return e.stop()}}),e)}))),this.onToggleExpanded=function(e){o.isExpanded=e},this.onClickSuggestion=function(e){var t=X(kt(o.props.advancedSearchCriterias,o.store.checkedAdvancedSearchCriteriaIds),2),n=t[0],r=t[1],i=[].concat(c(n),c(o.props.staticQueryParameters)),s=hn(e.url,o.props.listingPathname,i,r);o.targetWindow.document.location.assign(s)},this.onClickHorizontalList=function(e){o.targetWindow.document.location.assign(e.items[0].url)},this.onClickRewriteSuggestion=function(e){o.fetch(e.completionText),xt(o.store,e.completionText||"")},this.onClickRemoveSuggestion=function(e){o.deleteSuggestion(e)},this.deleteSuggestion=function(e){var t=e.history,n=t.removable,r=t.id;n&&r&&function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pr()).delete("/search-history/".concat(e),{withCredentials:!0,disableDefaultHeaders:!0})}(r).then((function(e){var t=e.status;t>=200&&t<300&&o.fetch()})).catch(Function.prototype)},this.baseNode=t,this.store=r,this.props=i,this.searchInput=s,this.emitter=a,this.targetWindow=u,this.suggesterNode=t.querySelector(O)}return o(e,[{key:"mount",value:function(){this.addStateListeners(),this.addSuggesterListeners(),this.addSearchInputListeners()}},{key:"unmount",value:function(){this.removeStateListeners(),this.removeSuggesterListeners(),this.removeSearchInputListeners(),this.removeGlobalEventListeners()}},{key:"onUpdate",value:function(e){var t=this,n=e.inputPhrase,r=void 0===n?"":n,i=e.advancedSearchCriterias,s=void 0===i?[]:i;""===r&&this.destroy(),At(this.store,s.filter((function(e){return t.props.advancedSearchCriterias.map((function(e){return e.id})).includes(e.id)})).filter((function(e){return e.checked})).map((function(e){return e.id})))}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on($.Suggestions,this.onStateSuggestions))}},{key:"addSuggesterListeners",value:function(){this.suggesterUnbinders.push(this.emitter.on(H,this.onToggleExpanded),this.emitter.on(W,this.onClickSuggestion),this.emitter.on(V,this.onClickHorizontalList),this.emitter.on(K,this.onClickRewriteSuggestion),this.emitter.on(Q,this.onClickRemoveSuggestion))}},{key:"addSearchInputListeners",value:function(){this.searchInputUnbinders.push(this.searchInput.emitter.on(vn,this.onSearchInputBlur),this.searchInput.emitter.on(fn,this.onSearchInputClear),this.searchInput.emitter.on(pn,this.onSearchInputClick),this.searchInput.emitter.on(gn,this.onSearchInput),this.searchInput.emitter.on(kn,this.onSearchInputTabPress),this.searchInput.emitter.on(Sn,this.onSearchInputEscapePress),this.searchInput.emitter.on(yn,this.onSearchInputArrowUpPress),this.searchInput.emitter.on(mn,this.onSearchInputArrowDownPress),this.searchInput.emitter.on(bn,this.onSearchInputDeletePress))}},{key:"addGlobalEventListeners",value:function(){this.targetWindow.addEventListener(U,this)}},{key:"removeGlobalEventListeners",value:function(){this.targetWindow.removeEventListener(U,this)}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"removeSearchInputListeners",value:function(){this.searchInputUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===U&&this.onGlobalClick(e)}},{key:"render",value:function(){var e,t;this.unmountSuggestions(),this.unmountAdvancedSearchCriteria(),this.suggesterNode.innerHTML=(e=this.props,t=this.store,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.length?new Ft([""].concat(c(Array(e.length-1).fill(t)),[""]),e):""}([].concat(c(t.suggestions.map((function(t){return function(e,t){switch(e.type){case"DIVIDER":return Gt(Sr||(Sr=Tt(['<div class="','"><hr class="','" /><span class="','">lub</span><hr class="','" /></div>'])),rr,ir,sr,ir);case"LABEL":return i=e.view.labelItems,Gt(br||(br=Tt(['<div data-role="','" class="','"><div class="','">',"</div></div>"])),"label",Kn,Zn,i.map(dr));case"SUGGESTION":return function(e,t){var n=e.url,r=e.view,i=e.tracking,s=r.image,o=!!s,a=o&&"AUTO"!==s.size,u=o&&"LARGE"===s.size?"_535b5_70jzr":"_535b5_5HBqT",c=i||{},h=c.type,l=c.dsaId,d=function(e){return e.length?Gt(kr||(kr=Tt(['<div class="','">',"</div>"])),at,e.map(dr)):""},v="PREMIUMAD"===h&&l?wr:d,m=o?Gt(Er||(Er=Tt(['<img alt="" src="','" class="','" />'])),s.url,Gn("m3h2_8",Y({},u,a))):"";return Gt(Ir||(Ir=Tt(['<a role="option" href="','" class="','" data-role="','">'," ",'<div class="','">'," ","</div></a>"])),n,Gn(Vn,Qn),g,m,function(e,t){var n,r=e.history,i=e.completionText;return r.removable?(n=t.enableSuggestionRemovalButtonOnHover,vr({icon:"https://a.allegroimg.com/original/34f3f5/bf439aab49d0a78bcd7501d51697/action-common-x-6c70096572",buttonClassName:Gn(qn,n&&Wn),iconClassName:Hn,dataRole:f})):i&&t.enableRewriteSuggestionButton?vr({icon:"https://a.allegroimg.com/original/3469d1/e5baae674c14b193801643097f91/action-common-arrow-1d58018082",iconClassName:Mn,buttonClassName:qn,dataRole:p}):""}(e,t),Yn,d(r.labelItems),r.subLabelItems?v(r.subLabelItems):"")}(e,t);case"HORIZONTAL_LIST":return r=(n=e).items.map((function(e){var t="";switch(e.view.type){case"IMAGE":t=function(e){return Gt(fr||(fr=Tt(['<img class="','" style="aspect-ratio:','" src="','" alt="" />'])),"mse2_24",e.aspect,e.url)}(e.view);break;case"TEXT":t=dr(e.view);break;default:return""}return Gt(pr||(pr=Tt(['<a role="option" class="','" href="','">',"</a>"])),ur,e.url,t)})),Gt(gr||(gr=Tt(['<div data-role="','" class="','">','<div class="','">',"</div></div>"])),m,or,dr(n.label),ar,r);default:return""}var n,r,i}(t,e)}))),c(function(e,t){return bt(t,e)?[]:[t.suggestions.length?Gt(Nn||(Nn=Tt(['<hr class="','" />'])),An):"",e.advancedSearchCriterias.map((function(e){return function(e,t){var n=e.id,r=e.label,i=e.badge,s="searchInDescriptionChange"===n;return Gt(Cn||(Cn=Tt(['<div data-role="','" class="','"><input type="checkbox" autocomplete="off" id="','" class="','" ',' /><label for="','" class="','">'," ","</label></div>"])),v,s?Tn:"",n,On,t.checkedAdvancedSearchCriteriaIds.includes(n)?Gt(xn||(xn=Tt(["checked"]))):"",n,jn,r,function(e){if(!e)return"";var t=e.textColor,n=e.backgroundColor,r=e.text;return Gt(_n||(_n=Tt(['<span class="','" style="color: ',"; background-color: ",';">',"</span>"])),Pn,t,n,r)}(i))}(e,t)}))]}(e,t))),"")).toString(),this.mountSuggestions(),this.mountAdvancedSearchCriteria(),this.markSuggesterAccordingly()}},{key:"destroy",value:function(){this.unmountSuggestions(),this.unmountAdvancedSearchCriteria(),this.markSuggesterInactive(),this.suggesterNode.innerHTML=""}},{key:"markSuggestionByStepOf",value:function(e){var t=this.suggestionItems.length;if(0!==t){var n,r=this.store.activeSuggestionIndex,i=((Math.max(r,1===e?-1:0)+e)%t+t)%t;this.toggleActiveSuggestions(r,i),n=this.store,_t(n,$.ActiveSuggestionIndex,i)}}},{key:"markPreviousSuggestion",value:function(){this.markSuggestionByStepOf(-1)}},{key:"markNextSuggestion",value:function(){this.markSuggestionByStepOf(1)}},{key:"toggleActiveSuggestions",value:function(e,t){-1!==e&&this.suggestionItems[e].markInactive(),this.suggestionItems[t].markActive()}},{key:"mountSuggestions",value:function(){var e=this,t=this.suggesterNode.childNodes;Array.from(t).filter((function(e){return"A"===e.nodeName||e.dataset.role===m})).forEach((function(t,n){var r=e.store.suggestions.filter(d)[n],i=null;"HORIZONTAL_LIST"===r.type&&(i=new Br(t,e.store,r,e.emitter)),"SUGGESTION"===r.type&&(i=new Gr(t,e.store,r,e.emitter)),i&&(i.mount(),e.suggestionItems.push(i))}))}},{key:"mountAdvancedSearchCriteria",value:function(){var e=this;this.suggesterNode.querySelectorAll(b).forEach((function(t,n){var r=new Lr(t,e.props.advancedSearchCriterias[n].id,e.store);r.mount(),e.advancedSearchCriteriaItems.push(r)}))}},{key:"unmountSuggestions",value:function(){this.suggestionItems.forEach((function(e){return e.unmount()})),this.suggestionItems=[]}},{key:"unmountAdvancedSearchCriteria",value:function(){this.advancedSearchCriteriaItems.forEach((function(e){return e.unmount()})),this.advancedSearchCriteriaItems=[]}},{key:"markSuggesterAccordingly",value:function(){0===this.store.suggestions.length&&bt(this.store,this.props)?this.markSuggesterInactive():this.isExpanded||this.markSuggesterActive()}},{key:"markSuggesterActive",value:function(){this.suggesterNode.setAttribute(Dr,"true"),this.emitter.emit(H,!0,this.store.inputPhrase),this.addGlobalEventListeners()}},{key:"markSuggesterInactive",value:function(){this.suggesterNode.setAttribute(Dr,"false"),this.emitter.emit(H,!1,this.store.inputPhrase),this.removeGlobalEventListeners()}},{key:"onGlobalClick",value:function(e){this.isExpanded&&null===e.target.closest([O,P,L,x].join(","))&&this.destroy()}}]),e}(),Qr="opbox-search-history",Yr=function(){function e(t,r,i){var s=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.localStorage;n(this,e),this.searchFormNode=void 0,this.suggesterUnbinders=[],this.onSubmit=function(){var e=s.store,t=e.activeSuggestionIndex,n=e.suggestions;if(-1===t)s.saveEntryFromStore();else{var r=n.filter(d)[t];h(r)&&s.saveEntryFromSuggestion(r)}},this.onSuggesterClickSuggestion=function(e){s.saveEntryFromSuggestion(e)},this.getFilterScopeData=function(){var e=s.props.filters.list[s.store.selectedFilterIndex];return{scope:"DEPARTMENT"===e.type?"CATEGORY":e.type,scopeValue:e.type===lt?e.name:e.id}},this.saveEntryFromSuggestion=function(e){var t=e.action;if(e.history.save&&t){var n=Object.assign({action:t,userQuery:null,id:e.history.id},s.getFilterScopeData());s.saveEntry(n)}},this.baseNode=t,this.store=r,this.props=i,this.localStorage=o,this.searchFormNode=t.querySelector(A)}return o(e,[{key:"mount",value:function(e){this.postHistoryEntry(),this.addEventListeners(),this.addSuggesterListeners(e)}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeSuggesterListeners()}},{key:"addSuggesterListeners",value:function(e){this.suggesterUnbinders.push(e.on(W,this.onSuggesterClickSuggestion))}},{key:"addEventListeners",value:function(){this.searchFormNode.addEventListener(z,this)}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"removeEventListeners",value:function(){this.searchFormNode.removeEventListener(z,this)}},{key:"handleEvent",value:function(e){e.type===z&&this.onSubmit()}},{key:"saveEntryFromStore",value:function(){var e=Object.assign({userQuery:this.store.inputPhrase},this.getFilterScopeData());this.saveEntry(e)}},{key:"saveEntry",value:function(e){e.scope&&(e.action||e.userQuery)&&this.localStorage.setItem(Qr,JSON.stringify(e))}},{key:"getEntry",value:function(){return JSON.parse(this.localStorage.getItem(Qr)||"null")}},{key:"removeEntry",value:function(){this.localStorage.removeItem(Qr)}},{key:"postHistoryEntry",value:function(){var e=this,t=this.getEntry();t&&function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pr()).post("/search-history",e,{withCredentials:!0,headers:{"content-type":"application/vnd.allegro.internal.v2+json"}})}(t).then((function(){return e.removeEntry()}))}}]),e}(),Zr="mj6k_96 "+Ye+" mvrt_24_l",$r=Be+" "+$e+" _535b5_ujp-s",Jr=function(){function e(t,r,i){var s=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;n(this,e),this.logoWrapperNode=void 0,this.suggesterNode=void 0,this.multiSearchNode=void 0,this.visualSearchNode=void 0,this.removeQueryNode=void 0,this.searchInputUnbinders=[],this.suggesterUnbinders=[],this.timeoutId=0,this.addGlobalEventListeners=function(){s.targetWindow.addEventListener(U,s)},this.addSuggesterListeners=function(e){s.suggesterUnbinders.push(e.on(H,s.onSuggesterToggleIsExpanded))},this.removeGlobalEventListeners=function(){s.targetWindow.removeEventListener(U,s)},this.onSuggesterToggleIsExpanded=function(e){e?s.addGlobalEventListeners():s.removeGlobalEventListeners()},this.onSearchInputClick=function(){s.targetWindow.clearTimeout(s.timeoutId),s.hideLogo(),s.timeoutId=setTimeout((function(){s.showSuggester(),s.showMultiSearch(),s.showVisualSearch(),s.showRemoveQuery()}),200)},this.showLogo=function(){Et(s.logoWrapperNode,!1,c($r.split(" "))),Et(s.logoWrapperNode,!0,c(Zr.split(" ")))},this.hideLogo=function(){Et(s.logoWrapperNode,!0,c($r.split(" "))),Et(s.logoWrapperNode,!1,c(Zr.split(" ")))},this.showSuggester=function(){It(s.suggesterNode,!0)},this.hideSuggester=function(){It(s.suggesterNode,!1)},this.showMultiSearch=function(){s.multiSearchNode&&!s.store.inputPhrase&&wt(s.multiSearchNode,!0)},this.hideMultiSearch=function(){s.multiSearchNode&&wt(s.multiSearchNode,!1)},this.showVisualSearch=function(){s.visualSearchNode&&!s.store.inputPhrase&&wt(s.visualSearchNode,!0)},this.hideVisualSearch=function(){s.visualSearchNode&&wt(s.visualSearchNode,!1)},this.showRemoveQuery=function(){s.store.inputPhrase&&s.removeQueryNode&&wt(s.removeQueryNode,!0)},this.hideRemoveQuery=function(){s.removeQueryNode&&wt(s.removeQueryNode,!1)},this.baseNode=t,this.store=r,this.searchInput=i,this.targetWindow=o,this.logoWrapperNode=t.querySelector(I),this.suggesterNode=t.querySelector(O),this.multiSearchNode=t.querySelector(w),this.visualSearchNode=t.querySelector(j),this.removeQueryNode=t.querySelector(L)}return o(e,[{key:"mount",value:function(e){this.addSearchInputListeners(),this.addSuggesterListeners(e),this.hideSuggester()}},{key:"unmount",value:function(){this.removeSearchInputListeners(),this.removeSuggesterListeners(),this.removeGlobalEventListeners()}},{key:"addSearchInputListeners",value:function(){this.searchInputUnbinders.push(this.searchInput.emitter.on(pn,this.onSearchInputClick))}},{key:"removeSearchInputListeners",value:function(){this.searchInputUnbinders.forEach((function(e){return e()}))}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===U&&this.onGlobalClick(e)}},{key:"onGlobalClick",value:function(e){null===e.target.closest([O,P,L,x].join(","))&&(this.targetWindow.clearTimeout(this.timeoutId),this.showLogo(),this.hideSuggester(),this.hideMultiSearch(),this.hideVisualSearch(),this.hideRemoveQuery())}}]),e}(),Xr=function(){function e(t){var r=this,i=t.baseNode,s=t.props;n(this,e),this.baseNode=void 0,this.props=void 0,this.store=void 0,this.searchInput=void 0,this.searchForm=void 0,this.suggester=void 0,this.filters=void 0,this.history=void 0,this.logo=void 0,this.analyticsDispatcher=void 0,this.onUpdate=function(e){r.searchInput.onUpdate(e),r.suggester.onUpdate(e)},this.baseNode=i,this.props=s,this.store=new J(s),this.searchInput=new En(i,this.store),this.searchForm=new dn(i,this.store,s),this.suggester=new Kr(i,this.store,s,this.searchInput),this.filters=new nn(i,this.store,s),s.enableSuggesterHistory&&(this.history=new Yr(i,this.store,s)),s.enableLogo&&(this.logo=new Jr(i,this.store,this.searchInput)),this.analyticsDispatcher=new jt(i,this.store,s)}return o(e,[{key:"onMount",value:function(){this.analyticsDispatcher.mount(this.suggester.emitter),this.props.enableSuggesterHistory&&this.history.mount(this.suggester.emitter),this.props.enableLogo&&this.logo.mount(this.suggester.emitter),this.searchInput.mount(this.suggester.emitter),this.searchForm.mount(),this.filters.mount(),this.suggester.mount()}},{key:"onUnmount",value:function(){this.analyticsDispatcher.unmount(),this.props.enableSuggesterHistory&&this.history.unmount(),this.props.enableLogo&&this.logo.unmount(),this.searchInput.unmount(),this.searchForm.unmount(),this.filters.unmount(),this.suggester.unmount()}}]),e}();window.opbox.component.register({prototypeName:"allegro.metrumHeader.search",clientImplementationVersion:"b6c"},Xr);var ei=window;for(var ti in t)ei[ti]=t[ti];t.__esModule&&Object.defineProperty(ei,"__esModule",{value:!0})}();
//# sourceMappingURL=index-pl-PL_5fed32da.js.map