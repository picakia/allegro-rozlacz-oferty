var t={d(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o(t,e){return{}.hasOwnProperty.call(t,e)}},e={};function i(t){var e,n,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=i(t[e]))&&(o&&(o+=" "),o+=n);else for(e in t)t[e]&&(o&&(o+=" "),o+=e);return o}t.d(e,{a:()=>M});const n=function(){for(var t,e,n=0,o="";n<arguments.length;)(t=arguments[n++])&&(e=i(t))&&(o&&(o+=" "),o+=e);return o},o=(t,e)=>window.innerWidth>=768?t:e,s="msbw_2",r="mldj_2",h="mtag_2",a="mm2b_2",l="mjyo_6x",c="mgmw_wo",m="mgmw_9u",d="mp0t_0a",p="mgn2_14",u="mse2_40",b="mqu1_21",v="mp4t_0",f="mryx_0",_="munh_0",g="m3h2_0",y="meqh_en",C="mli8_k4",w="msa3_z4",N=l+" mjb5_w6 "+s+" "+r+" "+h+" "+a+" "+c+" m7er_k4 tify42 msts_v4 tinmw4 tidkhk tipyfw mp7g_q5",x="mg9e_16 mvrt_16 mj7a_16 mh36_16 "+p+" "+d+" "+b+" "+c+" "+C,P=b+" m9qz_yq "+p+" "+v+" mryx_8 "+m,E=v+" "+g+" "+f+" "+_+" "+m;class k{constructor({container:t,title:e,content:i}){this.container=void 0,this.element=void 0,this.title=void 0,this.content=void 0,this.render=()=>{const t=document.createElement("div"),e=document.createElement("h6"),i=document.createElement("span");t.className=x,e.className=P,e.textContent=this.title,i.className=E,i.textContent=this.content,t.appendChild(e),t.appendChild(i),this.container.appendChild(t),this.element=t},this.destroy=()=>{this.element&&(this.container.removeChild(this.element),this.element=null)},this.container=t,this.title=e,this.content=i,this.element=null}}const A=p+" "+d+" m9qz_yp mp7g_oh "+u+" mqu1_40 mtsp_ib "+C+" "+v+" "+g+" "+f+" "+_+" m911_5r mefy_5r mnyp_5r mdwl_5r "+s+" "+r+" "+h+" "+a+" mqvr_2 "+w+" mqen_m6 "+y+" m0qj_5r msts_n7 mg9e_0 mj7a_0 mjir_sv m2ha_2 mjt1_n2 btfbp "+m+" m8qd_ie mrmn_qo mrhf_u8 m31c_kb m0ux_fp byvub m0t1_f9 mvrt_0 mh36_0",q=l+" "+u+" "+y+" "+w+" m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 mhd5_0m ivrkk _02ea3_YHoKV";class L{constructor({container:t,boxName:e,onClose:i}){this.container=void 0,this.boxName=void 0,this.element=void 0,this.onClose=void 0,this.render=()=>{const t=document.createElement("button"),e=document.createElement("img");t.setAttribute("aria-label","close"),t.setAttribute("type","button"),t.setAttribute("data-analytics-category","allegro.product.edu.tip"),t.setAttribute("data-box-name",this.boxName),t.setAttribute("data-analytics-interaction",""),t.setAttribute("data-analytics-interaction-label","close"),t.setAttribute("data-analytics-interaction-value",this.boxName),t.className=A,t.addEventListener("click",this.onClose),e.setAttribute("src","https://a.allegroimg.com/original/34f3f5/bf439aab49d0a78bcd7501d51697/action-common-x-6c70096572.svg"),e.setAttribute("aria-hidden","true"),e.setAttribute("alt",""),e.className=q,t.appendChild(e),this.element=t,this.container.appendChild(this.element)},this.destroy=()=>{this.element&&(this.element.removeEventListener("click",this.onClose),this.container.removeChild(this.element),this.element=null)},this.container=t,this.boxName=e,this.onClose=i,this.element=null}}const T={topLeft:"ti1xd0",topCenter:"tiuz97",topRight:"ti14r5",bottomLeft:"tinqkc",bottomCenter:"tis473",bottomRight:"ti9uxl",leftTop:"ti1go3",leftCenter:"tiusj8",leftBottom:"tikgfo",rightTop:"ti11a2",rightCenter:"ti4bv6",rightBottom:"ti17kv"};class j{constructor({container:t,title:e,content:i,desktopPosition:s,mobilePosition:r,boxName:h,onClose:a}){this.container=void 0,this.element=null,this.body=null,this.close=null,this.title=void 0,this.content=void 0,this.boxName=void 0,this.onClose=void 0,this.desktopPosition=void 0,this.mobilePosition=void 0,this.positionArrow=()=>{const t=o(this.desktopPosition,this.mobilePosition),e=n([N,T[t]]);this.element&&this.element.className!==e&&(this.element.className=e)},this.onResize=()=>{this.positionArrow()},this.render=()=>{this.element=document.createElement("div"),this.close=new L({container:this.element,boxName:this.boxName,onClose:this.onClose}),this.body=new k({container:this.element,title:this.title,content:this.content}),this.close.render(),this.body.render(),this.positionArrow(),this.container.appendChild(this.element)},this.destroy=()=>{this.close&&(this.close.destroy(),this.close=null),this.body&&(this.body.destroy(),this.body=null),this.element&&(this.element.remove(),this.element=null)},this.desktopPosition=s,this.mobilePosition=r,this.container=t,this.title=e,this.content=i,this.boxName=h,this.onClose=a}}const B="m31c_d8 mp7g_f6 mp5q_jr m0ux_0f _02ea3_dXEpR",S=t=>{throw Error("Unknown option - no handler implemented")},R=(t,e)=>Math.abs(e-t)>=.5;class I{constructor({title:t,content:e,desktopPosition:i,mobilePosition:o,anchorSelector:s,dynamicAnchorSelector:r,eduTipPreferencesKey:h,baseNode:a,insertInPlace:l}){this.tipContainer=null,this.tipElement=null,this.dynamicAnchorElement=void 0,this.title=void 0,this.content=void 0,this.desktopPosition=void 0,this.mobilePosition=void 0,this.anchorSelector=void 0,this.eduTipPreferencesKey=void 0,this.baseNode=void 0,this.boxName=void 0,this.currentTop=0,this.currentLeft=0,this.animationHandler=null,this.observer=null,this.renderedBefore=!1,this.insertInPlace=!1,this.repositionElement=()=>{this.positionTip(),this.tipElement&&this.tipElement.onResize()},this.tick=()=>{if(!this.isAnchorVisible())return this.destroy(),void this.start();this.repositionElement(),this.animationHandler=window.requestAnimationFrame(this.tick)},this.destroy=()=>{this.removeEventListeners(),this.tipElement&&(this.tipElement.destroy(),this.tipElement=null,this.renderedBefore=!1),this.tipContainer&&this.tipContainer.remove()},this.close=()=>{this.destroy(),window.opbox.preferences.set(this.eduTipPreferencesKey,!1)},this.render=()=>{this.tipContainer=document.createElement("div"),this.tipElement=new j({container:this.tipContainer,title:this.title,content:this.content,desktopPosition:this.desktopPosition,mobilePosition:this.mobilePosition,boxName:this.boxName,onClose:this.close}),this.tipElement.render(),this.renderedBefore||window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.baseNode,label:"show",value:this.boxName}),this.tipContainer.className=n([B,"mj6k_n7"]),this.tipContainer.setAttribute("data-role","edu-tip"),this.tipContainer.setAttribute("data-nosnippet",""),this.insertInPlace?this.baseNode.appendChild(this.tipContainer):document.body.appendChild(this.tipContainer),this.positionTip(),this.attachEventListeners(),this.tipContainer.className=n([B,"mj6k_96"]),this.renderedBefore=!0},this.title=t,this.content=e,this.desktopPosition=i,this.mobilePosition=o,this.anchorSelector=s,this.eduTipPreferencesKey=h,this.baseNode=a,this.boxName=a.getAttribute("data-box-name")||"unknown",this.dynamicAnchorElement=r&&"string"==typeof r?document.querySelector(r):null,this.insertInPlace=l}setTopPosition(t){const e=R(t,this.currentTop);this.tipContainer&&e&&(this.currentTop=t,this.tipContainer.style.top=t+"px")}setLeftPosition(t){const e=R(t,this.currentLeft);this.tipContainer&&e&&(this.currentLeft=t,this.tipContainer.style.left=t+"px")}positionTip(){const t=document.querySelector(this.anchorSelector);if(!t||!this.tipContainer)return;const e=t.getBoundingClientRect(),i=this.tipContainer.getBoundingClientRect(),n=this.currentTop-i.top,s=this.currentLeft-i.left,r=o(this.desktopPosition,this.mobilePosition);this.setTopPosition(n+((t,e,i)=>{switch(t){case"topLeft":case"topCenter":case"topRight":return e.top-i.height-16;case"bottomLeft":case"bottomCenter":case"bottomRight":return e.top+e.height+16;case"rightTop":case"leftTop":return e.top;case"rightCenter":case"leftCenter":return e.top+e.height/2-i.height/2;case"rightBottom":case"leftBottom":return e.top+e.height-i.height;default:S()}return S()})(r,e,i)),this.setLeftPosition(s+((t,e,i)=>{switch(t){case"topLeft":case"bottomLeft":return e.left;case"topCenter":case"bottomCenter":return e.left+e.width/2-i.width/2;case"topRight":case"bottomRight":return e.left+e.width-i.width;case"rightTop":case"rightCenter":case"rightBottom":return e.left+e.width+16;case"leftTop":case"leftCenter":case"leftBottom":return e.left-i.width-16;default:S()}return S()})(r,e,i))}isAnchorVisible(){const t=document.querySelector(this.anchorSelector);if(null===t)return!1;const e=t.getBoundingClientRect();return 0!==e.height&&0!==e.width}removeEventListeners(){null!==this.animationHandler&&(window.cancelAnimationFrame(this.animationHandler),this.animationHandler=null)}attachEventListeners(){this.animationHandler=window.requestAnimationFrame(this.tick)}start(){const t=document.querySelector(this.anchorSelector);if(t)this.observeIntersection(t);else if(this.dynamicAnchorElement){const t=new MutationObserver((()=>{const e=document.querySelector(this.anchorSelector);e&&(this.observeIntersection(e),t.disconnect())}));t.observe(this.dynamicAnchorElement,{childList:!0,subtree:!0,attributes:!1})}}observeIntersection(t){this.observer=new IntersectionObserver((t=>{const[{isIntersecting:e}]=t;e&&(this.render(),this.observer&&this.observer.disconnect())}),{threshold:1}),this.observer.observe(t)}}class M{constructor({props:t,baseNode:e}){this.props=void 0,this.baseNode=void 0,this.tipManager=null,this.props=t,this.baseNode=e}onMount(){this.tipManager=new I(Object.assign(Object.assign({},this.props),{},{baseNode:this.baseNode})),this.tipManager.start()}onUnmount(){this.tipManager&&(this.tipManager.destroy(),this.tipManager=null)}}window.opbox.component.register({prototypeName:"allegro.product.edu.tip",clientImplementationVersion:"17f"},M);var H=e.a;export{H as Component};
//# sourceMappingURL=index.es6_bc5ce26e.js.map