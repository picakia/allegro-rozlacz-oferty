/*! For license information please see index-pl-PL_00e7f3c1.js.LICENSE.txt */
!function(){"use strict";var t,e,n=[function(t,e,n){n.d(e,{a:function(){return i}});var r=n(1);function i(t){var e=function(t,e){if("object"!==(0,r.a)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!==(0,r.a)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return t+""}(t);return"symbol"===(0,r.a)(e)?e:e+""}},function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{a:function(){return r}})},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{a:function(){return r}})},function(t,e,n){n.d(e,{a:function(){return a}});var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(0,r.a)(i.key),i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},function(t,e,n){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{a:function(){return r}})},function(t,e,n){n.d(e,{a:function(){return i},b:function(){return r}});var r={Agent:"Agent",Chatbot:"Chatbot",Client:"Client",System:"System"},i={Agent:r.Agent,Chatbot:r.Chatbot,None:""}},function(t,e,n){n.d(e,{a:function(){return r}});var r={Minimized:"Minimized",Normal:"Normal"}},function(t,e,n){n.d(e,{a:function(){return u},b:function(){return c},c:function(){return o},d:function(){return s}});var r=n(14),i=n(13),a=localStorage||{getItem:function(){return null},setItem:function(){},removeItem:function(){},clear:function(){},key:function(){return null},length:0},o=function(){return null!==a.getItem(i.a)},c=function(t){try{var e=a.getItem(i.a)||"";return JSON.parse(e).conversations[t]||{}}catch(t){return{}}},s=function(t,e){var n=c(t),o={conversations:(0,r.a)({},t,Object.assign(Object.assign({},n),e))};a.setItem(i.a,JSON.stringify(o))},u=function(){return a.removeItem(i.a)}},function(t,e,n){n.d(e,{a:function(){return r}});var r={Dependent:"Dependent",Standalone:"Standalone",WebView:"WebView"}},function(t,e,n){n.d(e,{a:function(){return u},b:function(){return l}});var r="MobileApp",i="Mweb",a=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/gi,o=/allegro/i,c=/client-id/i,s=function(){var t=navigator.userAgent,e=t.match(o),n=t.match(c);return e&&n?r:t.match(a)?i:"Other"},u=function(){return s()===r},l=function(){return s()===i}},function(t,e,n){n.d(e,{a:function(){return o}});var r=n(15),i=n(2),a=n(3),o=new(function(){function t(){(0,i.a)(this,t),this.listeners=[],this.memoizedStream=new Map}return(0,a.a)(t,[{key:"emit",value:function(t,e){this.memoizedStream.set(t,e),this.listeners.filter((function(e){return e.event===t})).forEach((function(t){return setTimeout((function(){return t.subscriber(e)}),0)}))}},{key:"subscribe",value:function(t,e){var n={event:t,subscriber:e};if(this.listeners=[].concat((0,r.a)(this.listeners),[n]),this.memoizedStream.has(t)){var i=this.memoizedStream.get(t);this.emit(t,i)}return{unsubscribe:this.unsubscribe.bind(this,n)}}},{key:"unsubscribe",value:function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))}}]),t}())},,function(t,e,n){function r(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}n.d(e,{a:function(){return r}})},function(t,e,n){n.d(e,{a:function(){return r}});var r="chat.preferences"},function(t,e,n){n.d(e,{a:function(){return i}});var r=n(0);function i(t,e,n){return(e=(0,r.a)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){n.d(e,{a:function(){return a}});var r=n(4),i=n(16);function a(t){return function(t){if(Array.isArray(t))return(0,r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){n.d(e,{a:function(){return i}});var r=n(4);function i(t,e){if(t){if("string"==typeof t)return(0,r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.a)(t,e):void 0}}},function(t,e,n){n.d(e,{a:function(){return a},b:function(){return i},c:function(){return r}});var r=function(){},i=function(){return null},a=function(){return Promise.resolve()}},function(t,e,n){function r(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function c(t){r(o,i,a,c,s,"next",t)}function s(t){r(o,i,a,c,s,"throw",t)}c(void 0)}))}}n.d(e,{a:function(){return i}})},function(t,e,n){n.d(e,{a:function(){return i}});var r=n(1);function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),c=new j(r||[]);return a(o,"_invoke",{value:k(t,n,c)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function v(){}function p(){}function b(){}var g={};l(g,c,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==e&&n.call(m,c)&&(g=m);var A=b.prototype=v.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function i(a,o,c,s){var u=h(t[a],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==(0,r.a)(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,c,s)}),(function(t){i("throw",t,c,s)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,s)}))}s(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=C(o,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function C(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=b,a(A,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:p,configurable:!0}),p.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},w(S.prototype),l(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new S(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(A),l(A,u,"Generator"),l(A,c,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=I,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}},function(t,e,n){n.d(e,{a:function(){return r}});var r=function(t){return{timestamp:(new Date).setMilliseconds(0),value:t}}},function(t,e,n){n.d(e,{a:function(){return r}});var r=function(t){return console.warn(t)}},function(t,e,n){function r(){return"visible"===document.visibilityState}function i(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(){return t(r())};return window.addEventListener("visibilitychange",n),e&&n(),function(){return window.removeEventListener("visibilitychange",n)}}n.d(e,{a:function(){return r},b:function(){return i}})},function(t,e,n){n.d(e,{a:function(){return o},b:function(){return r},c:function(){return i},d:function(){return a}});var r="application/vnd.allegro.internal.v5+json",i=3e3,a=6e4,o=3e3}],r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var a=r[t]={exports:{}};return n[t](a,a.exports,i),a.exports}i.m=n,i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,n){return i.f[n](t,e),e}),[]))},i.u=function(t){return({47:"ChatWindow",207:"EndChat",307:"initializeAppState",370:"Chat",438:"Survey",709:"getAgentsAvailability",764:"Tooltip",797:"ChatMinimized",869:"Sound",886:"getInitialConversation",975:"startNewChatSession"}[t]||t)+"-pl-PL_"+i.h().slice(0,8)+".js"},i.h=function(){return"00e7f3c1"},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t={},e="@allegro/opbox-plugin-chat:",i.l=function(n,r,a,o){if(t[n])t[n].push(r);else{var c,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var f=u[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==e+a){c=f;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.setAttribute("data-webpack",e+a),c.src=n,0!==c.src.indexOf(window.location.origin+"/")&&(c.crossOrigin="anonymous")),t[n]=[r];var h=function(e,r){c.onerror=c.onload=null,clearTimeout(d);var i=t[n];if(delete t[n],c.parentNode&&c.parentNode.removeChild(c),i&&i.forEach((function(t){return t(r)})),e)return e(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=h.bind(null,c.onerror),c.onload=h.bind(null,c.onload),s&&document.head.appendChild(c)}},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="https://assets.allegrostatic.com/sc-14778/",function(){var t={826:0};i.f.j=function(e,n){var r=i.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((function(n,i){r=t[e]=[n,i]}));n.push(r[2]=a);var o=i.p+i.u(e),c=Error();i.l(o,(function(n){if(i.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",c.name="ChunkLoadError",c.type=a,c.request=o,r[1](c)}}),"chunk-"+e,e)}};var e=function(e,n){var r,a,o=n[0],c=n[1],s=n[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(r in c)i.o(c,r)&&(i.m[r]=c[r]);s&&s(i)}for(e&&e(n);u<o.length;u++)a=o[u],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0},n=self.webpackJsonp_1bb0f=self.webpackJsonp_1bb0f||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var a={};!function(){i.r(a);var t,e,n,r,o,c,s,u,l=i(12),f=i(5),h=i(8),d=i(19),v=i(18),p=i(2),b=i(3),g=i(6),y=i(23),m=i(17),A=i(22),w=i(20),S=i(7),k=i(21),C=i(9),O=i(10),P=[/\/moje-allegro\/moje-konto\/centrum-wiadomosci\/wiadomosci(|\/.*)$/gi],j=function(){var t=window.location.pathname;return P.some((function(e){return null!==t.match(e)}))},I=function(){function t(e){var n=this;(0,p.a)(this,t),this.state=void 0,this.props=void 0,this.agentsAvailabilityCheckInterval=void 0,this.unsubscribeTabVisibilitySubscription=void 0,this.registeredFunctions=void 0,this.setState=function(t){n.state=Object.assign(Object.assign({},n.state),t)},this.loadComponent=function(t,e){i.e(370).then(i.bind(i,25)).then((function(n){return(0,n.renderChat)(t,e)})),n.setState({loaded:!0})},this.props=e,this.state={loaded:!1,chatAgentsAvailable:!1,callbackAsapAgentsAvailable:!1,callbackScheduleAgentsAvailable:!1,callbackAlias:"",chatInProgress:!1,chatAlias:e.chatConfiguration.chatAlias||"",gmsServiceId:""},this.registeredFunctions={closeChatWindow:m.c,endChatSession:m.c,endCallbackSession:m.c,setChatStartedMode:m.c,startCallbackSession:m.c},this.subscribeEvents(),this.initialize()}var e,n;return(0,b.a)(t,[{key:"initialize",value:(n=(0,v.a)((0,d.a)().mark((function t(){var e,n,r,a,o,c,s;return(0,d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.chatConfiguration.chatInstance,n=null,!(0,C.a)()||!j()){t.next=4;break}return t.abrupt("return");case 4:if(!this.isPluginInitialized()){t.next=12;break}return t.next=7,i.e(886).then(i.bind(i,24));case 7:return r=t.sent,a=r.getInitialConversation,t.next=11,a().catch((function(){return null}));case 11:n=t.sent;case 12:if(null===n){t.next=23;break}return this.state.chatInProgress=!0,t.next=16,i.e(307).then(i.bind(i,26));case 16:o=t.sent,c=o.initializeAppState,s=c(n,this.props.chatConfiguration),this.loadComponent(s,n),this.registeredFunctions.setChatStartedMode(),t.next=25;break;case 23:(0,S.a)(),e===h.a.WebView?this.startNewChatSession():this.initializeStandaloneChat();case 25:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"subscribeEvents",value:function(){var t=this;O.a.subscribe("startConversation",(function(e){t.updateChatAlias(e),t.startNewChatSession()})),O.a.subscribe("startNewWebViewConversation",(function(e){t.updateChatAlias(e),t.setState({chatInProgress:!1}),t.startNewChatSession()})),O.a.subscribe("closeWindow",(function(){t.registeredFunctions.closeChatWindow(),t.setState({chatInProgress:!1})})),O.a.subscribe("disconnected",(function(){t.registeredFunctions.endChatSession(),t.initializeStandaloneChat()}))}},{key:"initializeStandaloneChat",value:function(){var t=this.props.chatConfiguration,e=t.chatAlias,n=t.chatInstance,r=t.conversationWith,i=t.tooltip,a=this.state,o=a.callbackAlias,c=a.gmsServiceId,s=a.loaded;n===h.a.Standalone&&(r===f.a.Agent&&this.startAgentsAvailabilityChecker({chatAlias:e,callbackAlias:o,gmsServiceId:c}),s?O.a.emit("updateAppState",{chatAlias:e,chatInstance:n,conversationWith:r,tooltip:i}):this.loadComponent({chatAlias:e,chatInstance:n,conversationWith:r,displayModeState:(0,w.a)(g.a.Minimized),tooltip:i}))}},{key:"startNewChatSession",value:function(t,e){var n=this,r=this.state,a=r.chatAlias;return r.chatInProgress?((0,k.a)("Conversation already started."),Promise.resolve()):a?i.e(975).then(i.bind(i,27)).then((function(r){return(0,r.startNewChatSession)(n.props,n.state,n.setState,n.loadComponent,t,e)})):((0,k.a)("Conversation wasn't created. Chat alias \"".concat(a,'" is incorrect.')),Promise.resolve())}},{key:"updateAliases",value:function(t){var e=t.callbackAlias,n=void 0===e?this.state.callbackAlias:e,r=t.chatAlias,i=void 0===r?this.state.chatAlias:r,a=t.gmsServiceId,o=void 0===a?this.state.gmsServiceId:a;this.setState({callbackAlias:n||"",chatAlias:i||"",gmsServiceId:o||""})}},{key:"updateAvailability",value:function(t){var e=t.isCallbackAsapConsultantAvailable,n=t.isCallbackScheduleConsultantAvailable,r=t.isConsultantAvailable;this.setState({chatAgentsAvailable:r,callbackScheduleAgentsAvailable:n,callbackAsapAgentsAvailable:e})}},{key:"isPluginInitialized",value:function(){return!("chatConversationProbablyActive"in this.props&&!(0,S.c)())||this.props.chatConversationProbablyActive}},{key:"startAgentsAvailabilityChecker",value:function(t){var e,n=this;this.updateAliases(t);var r=function(){var t={isCallbackAsapConsultantAvailable:!1,isCallbackScheduleConsultantAvailable:!1,isConsultantAvailable:!1};n.updateAvailability(t),O.a.emit("agentsAvailability",t)};null==(e=this.unsubscribeTabVisibilitySubscription)||e.call(this),this.clearAgentsAvailabilityCheckInterval(),this.unsubscribeTabVisibilitySubscription=(0,A.b)((function(e){var i,a;e?n.agentsAvailabilityCheckInterval=(i=function(){return n.checkAgentsAvailability(t).catch(r)},a=y.a,i(),setInterval(i,a)):n.clearAgentsAvailabilityCheckInterval()}),!0)}},{key:"clearAgentsAvailabilityCheckInterval",value:function(){var t=this.agentsAvailabilityCheckInterval;t&&(clearInterval(t),this.agentsAvailabilityCheckInterval=void 0)}},{key:"checkAgentsAvailability",value:(e=(0,v.a)((0,d.a)().mark((function t(e){var n=this;return(0,d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.chatAlias||e.callbackAlias){t.next=2;break}throw Error("No callback and chat aliases.");case 2:return this.updateAliases(e),t.abrupt("return",i.e(709).then(i.bind(i,28)).then((function(t){var r=t.getAgentsAvailability,i=n.state,a=i.callbackAlias,o=i.chatAlias;return r(Object.assign({callbackAlias:a,chatAlias:o},e))})).then((function(t){n.updateAvailability(t),O.a.emit("agentsAvailability",t)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"registerFunctions",value:function(t){this.registeredFunctions=Object.assign(Object.assign({},this.registeredFunctions),t)}},{key:"updateChatAlias",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({chatAlias:t})}},{key:"displayState",value:function(t){this.state.chatInProgress||t!==g.a.Normal?Object.values(g.a).includes(t)?O.a.emit("updateDisplayState",t):(0,k.a)("Passed state is incorrect."):(0,k.a)("You can't display chat if conversation isn't started.")}},{key:"tooltip",value:function(t){O.a.emit("updateTooltipVisibility",!!t.visibility)}},{key:"getPublicApi",value:function(){var t=this,e={updateChatAlias:this.updateChatAlias.bind(this),startNewChatSession:this.startNewChatSession.bind(this),startAgentsAvailabilityChecker:this.startAgentsAvailabilityChecker.bind(this),clearInterval:this.clearAgentsAvailabilityCheckInterval.bind(this),registerFunctions:this.registerFunctions.bind(this),displayState:this.displayState.bind(this),tooltip:this.tooltip.bind(this),eventBus:O.a};return Object.defineProperty(e,"chatAgentsAvailable",{get:function(){return t.state.chatAgentsAvailable}}),Object.defineProperty(e,"chatInProgress",{get:function(){return t.state.chatInProgress}}),Object.defineProperty(e,"callbackScheduleAgentsAvailable",{get:function(){return t.state.callbackScheduleAgentsAvailable}}),Object.defineProperty(e,"callbackAsapAgentsAvailable",{get:function(){return t.state.callbackAsapAgentsAvailable}}),Object.defineProperty(e,"callbackAlias",{get:function(){return t.state.callbackAlias}}),Object.defineProperty(e,"gmsServiceId",{get:function(){return t.state.gmsServiceId}}),Object.defineProperty(e,"startCallbackSession",{get:function(){return t.registeredFunctions.startCallbackSession.bind(t)}}),Object.defineProperty(e,"endCallbackSession",{get:function(){return t.registeredFunctions.endCallbackSession.bind(t)}}),e}}]),t}(),x=new I((e=(t=function(t){try{return JSON.parse(window.document.querySelector('script[data-serialize-plugin-name="chatPlugin"][data-civ="d68"]').textContent)}catch(t){return window.opbox.reportError(Error('Missing serialized props of plugin "chatPlugin", with civ "d68"')),{}}}()).chatConfiguration,n=(0,l.a)(t,["chatConfiguration"]),Object.assign(Object.assign({},n),{},{chatConfiguration:(r=e,o=r.config,c=void 0===o?[]:o,s=window.opbox.config.language,u=c.find((function(t){var e=t.chatAlias,n=t.chatInstance,r=t.conversationWith,i=t.restrictions;if(!e||!n||!r)return!1;if(i){var a=!0,o=i.languages,c=void 0===o?[]:o,u=i.urls,l=void 0===u?[]:u,f=!!c.length,h=!!l.length;return f&&a&&(a=c.some((function(t){return t===s}))),h&&a&&(a=l.some((function(t){var e,n,r,i,a,o=t.hash,c=void 0===o?"":o,s=t.queryParams,u=void 0===s?[]:s,l=!!c,f=!!u.length,h=!l||(e=c,window.location.hash.replace("#","")===e.replace("#","")),d=!f||(n=window.location.search,r=function(t){return t.reduce((function(t,e){return t[e.key]=e.value,t}),{})}(u),i=new URLSearchParams(n),a=new URLSearchParams(r),i.sort(),a.sort(),i.toString()===a.toString());return h&&d}))),a}return!0})),u?{chatAlias:u.chatAlias,chatInstance:u.chatInstance,conversationWith:u.conversationWith,tooltip:u.tooltip||null}:{chatAlias:"",chatInstance:h.a.Dependent,conversationWith:f.a.None,tooltip:null})})));window.opbox.plugin.register({name:"chatPlugin"},x.getPublicApi())}();var o=window;for(var c in a)o[c]=a[c];a.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})}();
//# sourceMappingURL=index-pl-PL_00e7f3c1.js.map