function e(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var t=0;function s(e){return"__private_"+t+++"_"+e}let i=(e=21)=>{let t="",s=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[e]];return t},n=()=>({emit(e,...t){for(let s=0,i=this.events[e]||[],n=i.length;s<n;s++)i[s](...t)},events:{},on(e,t){var s;return((s=this.events)[e]||(s[e]=[])).push(t),()=>{var s;this.events[e]=null==(s=this.events[e])?void 0:s.filter((e=>t!==e))}}});const a=e=>({key:e});let r=(e=>(e.Danger="Danger",e.Information="Information",e.Warning="Warning",e.Success="Success",e))({}),o=(e=>(e.BottomLeft="BottomLeft",e.TopCenter="TopCenter",e))({}),h=(e=>(e.Danger="Danger",e.Information="Information",e.Warning="Warning",e.Success="Success",e))({});const l={type:r.Success,position:o.BottomLeft,hasIcon:!0,button:null,duration:5e3,autoClose:!0,wrapWithParagraph:!0},c=e=>Object.assign(Object.assign({},l),e);let g=(e=>(e.SHOW_ALERT="SHOW_ALERT",e.CLOSE_ALERT="CLOSE_ALERT",e.SHOW_BANNER="SHOW_BANNER",e.CLOSE_BANNER="CLOSE_BANNER",e))({});const u={type:h.Success,hasIcon:!0,hasCloseButton:!0,buttons:[],title:"",wrapWithParagraph:!0},m=e=>Object.assign(Object.assign({},u),e);class d{constructor(e){this.messages=void 0,this.eventEmitter=void 0,this.addMessage=(e,t)=>{this.hasMassage(e.key)||(this.messages.add(e.key),this.eventEmitter.emit(t,e))},this.removeMessage=(e,t)=>{this.hasMassage(e.key)&&(this.messages.delete(e.key),this.eventEmitter.emit(t,e))},this.hasMassage=e=>this.messages.has(e),this.messages=new Set,this.eventEmitter=e}}class v{constructor(){this.scheduledTimeouts=new Map}setAlertTimeout(e,t,s){const i=window.setTimeout(t,s);this.scheduledTimeouts.set(e,i)}clearAlertTimeout(e){const t=this.scheduledTimeouts.get(e);window.clearTimeout(t),this.scheduledTimeouts.delete(e)}}class A{constructor(e){this.messagesManager=void 0,this.alertTimerManager=void 0,this.addAlert=e=>{this.messagesManager.hasMassage(e.key)||(this.messagesManager.addMessage(e,g.SHOW_ALERT),this.scheduleAlertClosing(e))},this.removeAlert=e=>{this.messagesManager.hasMassage(e.key)&&(this.messagesManager.removeMessage(e,g.CLOSE_ALERT),this.unscheduleAlertClosing(e.key))},this.messagesManager=new d(e),this.alertTimerManager=new v}scheduleAlertClosing({options:e,key:t}){e.autoClose&&this.alertTimerManager.setAlertTimeout(t,(()=>this.removeAlert(a(t))),e.duration)}unscheduleAlertClosing(e){this.alertTimerManager.clearAlertTimeout(e)}}var E=s("eventEmitter"),p=s("alertsManager"),w=s("bannersManager");window.opbox.services.register({serviceName:"opbox-messages-service"},class{constructor(){Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),this.showAlert=(t,s={},n=i())=>{const a=((e,t,s)=>({content:e,options:c(t),key:s}))(t,s,n);return e(this,p)[p].addAlert(a),n},this.closeAlert=t=>{const s=a(t);e(this,p)[p].removeAlert(s)},this.showBanner=(t,s={},n=i())=>{const a=((e,t,s)=>({content:e,options:m(t),key:s}))(t,s,n);return e(this,w)[w].addMessage(a,g.SHOW_BANNER),n},this.closeBanner=t=>{const s=(e=>({key:e}))(t);e(this,w)[w].removeMessage(s,g.CLOSE_BANNER)},this.onShowAlert=t=>e(this,E)[E].on(g.SHOW_ALERT,t),this.onCloseAlert=t=>e(this,E)[E].on(g.CLOSE_ALERT,t),this.onShowBanner=t=>e(this,E)[E].on(g.SHOW_BANNER,t),this.onCloseBanner=t=>e(this,E)[E].on(g.CLOSE_BANNER,t),e(this,E)[E]=n(),e(this,p)[p]=new A(e(this,E)[E]),e(this,w)[w]=new d(e(this,E)[E])}});
//# sourceMappingURL=index.es6_7243dc98.js.map